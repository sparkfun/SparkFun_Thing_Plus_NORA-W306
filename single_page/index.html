
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A hookup guide for the SparkFun Thing Plus NORA-W306.">
      
      
        <meta name="author" content="SparkFun Electronics">
      
      
        <link rel="canonical" href="https://sparkfun.github.io/SparkFun_Thing_Plus_NORA-W306/single_page/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/sfe_favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42+insiders-4.53.14">
    
    
      
        <title>Introduction - SparkFun Thing Plus NORA-W306 Hookup Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.12320a83.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775m1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25m13.274 9.537zl-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074M4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5M4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75M8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.307 5.476c-.756.134-1.975-.615-2.59-1.362-.755-.922-.66-1.647-.071-2.29.883-.978 2.396-.6 2.396-.6s-2.772-2.432-5.658-.44c-2.571 1.77-1.833 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.443-.184-2.034-1.343-1.687-2.054.298-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044c-1.259.474-2.297 1.515-2.214 4.12V24s1.301-1.604 2.83-3.236c1.714-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.371-3.645 3.141-4.563.67-9.68-1.43-10.343 0 0 .34 1.438-.745 1.638"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13M6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.76 2.76 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6 6 0 0 0-.26.16 1 1 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1 1 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.61.61 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1 1 0 0 0-.34.398M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0M9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343za8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746m1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275M6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.75.75 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L6.94 8 4.97 6.03a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.25 1.25 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005 0-.009.004"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.5 3.5 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327q0 .15-.025.292c.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5q-.002.615-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A5 5 0 0 1 8 16a5 5 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5 5 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.7 1.7 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06m.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.17.17 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.75.75 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5m4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5m0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5M2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0"/></svg>');--md-admonition-icon--github:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>');--md-admonition-icon--arduino:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.087 6.146c-.3 0-.607.017-.907.069-2.532.367-4.23 2.239-5.18 3.674-.95-1.435-2.648-3.307-5.18-3.674a6.5 6.5 0 0 0-.907-.069C2.648 6.146 0 8.77 0 12s2.656 5.854 5.913 5.854c.3 0 .607-.017.916-.069 2.531-.376 4.23-2.247 5.18-3.683.949 1.436 2.647 3.307 5.18 3.683.299.043.607.069.915.069C21.344 17.854 24 15.23 24 12s-2.656-5.854-5.913-5.854M6.53 15.734a4 4 0 0 1-.625.043c-2.148 0-3.889-1.7-3.889-3.777 0-2.085 1.749-3.777 3.898-3.777q.312.002.624.043c2.39.35 3.847 2.768 4.347 3.734-.508.974-1.974 3.384-4.355 3.734m11.558.043c-.208 0-.416-.017-.624-.043-2.39-.35-3.856-2.768-4.347-3.734.491-.966 1.957-3.384 4.347-3.734q.312-.041.624-.043c2.149 0 3.89 1.7 3.89 3.777 0 2.085-1.75 3.777-3.89 3.777m1.65-4.404v1.134h-1.205v1.182h-1.156v-1.182H16.17v-1.134h1.206V10.19h1.156v1.183zM4.246 12.498H7.82v-1.125H4.245v1.125z"/></svg>');--md-admonition-icon--python:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');--md-admonition-icon--code:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg>');--md-admonition-icon--terminal:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25Zm1.75-.25a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V2.75a.25.25 0 0 0-.25-.25ZM7.25 8a.75.75 0 0 1-.22.53l-2.25 2.25a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L5.44 8 3.72 6.28a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l2.25 2.25c.141.14.22.331.22.53m1.5 1.5h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5"/></svg>');--md-admonition-icon--serial:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 0C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h176l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32h256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-69.3L336 416h176c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm448 64v288H64V64z"/></svg>');--md-admonition-icon--hot:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.66 11.2c-.23-.3-.51-.56-.77-.82-.67-.6-1.43-1.03-2.07-1.66C11.33 7.26 11 4.85 11.95 3c-.95.23-1.78.75-2.49 1.32-2.59 2.08-3.61 5.75-2.39 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.23.1-.47.04-.66-.12a.6.6 0 0 1-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C3.78 10 2.87 12.3 3 14.47c.06.5.12 1 .29 1.5.14.6.41 1.2.71 1.73 1.08 1.73 2.95 2.97 4.96 3.22 2.14.27 4.43-.12 6.07-1.6 1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6-1.12.4-2.24-.16-2.9-.82 1.19-.28 1.9-1.16 2.11-2.05.17-.8-.15-1.46-.28-2.23-.12-.74-.1-1.37.17-2.06.19.38.39.76.63 1.06.77 1 1.98 1.44 2.24 2.8.04.14.06.28.06.43.03.82-.33 1.72-.93 2.27M21 13h-2V7h2zm0 4h-2v-2h2z"/></svg>');--md-admonition-icon--link:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018 2 2 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.75.75 0 0 1-1.042-.018.75.75 0 0 1-.018-1.042m-4.69 9.64a2 2 0 0 0 2.83 0l1.25-1.25a.75.75 0 0 1 1.042.018.75.75 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .75.75 0 0 1-.018 1.042.75.75 0 0 1-1.042.018 2 2 0 0 0-2.83 0l-2.5 2.5a2 2 0 0 0 0 2.83"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../stylesheet/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-7Y7EYCZVC1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-7Y7EYCZVC1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-7Y7EYCZVC1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://www.sparkfun.com/" title="SparkFun Thing Plus NORA-W306 Hookup Guide" class="md-header__button md-logo" aria-label="SparkFun Thing Plus NORA-W306 Hookup Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SparkFun Thing Plus NORA-W306 Hookup Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="red"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="grey" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sparkfun/SparkFun_Thing_Plus_NORA-W306" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sparkfun/SparkFun_Thing_Plus_NORA-W306
  </div>
</a>
      </div>
    
  </nav>
  
    
      <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Navigation tabs -->
<nav
  class="md-tabs"
  aria-label="Tabs"
  data-md-component="tabs"
>
  <div class="md-tabs__inner md-grid">

    <!-- Adds tab on right side of header -->
    
    <ul class="md-tabs__list" style="float: right;">
      <li class="md-tabs__item">
        <a href="/SparkFun_Thing_Plus_NORA-W306/hard_copy/" class="md-tabs__link">
          Hard Copies 🖨️
        </a>
      </li>
    </ul>
    

    <!-- Original tabbed sections -->
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../introduction/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../resources/" class="md-tabs__link">
        
  
    
  
  Resources

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../troubleshooting/" class="md-tabs__link">
          
  
  Support

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Determine base classes -->


  



<!-- Navigation -->
<nav
  class="md-nav md-nav--primary md-nav--lifted"
  aria-label="Navigation"
  data-md-level="0"
>

  <!-- Site title -->
  <!-- title="SparkFun Thing Plus NORA-W306 Hookup Guide" -->
  <label class="md-nav__title" for="__drawer">
    <a
      href="https://www.sparkfun.com/"
      title="SparkFun Product Page"
      class="md-nav__button md-logo"
      aria-label="SparkFun Thing Plus NORA-W306 Hookup Guide"
      data-md-component="logo"
    >
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>

    </a>
    SparkFun Thing Plus NORA-W306 Hookup Guide
  </label>

  <!-- Repository information -->
  
    <div class="md-nav__source">
      <a href="https://github.com/sparkfun/SparkFun_Thing_Plus_NORA-W306" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    sparkfun/SparkFun_Thing_Plus_NORA-W306
  </div>
</a>
    </div>
  

  <!-- Navigation list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Hardware Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_hookup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Hardware Hookup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installing_drivers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installing the CP2102 USB Driver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setting_up_arduino/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Setting Up Arduino
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Installing the Arduino Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Arduino
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Arduino
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_1_blink/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 1 - Blink
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_2_button/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 2 - Button
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_3_scan_wifi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 3 - Scanning WiFi Networks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_4_connect_wifi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 4 - Connecing to a WiFi Network
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_5a_bluetooth_uart_service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 5a - Bluetooth UART Service
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_5b_bluetooth_uart_client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 5b - Bluetooth UART Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_6_microsd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 6 - MicroSD Card
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_7_deep_sleep_blink/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 7 - Deep Sleep and Blink
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_8_deep_sleep_temperature_datalogging_BME280/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 8 - Deep Sleep and MicroSD Temperature DataLogging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_9_lipo_fuel_gauge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 9 - MAX17048 LiPo Fuel Gauge
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_10_ws2812/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 10 - WS2812 Addressable RGB LED
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_11_qwiic_micro_oled/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 11 - Qwiic Micro OLED
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arduino_example_12_lipo_fuel_gauge_micro_oled_ws2812/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Example 12 - MAX17048 LiPo Fuel Gauge with Micro OLED Display Demo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../more_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    More Examples!!!
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Support
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Support
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../github/file_issue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Submit Issues
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../github/contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Contribute
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    

    <!-- Add Hard Copies to NAV menu -->
    <li class="md-nav__item">
      <a href="/SparkFun_Thing_Plus_NORA-W306/hard_copy/" class="md-nav__link">
      <span class="md-ellipsis">
          Hard Copies&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.5c-1.35-.85-3.8-1.5-5.5-1.5-1.65 0-3.35.3-4.75 1.05-.1.05-.15.05-.25.05-.25 0-.5-.25-.5-.5V6c.6-.45 1.25-.75 2-1 1.11-.35 2.33-.5 3.5-.5 1.95 0 4.05.4 5.5 1.5 1.45-1.1 3.55-1.5 5.5-1.5 1.17 0 2.39.15 3.5.5.75.25 1.4.55 2 1v14.6c0 .25-.25.5-.5.5-.1 0-.15 0-.25-.05-1.4-.75-3.1-1.05-4.75-1.05-1.7 0-4.15.65-5.5 1.5M12 8v11.5c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5V7c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5m1 3.5c1.11-.68 2.6-1 4.5-1 .91 0 1.76.09 2.5.28V9.23c-.87-.15-1.71-.23-2.5-.23q-2.655 0-4.5.84zm4.5.17c-1.71 0-3.21.26-4.5.79v1.69c1.11-.65 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24v-1.5c-.87-.16-1.71-.23-2.5-.23m2.5 2.9c-.87-.16-1.71-.24-2.5-.24-1.83 0-3.33.27-4.5.8v1.69c1.11-.66 2.6-.99 4.5-.99 1.04 0 1.88.08 2.5.24z"/></svg>
      </span>
      </a>
    </li>
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#required-materials" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Required Materials<a class="headerlink" href="#required-materials" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Tools (Optional)<a class="headerlink" href="#tools-optional" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prototyping-accessories" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Prototyping Accessories<a class="headerlink" href="#prototyping-accessories" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qwiic-cables" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Qwiic Cables<a class="headerlink" href="#qwiic-cables" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lipo-battery" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          LiPo Battery<a class="headerlink" href="#lipo-battery" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suggested-reading" class="md-nav__link">
    <span class="md-ellipsis">
      
        <span class="md-typeset">
          Suggested Reading<a class="headerlink" href="#suggested-reading" title="Permanent link"></a>
        </span>
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                

  




              
              <article class="md-content__inner md-typeset">
                

<!-- Adds file-eye icon to view hookup guide as a single page -->

    <a href="/SparkFun_Thing_Plus_NORA-W306/single_page" title="View Guide as Single-Page" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
        <!-- .icons/fontawesome/solid/scroll.svg -->
    </a>




                  
  



  
    <a href="https://github.com/sparkfun/SparkFun_Thing_Plus_NORA-W306/blob/main/docs/single_page.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link"></a></h1>
<p>The <a href="https://www.sparkfun.com/products/21637">SparkFun Thing Plus - NORA-W306</a> is a Feather form-factor development board equipped with the u-blox NORA-W306 module. The module contains a Realtek RTL8720DF, which has an integrated single-chip low-power dual-band (2.4GHz and 5GHz) Wireless LAN (WLAN) and Bluetooth&reg; Low Energy (BLE 5.3) communication microcontroller. It also consists of a dual processor core: Arm Cortex-M33 and Cortex-M23. To complement the module's low-power options, we've optimized components and added the ability to depower all subsystems to conserve as much power as possible for remote battery-powered applications.</p>
<div class="grid cards" style="width:500px; margin: 0 auto;">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/21637">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/2/1/4/7/0/WRL-21637-Thing-Plus-NORA-W306-feature.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Thing Plus NORA-W306">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/21637">
  <b>SparkFun Thing Plus NORA-W306</b>
  <br />
  WRL-21637
  <br />
  <center><a class="md-button md-button--primary" href="https://www.sparkfun.com/products/21637">Purchase from SparkFun <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 24C0 10.7 10.7 0 24 0h45.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5l-51.6-271c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24m128 440a48 48 0 1 1 96 0 48 48 0 1 1-96 0m336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96M252 160c0 11 9 20 20 20h44v44c0 11 9 20 20 20s20-9 20-20v-44h44c11 0 20-9 20-20s-9-20-20-20h-44V96c0-11-9-20-20-20s-20 9-20 20v44h-44c-11 0-20 9-20 20"/></svg></span></a></center>
</a></p>
</li>
</ul>
</div>
<div style="text-align: center;">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/sLkoSZ7Aepk?si=EVbyI7tt1I8poK95" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>

<p>In this tutorial, we'll go over the hardware and how to hookup the development board to an Arduino. We will also go over a few Arduino examples to get started!</p>
<h3 id="required-materials">Required Materials<a class="headerlink" href="#required-materials" title="Permanent link"></a></h3>
<p>To follow along with this tutorial, you will need the following materials. You may not need everything though depending on what you have. Add it to your cart, read through the guide, and adjust the cart as necessary.</p>
<!--


* 1x [USB micro-B Cable - 6 Foot [CAB-15425]](https://www.sparkfun.com/products/15425)
* 1x [SparkFun Thing Plus NORA-W306 [WRL-21637]](https://www.sparkfun.com/products/21637)
* 1x microSD Card
    * [microSD Card - 1GB (Class 4) [COM-15107]](https://www.sparkfun.com/products/15107) for those that are interested in logging data
* 1x microSD Card Adapter
* 1x Qwiic Cable
    * [Flexible Qwiic Cable - 50mm [PRT-17260]](https://www.sparkfun.com/products/17260), for short distances
    * [Flexible Qwiic Cable - 500mm [PRT-17257]](https://www.sparkfun.com/products/17257), for those that need to wire the board farther away from your microcontroller
* 1x [SparkFun Micro OLED Breakout (Qwiic) [SEN-22495]](https://www.sparkfun.com/products/22495) to Qwiic-ly connect and display readings

-->

<div class="grid cards col-4">
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/15425">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/1/3/9/8/4/15425-Reversible_USB_A_to_C_Cable_-_0.8m-02.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Reversible USB A to C Cable - 0.8m">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/15425">
  <b>Reversible USB A to C Cable - 0.8m</b>
  <br />
  CAB-15425
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/21637">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/2/1/4/7/0/WRL-21637-Thing-Plus-NORA-W306-feature.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Thing Plus NORA-W306">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/21637">
  <b>SparkFun Thing Plus NORA-W306</b>
  <br />
  WRL-21637
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/15107">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/1/3/4/7/0/15107-microSD_Card_-_1GB__Class_4_-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="microSD Card - 1GB (Class 4)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/15107">
  <b>microSD Card - 1GB (Class 4)</b>
  <br />
  COM-15107
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/22495">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/2/2/5/5/8/22495-OLED-front.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Micro OLED Breakout (Qwiic)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/22858">
  <b>SparkFun Micro OLED Breakout (Qwiic)</b>
  <br />
  SEN-22495
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/17260">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/1/6/2/4/7/17260-Flexible_Qwiic_Cable_-_50mm-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Flexible Qwiic Cable - 50mm">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/17260">
  <b>Flexible Qwiic Cable - 50mm</b>
  <br>
  PRT-17260
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that you have a microSD card reader or adapter as well to read the contents saved on the memory card.</p>
<p><div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="https://cdn.sparkfun.com/assets/parts/7/6/3/6/11609-Action.jpg"><img src="https://cdn.sparkfun.com/assets/parts/7/6/3/6/11609-Action.jpg" width="140px" height="140px" alt="MicroSD Card Adapters"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>MicroSD Card Adapters</i></td>
  </table>
</div></p>
</div>
<h3 id="tools-optional">Tools (Optional)<a class="headerlink" href="#tools-optional" title="Permanent link"></a></h3>
<p>You will need a soldering iron, solder, and <a href="https://www.sparkfun.com/categories/49">general soldering accessories</a> for a secure connection when using the plated through holes. For users that are measuring the current draw, you may want to consider grabbing a digital multimeter or a USB C cable that is able to display the current draw.</p>
<!--

* [Soldering Iron [TOL-14456]](https://www.sparkfun.com/products/14456)
* [Solder Lead Free - 15-gram Tube [TOL-9163]](https://www.sparkfun.com/products/9163)
* [Flush Cutters - Hakko [TOL-11952]](https://www.sparkfun.com/products/11952)
* [Hook-Up Wire - Assortment (Stranded, 22 AWG) [PRT-11375]](https://www.sparkfun.com/products/11375)
* [Wire Strippers - 30AWG (Hakko) [TOL-12630]](https://www.sparkfun.com/products/12630)

-->

<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/14456">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/1/2/4/9/0/14456-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Soldering Iron - 60W (Adjustable Temperature)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/14456">
  <b>Soldering Iron - 60W (Adjustable Temperature)</b>
  <br />
  TOL-14456
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/9163">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/2/5/8/7/09162-02-L.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Solder Lead Free - 15-gram Tube">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/9163">
  <b>Solder Lead Free - 15-gram Tube</b>
  <br>
  TOL-09163
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/11375">
      <figure markdown>
        <img src="https://cdn.sparkfun.com//assets/parts/7/1/2/0/11375-Hook-Up_Wire_-_Assortment__Solid_Core__22_AWG_-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Hook-Up Wire - Assortment (Stranded, 22 AWG)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/11375">
  <b>Hook-Up Wire - Assortment (Stranded, 22 AWG)</b>
  <br />
  PRT-11375
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/12630">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/9/3/1/2/12630-Hakko-Wire-Strippers-30AWG-Feature.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Wire Strippers - 30AWG (Hakko)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/12630">
  <b>Wire Strippers - 30AWG (Hakko)</b>
  <br />
  TOL-12630
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/11952">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/8/4/2/2/11952-Hakko-Flush-Cutters-feature.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Flush Cutters - Hakko">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/11952">
  <b>Flush Cutters - Hakko</b>
  <br />
  TOL-11952
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/12966">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/9/9/0/7/12966-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Digital Multimeter - Basic">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/12966">
  <b>Digital Multimeter - Basic</b>
  <br />
  TOL-12966
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/19718">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/9/4/1/5/19718-USAMS_USB_Type_A_to_Type_C_6A_Fast_Charging_and_Data_Cable_with_LED_Display-02.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Fast Charging USB A to C Cable with LCD - 4ft (6A)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/19718">
  <b>Fast Charging USB A to C Cable with LCD - 4ft (6A)</b>
  <br />
  CAB-19718
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
</div>
<h3 id="prototyping-accessories">Prototyping Accessories<a class="headerlink" href="#prototyping-accessories" title="Permanent link"></a></h3>
<p>Depending on your setup, you may want to use IC hooks for a temporary connection. However, you will want to solder header pins to connect devices to the plated through holes for a secure connection.</p>
<!--

* [Breadboard - Self-Adhesive (White) [PRT-12002]](https://www.sparkfun.com/products/12002)
* [IC Hook with Pigtail [CAB-09741]](https://www.sparkfun.com/products/9741)
* [Break Away Headers - Straight [PRT-00116]](https://www.sparkfun.com/products/116)
* [Feather Stackable Header Kit [PRT-15187]](https://www.sparkfun.com/products/15187)
* [Jumper Wires Premium 6" M/M Pack of 10 [PRT-08431]](https://www.sparkfun.com/products/8431)

-->

<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/12002">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/8/5/0/3/12002-Breadboard_-_Self-Adhesive__White_-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Breadboard - Self-Adhesive (White)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/12002">
  <b>Breadboard - Self-Adhesive (White)</b>
  <br />
  PRT-12002
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/9741">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/3/6/9/6/09741-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="IC Hook with Pigtail">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/9741">
  <b>IC Hook with Pigtail</b>
  <br>
  CAB-09741
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/116">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/0/6/00116-02-L.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Break Away Headers - Straight">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/116">
  <b>Break Away Headers - Straight</b>
  <br />
  PRT-00116
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/15187">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/3/6/0/4/15187-Feather_Stackable_Header_Kit-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Feather Stackable Header Kit">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/15187">
  <b>Feather Stackable Header Kit</b>
  <br />
  PRT-15187
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/9044">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/2/4/0/7/09044-04-L.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Jumper - 2 Pin">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/9044">
  <b>Jumper - 2 Pin</b>
  <br />
  PRT-09044
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/8431">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/1/8/1/JumperWire-Male-01-L.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Jumper Wires Premium 6" M/M Pack of 10">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/8431">
  <b>Jumper Wires Premium 6" M/M Pack of 10</b>
  <br />
  PRT-08431
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
</div>
<h3 id="qwiic-cables">Qwiic Cables<a class="headerlink" href="#qwiic-cables" title="Permanent link"></a></h3>
<p>For those that want to take advantage of the Qwiic enabled devices, you'll want to grab a Qwiic cable.</p>
<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/15081">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/3/4/3/1/15081-_01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="SparkFun Qwiic Cable Kit">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/15081">
  <b>SparkFun Qwiic Cable Kit</b>
  <br />
  KIT-15081
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/14427">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/2/4/5/3/14427-Qwiic_Cable_-_100mm-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Qwiic Cable - 100mm">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/14427">
  <b>Qwiic Cable - 100mm</b>
  <br>
  PRT-14427
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/14429">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/2/4/5/5/14429-Qwiic_Cable_-_500mm-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Qwiic Cable - 500mm">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/14429">
  <b>Qwiic Cable - 500mm</b>
  <br />
  PRT-14429
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/14425">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/parts/1/2/4/5/1/14425-Qwiic_Cable_-_Breadboard_Jumper__4-pin_-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Qwiic Cable - Breadboard Jumper (4-pin)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/14425">
  <b>Qwiic Cable - Breadboard Jumper (4-pin)</b>
  <br />
  PRT-14425
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
</div>
<h3 id="lipo-battery">LiPo Battery<a class="headerlink" href="#lipo-battery" title="Permanent link"></a></h3>
<p>A <a href="https://www.sparkfun.com/categories/tags/lithium-polymer">single-cell Lithium-ion battery</a> can be connected to the SparkFun Thing Plus NORA-W306 for portability.</p>
<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/18286">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/r/140-140/assets/parts/1/7/6/0/6/17748-Lithium_Ion_Battery_-_1250_mAh__IEC62133_certified_-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Lithium Ion Battery - 1250mAh (IEC62133 Certified)">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/18286">
  <b>Lithium Ion Battery - 1250mAh (IEC62133 Certified)</b>
  <br />
  PRT-18286
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/13854">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/r/140-140/assets/parts/1/1/4/6/1/13854-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Lithium Ion Battery - 850mAh">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/13854">
  <b>Lithium Ion Battery - 850mAh</b>
  <br>
  PRT-13854
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
<ul>
<li>
<p><a href="https://www.sparkfun.com/products/13856">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/r/140-140/assets/parts/1/1/4/6/3/13856-01.jpg" style="width:140px; height:140px; object-fit:contain;" alt="Lithium Ion Battery - 6Ah">
      </figure>
    </a></p>
<hr />
<p><a href="https://www.sparkfun.com/products/13856">
  <b>Lithium Ion Battery - 6Ah</b>
  <br />
  PRT-13856
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN PRODUCTS---------- -->
</div>
<h3 id="suggested-reading">Suggested Reading<a class="headerlink" href="#suggested-reading" title="Permanent link"></a></h3>
<p>If you aren't familiar with the Qwiic Connection System, we recommend reading <a href="https://www.sparkfun.com/qwiic">here for an overview</a>.</p>
<div style="text-align: center">
  <table style="border-style:none">
    <tr>
     <td style="text-align: center; vertical-align: middle;">
     <div style="text-align: center"><a href="https://www.sparkfun.com/qwiic"><img src="../assets/Qwiic-registered-updated.png" alt="Qwiic Connection System" title="Click to learn more about the Qwiic Connection System!"></a>
     </div>
    </td>
    </tr>
    <tr>
      <td style="text-align: center; vertical-align: middle;"><div style="text-align: center"><i><a href="https://www.sparkfun.com/qwiic">Qwiic Connection System</a></i></div></td>
    </tr>
  </table>
</div>

<p>If you aren’t familiar with the following concepts, we also recommend checking out a few of these tutorials before continuing.</p>
<div class="grid cards col-4">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/5/Soldering_Action-01.jpg"style="width:264px; height:148px; object-fit:contain;" alt="How to Solder: Through-Hole Soldering">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering">
  <b>How to Solder: Through-Hole Soldering</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/installing-arduino-ide">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/6/1/arduinoThumb.jpg" style="width:264px; height:148px; object-fit:contain;" alt="Installing Arduino IDE">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/installing-arduino-ide">
  <b>Installing Arduino IDE</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/arduino-shields-v2">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/1/1/6/7/qwiic_shield.jpg"style="width:264px; height:148px; object-fit:contain;" alt="Arduino Shields V2">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/arduino-shields-v2">
  <b>Arduino Shields V2</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/i2c">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/8/2/I2C-Block-Diagram.jpg" style="width:264px; height:148px; object-fit:contain;" alt="I2C">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/i2c">
  <b>I2C</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/installing-board-definitions-in-the-arduino-ide">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/1/2/6/5/sparkfun_boards.PNG" style="width:264px; height:148px; object-fit:contain;" alt="Installing Board Definitions in the Arduino IDE">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/installing-board-definitions-in-the-arduino-ide">
  <b>Installing Board Definitions in the Arduino IDE</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/serial-communication">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/7/d/f/9/9/50d24be7ce395f1f6c000000.jpg" style="width:264px; height:148px; object-fit:contain;" alt="Serial Communication">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/serial-communication">
  <b>Serial Communication</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/1/6/spiThumb_Updated2.png" style="width:264px; height:148px; object-fit:contain;" alt="Serial Peripheral Interface (SPI)">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi">
  <b>Serial Peripheral Interface (SPI)</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/pulse-width-modulation">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/f/9/c/8/a/512e869bce395fbc64000002.JPG" style="width:264px; height:148px; object-fit:contain;" alt="Pulse Width Modulation">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/pulse-width-modulation">
  <b>Pulse Width Modulation</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/logic-levels">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/6/2/Input_Output_Logic_Level_Tolerances_tutorial_tile.png" style="width:264px; height:148px; object-fit:contain;" alt="Logic Levels">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/logic-levels">
  <b>Logic Levels</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/analog-vs-digital">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/3/7/6/6/0/51c48875ce395f745a000000.png" style="width:264px; height:148px; object-fit:contain;" alt="Analog vs. Digital">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/analog-vs-digital">
  <b>Analog vs. Digital</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/ws2812-breakout-hookup-guide/">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/1/0/5/WS2812B_-_13282-03.jpg" style="width:264px; height:148px; object-fit:contain;" alt="WS2812 Breakout Hookup Guide">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/ws2812-breakout-hookup-guide/">
  <b>WS2812 Breakout Hookup Guide</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/3/0/4/5/Remove_2-pin_JST-PH_Connector_LiPo_Battery_Needle_Nose_Pliers_Wiggling-3.jpg" style="width:264px; height:148px; object-fit:contain;" alt="Single Cell LiPo Battery Care">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">
  <b>Single Cell LiPo Battery Care</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/lipo-fuel-gauge-max1704x-hookup-guide">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/2/9/4/6/20680-_TOL_SparkFun_LiPo_Fuel_Gauge-_01.jpg" style="width:264px; height:148px; object-fit:contain;" alt="LiPo Fuel Gauge (MAX1704X) Hookup Guide">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/lipo-fuel-gauge-max1704x-hookup-guide">
  <b>LiPo Fuel Gauge (MAX1704X) Hookup Guide</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div>
<h1 id="hardware-overview">Hardware Overview<a class="headerlink" href="#hardware-overview" title="Permanent link"></a></h1>
<p>In this section, we will highlight the hardware and pins that are broken out on the SparkFun Thing Plus NORA-W306. For more information, check out our <a href="../resources/">Resources and Going Further</a> for the u-blox NORA-W306 module or Realtek RTL8720DF that is contained within the module.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_SparkFun_Thing_Plus_NORA-W306_Top.jpg"><img src="../assets/img/WRL-21637_SparkFun_Thing_Plus_NORA-W306_Top.jpg" width="600px" height="600px" alt="Top View"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_SparkFun_Thing_Plus_NORA-W306_Bottom.jpg"><img src="../assets/img/WRL-21637_SparkFun_Thing_Plus_NORA-W306_Bottom.jpg" width="600px" height="600px" alt="Bottom View"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Top View</i></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Bottom View</i></td>
    </tr>
  </table>
</div>

<h3 id="power">Power<a class="headerlink" href="#power" title="Permanent link"></a></h3>
<p>There are a variety of power and power-related nets broken out to connectors and through hole pads. Power is regulated down to 3.3V for the NORA-W306 so the <a href="https://learn.sparkfun.com/tutorials/logic-levels/all">logic level</a> is 3.3V. There are Schottky diode and transistors to safely select voltage from the USB or LiPo battery. This avoids any conflicting voltages between the two sources.</p>
<ul>
<li><strong>VU</strong> or <strong>VUSB</strong> &mdash; The <em>V_BUS</em> net is connected to the USB Type C connector and the VU/VUSB PTH. You can use 5V from a USB port by connecting to the USB Type C connector or connecting power to the VBUS PTH. Make sure that power you provide to this pin does not exceed 6 volts. Power is regulated down with the XC6222 3.3V/700mA voltage regulator. The USB Type C connector is also used to upload code to your processor, send serial data to a terminal window, or charging the LiPo battery. Of course for portable power, you could connect a USB battery as an alternative to using a LiPo battery.</li>
<li><strong>VB</strong> &mdash;  The <em>V_BATT</em> net is connected to the 2-pin JST style connector, VB PTH, and the NORA-W306's MEAS pin. For portable applications, you can connect a nominal 3.7V single cell, LiPo battery to the 2-pin JST style connector. This pin is also connected to the MCP73831 charge IC to safely charge the LiPo battery to its maximum voltage of about 4.2V. We recommend connecting only LiPo batteries to the VBAT net to power the board. Of course, you can power a separate device through the VBAT PTH pin. Power is regulated down with the XC6222 3.3V/700mA voltage regulator.</li>
<li><strong>3V</strong> or <strong>3V3</strong> &mdash; The 3.3V net is labeled as 3V or 3V3. You can apply power to the board if you have a regulated voltage of 3.3V. Otherwise, you could power a separate device through the 3V3 PTH pin. This is also connected to the Qwiic connector's 3.3V pin to power Qwiic enabled devices.</li>
<li><strong>EN</strong> &mdash; The 3.3V voltage regulator's EN pin is labeled as EN. Pulling this pin low will disable the 3.3V voltage regulator.</li>
<li><strong>G</strong> or <strong>GND</strong> &mdash; Of course, is the common, ground voltage (0V reference) for the system.</li>
</ul>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Power_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Power_Top.jpg" width="600px" height="600px" alt="Top View"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Power_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Power_Bottom.jpg" width="600px" height="600px" alt="Bottom View"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Power, Ground, and Connectors Highlighted<br />(Top & Bottom View)</i></td>
    </tr>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will notice the pads of the SWD pins are also highlighted! 3.3V and ground are also connected to these pads. Users can easily access these pins using a SWD header and cable. Of course, you could also solder wire to those pads if you needed another way to connect to the traces.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To complement the module's low-power options, we've optimized components and added the ability to depower all subsystems to conserve as much power as possible for remote battery-powered applications. Without a battery attached or charging, and cutting the power to WS2812 (i.e. jumper JP3); the current draw was as low as 14&micro;A in low power mode! Amazing! Under normal conditions, we measured the current draw as low as 30mA.</p>
<p>Let's compare the Thing Plus ESP32 (USB-C) against the Thing Plus NORA-W306. The power LED jumper was cut on the Thing Plus ESP32. A microSD card was inserted in the microSD card socket (which does not have a way to turn off power through a GPIO) and the board was powered via a single cell LiPo battery. The current draw was 884&micro;A in deep sleep mode while it was 40mA when awake.</p>
<p>For the Thing Plus NORA-W306, we cut the power LED and WS28112 LED jumpers. The SDPC (microSD Power Control) jumper was modified so power to the microSD card can be controlled through GPIO 17. A microSD card was inserted in the microSD card socket. With the MEAS jumper cut, a multimeter (set to measure current) was connected to monitor the current draw. Power was also provided via a single cell LiPo battery. The current draw was 115&micro;A in deep sleep mode while it was 21mA when awake.</p>
<p>For more information, check out the demo video below with current draw for the board in low power mode!</p>
<p><div style="text-align: center;">
<iframe width="560" height="315" src="https://www.youtube.com/embed/ElCYbEnyYH4?si=EVBnWnvqqZ6KBMxX" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div></p>
<!--
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">Component</td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">Power Usage Current [ &micro;A ]</td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">CP2102</td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">199</td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">microSD</td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">179</td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">3.3V VREG<br />(Powered with 4V at VBATT)</td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">93</td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">NORA-W306<br />(Powered with 3.3V at 3V3 net)</td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;">10 to 11</td>
    </tr>
  </table>
</div>
-->
</div>
<h3 id="lipo-charge-circuit">LiPo Charge Circuit<a class="headerlink" href="#lipo-charge-circuit" title="Permanent link"></a></h3>
<p>The board includes the MCP73831 LiPo charger IC (the little black IC with 5 pins highlighted) to safely charge a single cell, LiPo battery. In this case, the charge rate is set to a default rate of <strong>500mA</strong>. Cutting the trace on the back while adding a solder jumper between the middle pad and the pad labeled as <em>100mA</em> will set the charge rate to 100mA. The on-board LED (not highlighted) labeled as CHG can be used to get an indication of the <strong>charge status</strong> of your battery.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Charger_JST_Connector.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Charger_JST_Connector.jpg" width="600px" height="600px" alt="Charge Circuit (Top View)"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>2-pin JST Style Connector, LiPo Charger IC, and VBATT PTH Highlighted<br />(Top View)</i></td>
    </tr>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on proper handling of LiPo batteries, check out the tutorial on <a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">Single Cell LiPo Battery Care</a>.</p>
<div class="grid cards" style="width:500px; margin: 0 auto;" markdown>
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/3/0/4/5/Remove_2-pin_JST-PH_Connector_LiPo_Battery_Needle_Nose_Pliers_Wiggling-3.jpg" style="width:264px; height:148px; object-fit:contain;" alt="Single Cell LiPo Battery Care">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">
  <b>Single Cell LiPo Battery Care</b>
</a></p>
</li>
</ul>
<p><!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div></p>
</div>
<h3 id="gpio">GPIO<a class="headerlink" href="#gpio" title="Permanent link"></a></h3>
<p>The SparkFun Thing Plus - NORA-W306 breaks out the GPIO pins to plated through hole pads on the edge of the board using the Thing Plus/Feather Form Factor. Each of the pins on the edge of the board are tired to various components on the board. Check below for more information on each connection!</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Top.jpg" width="600px" height="600px" alt="GPIO Pins Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Bottom.jpg" width="600px" height="600px" alt="GPIO Pins Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>GPIO Pins Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<p>Note that the pin label might have additional functionality that may not be apparent from the silkscreen. Below is a graphical datasheet of the SparkFun Thing Plus - NORA-W306 that highlights the additional functionality.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/SparkFun_Thing_Plus_NORA-W306_u-blox.pdf"><img src="../assets/img/GraphicalDatasheet_SparkFun_ThingPlus_NORA-W306-v10.jpg" width="1000px" height="667px" alt="Graphical Datasheet"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Graphical Datasheet</i></td>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the u-blox integration manual may have pins highlighted to show additional functionality, there are some that are not supported in the Realtek's Arduino core. Some of these features that are not supported in the Arduino core include SDIO, I2S, IR, and RTC.</p>
</div>
<h3 id="swd">SWD<a class="headerlink" href="#swd" title="Permanent link"></a></h3>
<p>For advanced users, the SWD pins are broken out on the 2x5 header on the back of the board. Note that this is not populated so you will need to solder a <a href="https://www.sparkfun.com/categories/tags/jtag">compatible header, 2x5 SWD cable, and compatible JTAG programmer</a> to connect. These pins are also connected to the edge of the board.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SWD-Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SWD-Bottom.jpg" width="600px" height="600px" alt="SWD Pins Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>SWD Pins Highlighted</i></td>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pin <code>10</code> is tied to the SWD Data pad and <code>A0</code> is tied to SWD CLK pad on the back of the board.</p>
</div>
<h3 id="reset-and-boot-buttons">Reset and Boot Buttons<a class="headerlink" href="#reset-and-boot-buttons" title="Permanent link"></a></h3>
<p>Each board includes a RESET and BOOT button. There is an additional reset PTH next to the reset button. Hit the reset button to restart the NORA-W306. To manually place the NORA-W306 into boot mode, hold down the BOOT button while pressing the RESET button momentarily and then release the BOOT button.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Reset_Boot_Button.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Reset_Boot_Button.jpg" width="600px" height="600px" alt="Top View"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Reset_Boot_Pins.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Reset_Boot_Pins.jpg" width="600px" height="600px" alt="Bottom View"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Reset and Boot Pins and Buttons Highlighted<br />(Top & Bottom View)</i></td>
    </tr>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BOOT button is also connected to pin 0 (TX). The datasheet refers to this pin as the CHIP_EN.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will notice a pad of the SWD is also highlighted. The reset pin is connected to this pad. Users can easily access these pins using a SWD header and cable. Of course, you could also solder wire to those pads if you needed another way to connect to the traces.</p>
</div>
<h3 id="user-button">User Button<a class="headerlink" href="#user-button" title="Permanent link"></a></h3>
<p>The board also includes a user button that is connected pin <code>2</code>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_User_Button.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_User_Button.jpg" width="600px" height="600px" alt="Top View"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_User_Button_PTH_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_User_Button_PTH_Bottom.jpg" width="600px" height="600px" alt="Bottom View"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Reset & Boot Pins and Buttons Highlighted<br />(Top & Bottom View)</i></td>
    </tr>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When defining the pin for the user button, make sure to use an <a href="https://docs.arduino.cc/tutorials/generic/digital-input-pullup">internal pull-up resistor</a> so that the button is not floating.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Need a bigger button? Users can connect pin 2 on the edge of the board to an external button!</p>
</div>
<h3 id="interrupts">Interrupts<a class="headerlink" href="#interrupts" title="Permanent link"></a></h3>
<p>Speaking of buttons, all GPIOs can also be set as <a href="https://learn.sparkfun.com/tutorials/processor-interrupts-with-arduino/all">interrupts</a>!</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Top.jpg" width="600px" height="600px" alt="GPIO Pins Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_GPIO_Edge_PTHs_Bottom.jpg" width="600px" height="600px" alt="GPIO Pins Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Interrupt Pins Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="uart">UART<a class="headerlink" href="#uart" title="Permanent link"></a></h3>
<p>There are two <a href="https://learn.sparkfun.com/tutorials/serial-communication">UARTs</a>. The primary hardware UART (UART0) is connected to the USB-to-serial converter. The secondary hardware UART (UART1) is broken out to the edge of the board. We recommend connecting a UART device to the secondary hardware UART to avoid any bus contention with the CP2102N.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_UARTs_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_UARTs_Top.jpg" width="600px" height="600px" alt="UARTs Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-
    WRL-21637_Thing_Plus_NORA-W306_UARTs_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_UARTs_Bottom.jpg" width="600px" height="600px" alt="UARTs Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>UARTs Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h4 id="cp2102n-usb-to-serial-converter">CP2102N USB-to-Serial Converter<a class="headerlink" href="#cp2102n-usb-to-serial-converter" title="Permanent link"></a></h4>
<p>The board includes the CP2102N USB-to-Serial converter. This is used for serial programming or communicating with a serial terminal. The CP2102N is connected to the NORA-W306&apos;s primary hardware UART (UART0): TX pin is connected to pin <code>0</code> (RX0) while and RX pin is connected to pin <code>1</code> (TX0).</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_CP2102N_USB-to-Serial_Converter.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_CP2102N_USB-to-Serial_Converter.jpg" width="600px" height="600px" alt="USB-to-Serial Converter, USB, and UART0 Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_UART0_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_UART0_Bottom.jpg" width="600px" height="600px" alt="UART0 Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>USB-to-Serial Converter, USB, and UART0 Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="qwiic-and-i2c">Qwiic and I<sup>2</sup>C<a class="headerlink" href="#qwiic-and-i2c" title="Permanent link"></a></h3>
<p>The board includes one horizontal Qwiic connector on the board. These pins are connected to the primary <a href="https://learn.sparkfun.com/tutorials/i2c/all">I<sup>2</sup>C</a> bus and power (e.g. 3.3V and GND) allowing you to easily add a Qwiic-enabled device to your application. The I<sup>2</sup>C data and clock lines are also tied to 2.2k&ohm; pull-up resistors. The I<sup>2</sup>C SCL pin is connected to <code>12</code>. The I<sup>2</sup>C SDA is connected to <code>11</code>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_I2C_Qwiic_Connector_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_I2C_Qwiic_Connector_Top.jpg" width="600px" height="600px" alt="I2C Pins and Qwiic Connector Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_I2C_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_I2C_Bottom.jpg" width="600px" height="600px" alt="I2C Pins Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>I<sup>2</sup>C and Qwiic Connector Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h4 id="lipo-fuel-gauge-max17048">LiPo Fuel Gauge - MAX17048<a class="headerlink" href="#lipo-fuel-gauge-max17048" title="Permanent link"></a></h4>
<p>Built into the board is also the single cell LiPo Fuel Gauge, specifically the <a href="https://learn.sparkfun.com/tutorials/lipo-fuel-gauge-max1704x-hookup-guide/all">MAX17408</a>. The 7-bit, unshifted address of the MAX17048 is <strong>0x36</strong>. The address becomes <em>0x6C</em> for write and <em>0x6D</em> for read.  </p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_MAX17048_LiPo_Fuel_Gauge.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_MAX17048_LiPo_Fuel_Gauge.jpg" width="600px" height="600px" alt="LiPo Fuel Gauge - MAX17048 Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>LiPo Fuel Gauge - MAX17048 Highlighted<br />(Top View)</i></td>
  </table>
</div>

<h3 id="spi">SPI<a class="headerlink" href="#spi" title="Permanent link"></a></h3>
<p>There are two <a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi/all">SPI</a> ports available. The primary SPI pins (SPI0) is broken out as:  <code>5</code> (SPI0_SCK), <code>6</code> (SPI0_PICO), <code>7</code> (SPI0_POCI), and <code>4</code> (SPI0_CS). These are also connected to the microSD card that is populated on the back. The secondary SPI pins (SPI1) is broken out as: <code>16</code> (SPI1_SCK), <code>14</code> (SPI1_PICO), <code>13</code> (SPI1_POCI), and <code>15</code> (SPI1_CS)</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SPI_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SPI_Top.jpg" width="600px" height="600px" alt="SPI Pins Highlighted - Top"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SPI_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SPI_Bottom.jpg" width="600px" height="600px" alt="SPI Pins Highlighted - Bottom"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>SPI Pins Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pin <code>14</code> is also connected to the addressable LED. The Realtek Arduino Core needed to use this specific SPI pin to control WS2812. Users can disable the addressable LED by cutting JP1 on the back of the board.</p>
</div>
<h4 id="microsd-card-socket">MicroSD Card Socket<a class="headerlink" href="#microsd-card-socket" title="Permanent link"></a></h4>
<p>Built into the board is a microSD card socket to log data. As explained in the SPI section, the data lines are connected to the primary SPI pins (SPI0). One special feature that is different from other Thing Plus boards is the transistor to toggle power to the microSD card socket. By default, it is always on. For users that want to conserve power, you can cut the jumper for the <strong>SDPC</strong>. You will then need to add a solder blob between the center pad and the pad that is labeled <strong>17</strong>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SPI0_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SPI0_Top.jpg" width="600px" height="600px" alt="SPI Pins Highlighted on the top"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_micro_SD_Card.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_micro_SD_Card.jpg" width="600px" height="600px" alt="SPI Pins Highlighted on the Bottom"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Micro SD Card, Transistor, and Power Enable Pin Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="pulse-width-modulation-pwm">Pulse Width Modulation (PWM)<a class="headerlink" href="#pulse-width-modulation-pwm" title="Permanent link"></a></h3>
<p>There are 12x <a href="https://learn.sparkfun.com/tutorials/pulse-width-modulation/all">PWM</a> pins available: <code>2</code>, <code>3</code>, <code>4</code>, <code>5</code>, <code>6</code>, <code>7</code>, <code>11</code>, <code>12</code>, <code>13</code>, <code>14</code>, <code>17</code>, and <code>18</code>. Note that these are tied to other peripherals as well.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-WRL-21637_Thing_Plus_NORA-W306_PWM_Pins_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_PWM_Pins_Top.jpg" width="600px" height="600px" alt="PWM Pins Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_PWM_Pins_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_PWM_Pins_Bottom.jpg" width="600px" height="600px" alt="PWM Pins Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>PWM Pins Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="analog">Analog<a class="headerlink" href="#analog" title="Permanent link"></a></h3>
<p>There are 3x 12-bit <a href="https://learn.sparkfun.com/tutorials/analog-to-digital-conversion/all#what-is-the-adc">analog</a> pins available: <code>A0</code>, <code>A1</code>, and <code>A2</code>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-WRL-21637_Thing_Plus_NORA-W306_ADC_Pins_Analog_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_ADC_Pins_Analog_Top.jpg" width="600px" height="600px" alt="ADC Pins Highlighted"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-
     WRL-21637_Thing_Plus_NORA-W306_ADC_Pins_Analog_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_ADC_Pins_Analog_Bottom.jpg" width="600px" height="600px" alt="ADC Pins Highlighted"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>ADC Pins Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="leds">LEDs<a class="headerlink" href="#leds" title="Permanent link"></a></h3>
<p>There are 4x LEDs populated on the board.</p>
<ul>
<li><strong>PWR</strong> &mdash; The <strong>PWR</strong> LED lights up to indicate when there is a 3.3V available after power is regulated down from the USB connector or LiPo battery. This can be disabled by cutting the jumper labeled as <strong>PWR</strong>.</li>
<li><strong>CHG</strong> &mdash; The on-board yellow <strong>CHG</strong> LED can be used to get an indication of the <strong>charge status</strong> of your battery. Below is a table of other status indicators depending on the state of the charge IC. This can be disabled by cutting the jumper labeled as <strong>CHG</strong>.</li>
<li><strong>RGB IO14</strong> &mdash; The <strong>RGB IO14</strong> LED is an WS2812-2020 LED. Users can control this addressable RGB LED using pin <code>14</code>. This LED can be disconnected from the pin by cutting the jumper labeled as <strong>JP1</strong>. For users that are not using this LED and want to conserve power, the 3.3V net can also be disconnected as well by cutting the jumper labeled as <strong>JP3</strong>. For users that are interested in daisy chaining additional WS2812 LEDs, users can connect to the PTH labled as <strong>LD</strong> or <strong>LED D0</strong>.</li>
<li><strong>IO18</strong> &mdash; The LED labeled as <strong>IO18</strong> can be configured by the user and is connected to pin <code>18</code>. This can be disconnect from the pin by cutting the jumper labeled <strong>JP2</strong>.</li>
</ul>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
      <td style="text-align: center; vertical-align: middle;"><b>Charge State</b></td>
      <td style="text-align: center; vertical-align: middle;"><b>LED status</b></td>
    </tr>
    <tr align="center">
      <td style="text-align: center; vertical-align: middle;">No Battery</td>
      <td style="text-align: center; vertical-align: middle;">Floating (should be OFF, but may flicker)</td>
    </tr>
    <tr align="center">
      <td style="text-align: center; vertical-align: middle;">Shutdown</td>
      <td style="text-align: center; vertical-align: middle;">Floating (should be OFF, but may flicker)</td>
    </tr>
    <tr align="center">
      <td style="text-align: center; vertical-align: middle;">Charging</td>
      <td style="text-align: center; vertical-align: middle;">ON</td>
    </tr>
    <tr align="center">
      <td style="text-align: center; vertical-align: middle;">Charge Complete</td>
      <td style="text-align: center; vertical-align: middle;">OFF</td>
    </tr>
  </table>
</div>

<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LEDs_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LEDs_Top.jpg" width="600px" height="600px" alt="LEDs and PTHs Highlighted - Top"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LED_PTH_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LED_PTH_Bottom.jpg" width="600px" height="600px" alt="PTHs connected to LEDs Highlighted - Bottom"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>LEDs and Connected PTHs Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="jumpers">Jumpers<a class="headerlink" href="#jumpers" title="Permanent link"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this is your first time working with jumpers, check out the <a href="https://learn.sparkfun.com/tutorials/how-to-work-with-jumper-pads-and-pcb-traces/all">How to Work with Jumper Pads and PCB Traces</a> tutorial for more information.</p>
</div>
<p>There are a few jumper pads available on the bottom of the board.</p>
<ul>
<li><strong>SHLD</strong> &mdash; This jumper connects the USB Type C connector's shield pin to GND. Cut this to isolate the USB Type C connector's shield pin. This is for advanced users that want to ground their board to their enclosure instead of the ground plane.</li>
<li><strong>MEAS</strong> &mdash; To enable measurements and determine how long your battery might last, we've added a NC (normally closed) jumper between the two MEAS PTH pins. By cutting this jumper, the voltage connecting to the 3.3V voltage regulator input is interrupted. Soldering in a male jumper or wires into the accompanying holes will give you the ability to insert a current meter and precisely monitor how much current your application is consuming.</li>
<li><strong>PWR</strong> &mdash; By default, this jumper is closed. Cut this trace to disable the power LED that is connected to 3.3V.</li>
<li><strong>CHG</strong> &mdash; By default, this jumper is closed. Cut this trace to disable the charge LED that is connected to the LiPo charge IC.</li>
<li><strong>LED_D0</strong> &mdash; By default, this jumper is closed. Cut this trace to disable the WS2812 addressable RGB LED's output pin labeled as <code>D0</code>.</li>
<li><strong>JP1</strong> &mdash; By default, this jumper is closed. Cut this trace to disable the WS2812 addressable RGB LED's input pin that is connected to pin <code>14</code>.</li>
<li><strong>JP2</strong> &mdash; By default, this jumper is closed. Cut this trace to disable the user LED that is connected to pin <code>18</code>.</li>
<li><strong>JP3</strong> &mdash; By default, this jumper is closed. Cut this trace to disable power connected to the WS2812 addressable LED's 3.3V pin.</li>
<li><strong>CUR</strong> &mdash; This three way jumper sets the charge IC's charge rate. By default, it's connected to the pad labeled <strong>500</strong> so the charge rate is set to 500mA. Cutting a trace and adding a solder jumper between the center pad and the pad labeled as <strong>100</strong> will set the charge rate to 100mA.</li>
<li><strong>I2C</strong> &mdash; By default, this three-pad jumper is closed and located on the bottom of the board. The three way jumper labeled I2C connect the two 2.2k&ohm; pull-up resistors to the I<sup>2</sup>C data and clock lines. If multiple devices are connected to the bus with the pull-up resistors enabled, the parallel equivalent resistance will create too strong of a pull-up for the bus to operate correctly. As a general rule of thumb, <a href="https://learn.sparkfun.com/tutorials/i2c/all#i2c-at-the-hardware-level">disable all but one pair of pull-up resistors</a> if multiple devices are connected to the bus.</li>
<li><strong>SDPC</strong> &mdash; By default, this jumper is closed and for the microSD card's power control circuit. Cut this trace on the <strong>GND/ON</strong> side to disable power to the microSD card's socket. For users that want to control the transistor via a GPIO, add a solder blob between the center pad and the pad that is labeled <strong>17</strong>. Make sure to also define the pin in code to toggle power to the microSD card.</li>
</ul>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_MEAS_PTH_Top.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_MEAS_PTH_Top.jpg" width="600px" height="600px" alt="MEAS PTH Highlighted - Top"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Jumpers_Bottom.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Jumpers_Bottom.jpg" width="600px" height="600px" alt="Jumpers Highlighted - Bottom"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Jumpers Highlighted<br />(Top & Bottom View)</i></td>
  </table>
</div>

<h3 id="board-dimensions">Board Dimensions<a class="headerlink" href="#board-dimensions" title="Permanent link"></a></h3>
<p>The board is 0.9" x 2.3" (22.86mm x 58.42mm) and uses the <a href="https://www.sparkfun.com/thing_plus">standard Thing+</a> footprint. There are 4x mounting holes by each corner of the board. You can use 4-40 standoffs to mount the board to a panel or enclosure.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/SparkFun_Thing_Plus_NORA-W306_Board_Dimensions.png"><img src="../assets/img/SparkFun_Thing_Plus_NORA-W306_Board_Dimensions.png" width="600px" height="600px" alt="Board Dimensions"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Board Dimensions</i></td>
    </tr>
  </table>
</div>

<h1 id="hardware-hookup">Hardware Hookup<a class="headerlink" href="#hardware-hookup" title="Permanent link"></a></h1>
<p>At a minimum, you will need to plug in the USB C cable to the SparkFun Thing Plus NORA-W306 to power and program the board.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<h3 id="single-cell-lipo-battery">Single Cell LiPo Battery<a class="headerlink" href="#single-cell-lipo-battery" title="Permanent link"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Battery Polarity</p>
<p>Please make sure that you use one of our recommended Lithium Ion batteries. Some batteries use the same JST connector as ours but have the opposite polarity. Connecting one of these to your SparkFun Thing Plus NORA-W306 will destroy it. If you are going to use your own battery, it is up to you to ensure it has the correct polarity.</p>
</div>
<p>For remote applications, you can connect a standard single cell LiPo battery. The SparkFun Thing Plus NORA-W306 has a built-in charger too which will charge your battery at <strong>500mA</strong> when a USB-C is connected. Please make sure your battery capacity is at least 500mAh (0.5Ah); bad things will happen if you try to charge smaller batteries using the board's default charge rate of 500mA. Of course, you can adjust the charge rate with the 3-way jumper on the back of the board. The yellow CHG charging LED will light up while the battery is charging and will turn off once charging is complete.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Battery.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Battery.jpg" width="600px" height="600px" alt="Battery Connected"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Battery Connected</i></td>
    </tr>
  </table>
</div>

<p>The MCP73831 charge IC on the board is used on a few SparkFun products. For more information about the CHG status LED, we recommend taking look at the Hardware Overview. We also recommend taking a look at this tutorial for <a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">Single Cell LiPo Battery Care</a>.</p>
<div class="grid cards" style="width:500px; margin: 0 auto;">
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/3/0/4/5/Remove_2-pin_JST-PH_Connector_LiPo_Battery_Needle_Nose_Pliers_Wiggling-3.jpg" style="width:264px; height:148px; object-fit:contain;" alt="Single Cell LiPo Battery Care">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/single-cell-lipo-battery-care">
  <b>Single Cell LiPo Battery Care</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div>
<h3 id="inserting-a-microsd-card">Inserting a MicroSD Card<a class="headerlink" href="#inserting-a-microsd-card" title="Permanent link"></a></h3>
<p>For those that need to store data, you can add a microSD card to your application. You will just need to insert a microSD card with the metal contacts facing the board and into the socket on the back. Compared to other microSD cards sockets in sparkFun's storefront, this will not have a click to lock the memory card in place. Just make sure to fully insert the memory card.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_microSD_Card.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_microSD_Card.jpg" width="600px" height="600px" alt="MicroSD Card in Socket"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>MicroSD Card in Socket</i></td>
    </tr>
  </table>
</div>

<p>You should only insert or remove the SD card while the power is turned off or disconnected. Removing the card while the SparkFun Thing Plus NORA-W306 is powered will almost certainly corrupt your data.</p>
<h3 id="connecting-via-qwiic">Connecting via Qwiic<a class="headerlink" href="#connecting-via-qwiic" title="Permanent link"></a></h3>
<p>For users that want to connect a Qwiic-enabled device, you will simply need to insert a cable between the Qwiic connectors. Then insert a USB cable between the microcontroller and your computer to power and program.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Qwiic_Enabled_Device_OLED.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Qwiic_Enabled_Device_OLED.jpg" width="600px" height="600px" alt="Qwiic-enabled Device Connected to Thing Plus NORA-w306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Qwiic-enabled Device Connected to Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<h3 id="connecting-via-pth">Connecting via PTH<a class="headerlink" href="#connecting-via-pth" title="Permanent link"></a></h3>
<p>For temporary connections to the PTHs, you could use IC hooks to test out the pins. However, you'll need to solder headers or wires of your choice to the board for a secure connection. You can choose between a combination of <a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering/all">header pins and jumper wires</a>, or <a href="https://learn.sparkfun.com/tutorials/working-with-wire/all">stripping wire and soldering the wire</a> directly to the board.</p>
<div class="grid cards col-2">
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering/all">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/learn_tutorials/5/Soldering_Action-01.jpg"style="width:264px; height:148px; object-fit:contain;" alt="How to Solder: Through Hole Soldering">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/how-to-solder-through-hole-soldering/all">
  <b>How to Solder: Through Hole Soldering</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
<ul>
<li>
<p><a href="https://learn.sparkfun.com/tutorials/working-with-wire/all">
      <figure markdown>
        <img src="https://cdn.sparkfun.com/assets/0/5/0/0/f/5138de3cce395fbb1b000002.JPG" style="width:264px; height:148px; object-fit:contain;" alt="Working with Wire">
      </figure>
    </a></p>
<hr />
<p><a href="https://learn.sparkfun.com/tutorials/working-with-wire/all">
  <b>Working with Wire</b>
</a></p>
</li>
</ul>
<!-- ----------WHITE SPACE BETWEEN GRID CARDS---------- -->
</div>
<h1 id="installing-the-cp2102-usb-driver">Installing the CP2102 USB Driver<a class="headerlink" href="#installing-the-cp2102-usb-driver" title="Permanent link"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure to manually install the driver for the CP2102N with the following instructions. The driver that Windows auto-installs will not work with the auto-reset circuit on the board and can cause serial uploads to fail.</p>
</div>
<p>You will also need to install the SiLabs CP210X Driver, which can be found here: <a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">USB to UART Bridge VCP Driver</a>.</p>
<div style="text-align: center">
    <a href="https://cdn.sparkfun.com/assets/learn_tutorials/8/5/2/CP210x_Universal_Windows_Driver.zip" class="md-button">Windows VCP Driver (ZIP)</a>
    <br />
    <br />
    <a href="https://www.silabs.com/documents/public/software/Mac_OSX_VCP_Driver.zip" class="md-button md-button--primary">Mac OSX VCP Driver (ZIP)</a>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If applicable, make sure you are using the proper driver files for your CPU architecture. This is usually indicated by a folder or file name with "x86" for 32-bit processors or "x64" for 64-bit processors.</p>
</div>
<h1 id="setting-up-arduino">Setting Up Arduino<a class="headerlink" href="#setting-up-arduino" title="Permanent link"></a></h1>
<div class="admonition arduino">
<p class="admonition-title">Arduino</p>
<p>This example assumes you are using the latest version of the Arduino IDE on your desktop. If this is your first time using Arduino IDE, library, or board add-on, please review the following tutorials.</p>
<ul>
<li><a href="https://learn.sparkfun.com/tutorials/installing-arduino-ide">Installing the Arduino IDE</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/installing-an-arduino-library">Installing an Arduino Library</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/installing-board-definitions-in-the-arduino-ide">Installing Board Definitions in the Arduino IDE</a></li>
</ul>
</div>
<h3 id="install-the-realtek-board-add-on">Install the Realtek Board Add-on<a class="headerlink" href="#install-the-realtek-board-add-on" title="Permanent link"></a></h3>
<p>First, open your Arduino preferences (<strong>File</strong> &gt; <strong>Preferences</strong>). Then find the <strong>Additional Boards Manager URLs</strong> text box, and paste the below link in. If you have other links for other 3rd party boards, you will need to add a comma (<code>,</code>) between each link in the field. You can also open an additional window by clicking the window button next to the <em>Additional Boards Manager URLs:</em> field and add the link to a separate line.</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>https://github.com/ambiot/ambd_arduino/raw/dev/Arduino_package/package_realtek_amebad_early_index.json
</span></code></pre></div>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/Realtek_AmebaD_SparkFun_u-blox_NORA-W306_Arduino_Board_Support_Files-EARLY_RELEASE.JPG"><img src="../assets/img/Realtek_AmebaD_SparkFun_u-blox_NORA-W306_Arduino_Board_Support_Files-EARLY_RELEASE.JPG" width="600px" height="600px" alt="Realtek Arduino Board Support Files for the NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i><a href="https://github.com/ambiot/ambd_arduino">Realtek Arduino Board Support Files</a> for the NORA-W306</i></td>
   </tr>
  </table>
</div>

<p>Then hit "OK", and travel back to the Board Manager menu. Type "<strong>realtek</strong>" in the search bar and hit <kbd>enter</kbd>. Click on the "Install" button for the <strong>Realtek Ameba Boards (32-bit ARM Cortex-M33 @200MHz)</strong> by <strong>Realtek</strong>. Downloading and installing the tools may take a couple minutes. Feel free to walk around, grab some water, or do a little dance while the tools install.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Arduino_Board_Manager-EARLY_RELEASE.JPG"><img src="../assets/img/NORA-W306_Arduino_Board_Manager-EARLY_RELEASE.JPG" width="600px" height="600px" alt="Search for realtek in Arduino Boards Manager"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Search for realtek in Arduino Boards Manager</i></td>
   </tr>
  </table>
</div>

<p>Once installed, the version number and Arduino-blue "INSTALLED" text should appear next to the boards list entry.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_installed_Arduino_Board_Manager-EARLY_RELEASE.JPG"><img src="../assets/img/NORA-W306_installed_Arduino_Board_Manager-EARLY_RELEASE.JPG" width="600px" height="600px" alt="Installed Realtek Arduino Core"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Installed Realtek Arduino Core</i></td>
   </tr>
  </table>
</div>

<h3 id="selecting-the-sparkfun-thing-plus-nora-306">Selecting the SparkFun Thing Plus NORA-306<a class="headerlink" href="#selecting-the-sparkfun-thing-plus-nora-306" title="Permanent link"></a></h3>
<p>To upload code to the board, you will need to select the correct board. From the menu, select the following: <strong>Tools</strong> &gt; <strong>Board</strong> &gt; <strong>Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz)</strong> &gt; <strong>SparkFun Thing Plus NORA-306 (RTL8720DF)</strong> .</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Arduino_Board_Selection.JPG"><img src="../assets/img/NORA-W306_Arduino_Board_Selection.JPG" width="600px" height="600px" alt="Screenshot Board Selection"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Screenshot Board Selection</i></td>
   </tr>
  </table>
</div>

<p>There are a few options for the board. One of them is the option to automatically upload code to the board without the need to press the BOOT and RESET buttons as Arduino uploads your code. By default, the Auto Upload Mode is disabled. From the menu, select the following: <strong>Tools</strong> &gt; <strong>Auto Upload Mode:</strong> &gt; <strong>Enable</strong> .</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Arduino_Auto_Upload_Mode.JPG"><img src="../assets/img/NORA-W306_Arduino_Auto_Upload_Mode.JPG" width="600px" height="600px" alt="Screenshot of Auto Upload Mode"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Screenshot of Auto Upload Mode</i></td>
   </tr>
  </table>
</div>

<h3 id="com-port-selection">COM Port Selection<a class="headerlink" href="#com-port-selection" title="Permanent link"></a></h3>
<p>You will also need to select the COM port that the board enumerated to. From the menu, select your respective COM port on your computer (in this case, it was <strong>COM13</strong> on a Windows computer): <strong>Tools</strong> &gt; <strong>Port</strong> &gt; <strong>COM___</strong> .</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Arduino_COM_Port_Selection.JPG"><img src="../assets/img/NORA-W306_Arduino_COM_Port_Selection.JPG" width="600px" height="600px" alt="Screenshot COM Port Selection"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Screenshot COM Port Selection</i></td>
   </tr>
  </table>
</div>

<h1 id="installing-the-arduino-library">Installing the Arduino Library<a class="headerlink" href="#installing-the-arduino-library" title="Permanent link"></a></h1>
<p>To take advantage of a few of the built-in components on the board, you will need to install a Arduino Library. Of course, you may need additional Arduino Libraries depending on what you connect to the development board. At a minimum, you will need the following listed below to take advantage of the built-in LiPo Fuel Gauge (MAX17048).</p>
<h3 id="sparkfun-max1704x-fuel-gauge-arduino-library">SparkFun MAX1704x Fuel Gauge Arduino Library<a class="headerlink" href="#sparkfun-max1704x-fuel-gauge-arduino-library" title="Permanent link"></a></h3>
<p>SparkFun has written a library to work with the LiPo Fuel Gauge - MAX17048 that is built into the SparkFun Thing Plus NORA-W306. You can obtain this library through the Arduino Library Manager by searching for "<strong>SparkFun MAX1704x Fuel Gauge</strong>". Find the one written by SparkFun Electronics and install the latest version. Users who prefer to manually install the library can get it from the  <a href="https://github.com/sparkfun/SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library">GitHub Repository</a> or download the .ZIP by clicking the button below:</p>
<div style="text-align: center"><a href="https://github.com/sparkfun/SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library/archive/refs/heads/main.zip" class="md-button">SparkFun MAX1704x Fuel Gauge Arduino Library (ZIP)</a></div>

<h3 id="sdfat-arduino-library">SdFat Arduino Library<a class="headerlink" href="#sdfat-arduino-library" title="Permanent link"></a></h3>
<p>Bill Greiman has written a library for memory cards formatted to FAT16/FAT32 exFAT. We used this Arduino Library instead of the ones that were listed in the libraries included with the AmebaD. You can obtain this library through the Arduino Library Manager by searching for "<strong>sdfat</strong>". Find the one written by Bill Greiman and install the latest version. Users who prefer to manually install the library can get it from the <a href="https://github.com/greiman/SdFat">GitHub Repository</a> or download the .ZIP by clicking the button below:</p>
<div style="text-align: center"><a href="https://github.com/greiman/SdFat/archive/refs/heads/master.zip" class="md-button">Bill Greiman&apos;s SdFat Arduino Library (ZIP)</a></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the time of writing, <strong>SdFat</strong> by Bill Greiman <strong>v2.2.3</strong> worked with the SparkFun Thing Plus - NORA-W306.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We recommend using some of the built-in libraries for the u-blox NORA-W306 as well after installing the board add-ons: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray"><b>Examples for SparkFun Thing Plus NORA-W306 (RTL8720DF)</b></font> . Certain examples like the AmebaWS2812B were written specifically for the NORA-W306 architecture.</p>
<p><div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/AmebaD_RealTek_Additional_Arduino_Examples.JPG"><img src="../assets/img/AmebaD_RealTek_Additional_Arduino_Examples.JPG" width="600px" height="600px" alt="More Arduino Examples!"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>More Arduino Examples!</i></td>
   </tr>
  </table>
</div></p>
</div>
<h1 id="arduino">Arduino<a class="headerlink" href="#arduino" title="Permanent link"></a></h1>
<h1 id="example-1-blink">Example 1 - Blink<a class="headerlink" href="#example-1-blink" title="Permanent link"></a></h1>
<p>Now that we have our board add-on installed, we can get started playing around with the development board. For the scope of this tutorial, we will highlight a few of the features on the board. From there we will be able to build our own custom code to integrate the development board into a project.</p>
<p>In this example, we will blink the LED that is built into the SparkFun Thing Plus NORA-W306.</p>
<h3 id="hardware-hookup_1">Hardware Hookup<a class="headerlink" href="#hardware-hookup_1" title="Permanent link"></a></h3>
<p>The connection is the same as explained earlier in the tutorial. Connect the USB cable to the SparkFun Thing Plus NORA-W306. Of course, make sure to connect the other end to your computer.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<h3 id="arduino-code">Arduino Code<a class="headerlink" href="#arduino-code" title="Permanent link"></a></h3>
<p>Let's upload a sketch to the board. This example is the basic Arduino blink example. Note that we specify pin <code>18</code> instead of using the macro called <code>LED_BUILTIN</code>.</p>
<p>Copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Board</strong> &gt; <strong>Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz)</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>. Then select the correct COM port that the board enumerated to (in this case, it was <strong>COM13</strong>). Hit upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cm">/*</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="cm">  Blink</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="cm">  Turns on an LED on for one second, then off for one second, repeatedly.</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="cm">  This example code is in the public domain.</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="cm"> */</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1">// Pin 18 has an LED connected on most Arduino boards.</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1">// give it a name:</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="kt">int</span><span class="w"> </span><span class="n">led</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">18</span><span class="p">;</span><span class="w"> </span><span class="c1">//LED is connected to pin 18 on the SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="c1">//NOTE: You can also use LED_BUILTIN.</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="c1">// the setup routine runs once when you press reset:</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">  </span><span class="c1">// initialize the digital pin as an output.</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">  </span><span class="n">pinMode</span><span class="p">(</span><span class="n">led</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="p">}</span>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="c1">// the loop routine runs over and over again forever:</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">led</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span><span class="w">   </span><span class="c1">// turn the LED on (HIGH is the voltage level)</span>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span><span class="w">               </span><span class="c1">// wait for a second</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="w">  </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">led</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span><span class="w">    </span><span class="c1">// turn the LED off by making the voltage LOW</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span><span class="w">               </span><span class="c1">// wait for a second</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a><span class="p">}</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><b>Note:</b> You can also use the macro for the LED by using <code>LED_BUILTIN</code>. The code in the built-in Arduino examples will function the same as well!</p>
</div>
<p>Once uploaded, check the LED labeled as <strong>18</strong> on the board. It should be blinking on and off every second! Sweet!</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Blink_User_LED.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Blink_User_LED.jpg" width="600px" height="600px" alt="SparkFun Thing Plus NORA-W306 User LED On"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>SparkFun Thing Plus NORA-W306 User LED On</i></td>
   </tr>
  </table>
</div>

<h1 id="example-2-button">Example 2: Button<a class="headerlink" href="#example-2-button" title="Permanent link"></a></h1>
<p>--8&lt;-- "./docs/arduino_example_2_button.md</p>
<h1 id="example-3-scanning-wifi-networks">Example 3 - Scanning WiFi Networks<a class="headerlink" href="#example-3-scanning-wifi-networks" title="Permanent link"></a></h1>
<p>In this example, we will scan for WiFi networks in the area.</p>
<h3 id="hardware-hookup_2">Hardware Hookup<a class="headerlink" href="#hardware-hookup_2" title="Permanent link"></a></h3>
<p>The connection is the same as explained earlier in the tutorial. Connect the USB cable to the SparkFun Thing Plus NORA-W306. Of course, make sure to connect the other end to your computer. You will also need a wireless router capable of 2.4GHz and 5GHz.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<h3 id="arduino-code_1">Arduino Code<a class="headerlink" href="#arduino-code_1" title="Permanent link"></a></h3>
<p>Let's try to scan for some WiFi networks. You can find this example included after installing the board add-on. Head to <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray"><b>Examples for SparkFun Thing Plus NORA-W306 (RTL8720DF)</b></font> | <strong>WiFi</strong> &gt; <strong>ScanNetworks</strong> .</p>
<p>You can also copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Board</strong> &gt; <strong>Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz)</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was <strong>COM13</strong>). Hit upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="cm">/*</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="cm"> This example prints MAC address, and</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="cm"> scans for available Wifi networks.</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="cm"> Every ten seconds, it scans again. It doesn&#39;t actually</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="cm"> connect to any network, so no encryption scheme is specified.</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="cm"> created 13 July 2010</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="cm"> by dlf (Metodo2 srl)</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="cm"> modified 21 Junn 2012</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="cm"> by Tom Igoe and Jaymes Dec</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="cm"> modified 08 May 2023</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="cm"> by Realtek SG</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="cm"> Example guide:</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="cm"> https://www.amebaiot.com/en/amebad-arduino-scan-wifi/</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="cm"> */</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;WiFi.h&gt;</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="kt">int</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WL_IDLE_STATUS</span><span class="p">;</span><span class="w">    </span><span class="c1">// Indicater of Wifi status</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">    </span><span class="c1">//Initialize serial and wait for port to open:</span>
</span><span id="__span-2-25"><a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-2-26"><a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-27"><a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="w">        </span><span class="p">;</span><span class="w"> </span><span class="c1">// wait for serial port to connect. Needed for native USB port only</span>
</span><span id="__span-2-28"><a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-29"><a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>
</span><span id="__span-2-30"><a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">    </span><span class="c1">// check for WiFi status:</span>
</span><span id="__span-2-31"><a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a><span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">status</span><span class="p">();</span>
</span><span id="__span-2-32"><a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="w">    </span><span class="c1">// Print WiFi MAC address:</span>
</span><span id="__span-2-33"><a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="w">    </span><span class="n">printMacAddress</span><span class="p">();</span>
</span><span id="__span-2-34"><a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="p">}</span>
</span><span id="__span-2-35"><a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a>
</span><span id="__span-2-36"><a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-37"><a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="w">    </span><span class="c1">// scan for existing networks:</span>
</span><span id="__span-2-38"><a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Scanning available networks...&quot;</span><span class="p">);</span>
</span><span id="__span-2-39"><a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a><span class="w">    </span><span class="n">listNetworks</span><span class="p">();</span>
</span><span id="__span-2-40"><a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
</span><span id="__span-2-41"><a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a><span class="p">}</span>
</span><span id="__span-2-42"><a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>
</span><span id="__span-2-43"><a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printMacAddress</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-44"><a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a><span class="w">    </span><span class="c1">// print your MAC address:</span>
</span><span id="__span-2-45"><a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a><span class="w">    </span><span class="n">byte</span><span class="w"> </span><span class="n">mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
</span><span id="__span-2-46"><a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a><span class="w">    </span><span class="n">WiFi</span><span class="p">.</span><span class="n">macAddress</span><span class="p">(</span><span class="n">mac</span><span class="p">);</span>
</span><span id="__span-2-47"><a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;MAC: &quot;</span><span class="p">);</span>
</span><span id="__span-2-48"><a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-2-49"><a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-2-50"><a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-2-51"><a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-2-52"><a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-2-53"><a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-2-54"><a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-2-55"><a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-2-56"><a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-2-57"><a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-2-58"><a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-2-59"><a id="__codelineno-2-59" name="__codelineno-2-59" href="#__codelineno-2-59"></a><span class="p">}</span>
</span><span id="__span-2-60"><a id="__codelineno-2-60" name="__codelineno-2-60" href="#__codelineno-2-60"></a>
</span><span id="__span-2-61"><a id="__codelineno-2-61" name="__codelineno-2-61" href="#__codelineno-2-61"></a><span class="kt">void</span><span class="w"> </span><span class="nf">listNetworks</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-62"><a id="__codelineno-2-62" name="__codelineno-2-62" href="#__codelineno-2-62"></a><span class="w">    </span><span class="c1">// scan for nearby networks:</span>
</span><span id="__span-2-63"><a id="__codelineno-2-63" name="__codelineno-2-63" href="#__codelineno-2-63"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;** Scan Networks **&quot;</span><span class="p">);</span>
</span><span id="__span-2-64"><a id="__codelineno-2-64" name="__codelineno-2-64" href="#__codelineno-2-64"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">numSsid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">scanNetworks</span><span class="p">();</span>
</span><span id="__span-2-65"><a id="__codelineno-2-65" name="__codelineno-2-65" href="#__codelineno-2-65"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">numSsid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-66"><a id="__codelineno-2-66" name="__codelineno-2-66" href="#__codelineno-2-66"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Couldn&#39;t get a wifi connection&quot;</span><span class="p">);</span>
</span><span id="__span-2-67"><a id="__codelineno-2-67" name="__codelineno-2-67" href="#__codelineno-2-67"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span><span id="__span-2-68"><a id="__codelineno-2-68" name="__codelineno-2-68" href="#__codelineno-2-68"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-69"><a id="__codelineno-2-69" name="__codelineno-2-69" href="#__codelineno-2-69"></a>
</span><span id="__span-2-70"><a id="__codelineno-2-70" name="__codelineno-2-70" href="#__codelineno-2-70"></a><span class="w">    </span><span class="c1">// print the list of networks seen:</span>
</span><span id="__span-2-71"><a id="__codelineno-2-71" name="__codelineno-2-71" href="#__codelineno-2-71"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;number of available networks:&quot;</span><span class="p">);</span>
</span><span id="__span-2-72"><a id="__codelineno-2-72" name="__codelineno-2-72" href="#__codelineno-2-72"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">numSsid</span><span class="p">);</span>
</span><span id="__span-2-73"><a id="__codelineno-2-73" name="__codelineno-2-73" href="#__codelineno-2-73"></a>
</span><span id="__span-2-74"><a id="__codelineno-2-74" name="__codelineno-2-74" href="#__codelineno-2-74"></a><span class="w">    </span><span class="c1">// print the network number and name for each network found:</span>
</span><span id="__span-2-75"><a id="__codelineno-2-75" name="__codelineno-2-75" href="#__codelineno-2-75"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">thisNet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">thisNet</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numSsid</span><span class="p">;</span><span class="w"> </span><span class="n">thisNet</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-76"><a id="__codelineno-2-76" name="__codelineno-2-76" href="#__codelineno-2-76"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">thisNet</span><span class="p">);</span>
</span><span id="__span-2-77"><a id="__codelineno-2-77" name="__codelineno-2-77" href="#__codelineno-2-77"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;) &quot;</span><span class="p">);</span>
</span><span id="__span-2-78"><a id="__codelineno-2-78" name="__codelineno-2-78" href="#__codelineno-2-78"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">SSID</span><span class="p">(</span><span class="n">thisNet</span><span class="p">));</span>
</span><span id="__span-2-79"><a id="__codelineno-2-79" name="__codelineno-2-79" href="#__codelineno-2-79"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Signal: &quot;</span><span class="p">);</span>
</span><span id="__span-2-80"><a id="__codelineno-2-80" name="__codelineno-2-80" href="#__codelineno-2-80"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">RSSI</span><span class="p">(</span><span class="n">thisNet</span><span class="p">));</span>
</span><span id="__span-2-81"><a id="__codelineno-2-81" name="__codelineno-2-81" href="#__codelineno-2-81"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; dBm&quot;</span><span class="p">);</span>
</span><span id="__span-2-82"><a id="__codelineno-2-82" name="__codelineno-2-82" href="#__codelineno-2-82"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">EncryptionRaw: &quot;</span><span class="p">);</span>
</span><span id="__span-2-83"><a id="__codelineno-2-83" name="__codelineno-2-83" href="#__codelineno-2-83"></a><span class="w">        </span><span class="n">printEncryptionTypeEx</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">encryptionTypeEx</span><span class="p">(</span><span class="n">thisNet</span><span class="p">));</span>
</span><span id="__span-2-84"><a id="__codelineno-2-84" name="__codelineno-2-84" href="#__codelineno-2-84"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\t</span><span class="s">Encryption: &quot;</span><span class="p">);</span>
</span><span id="__span-2-85"><a id="__codelineno-2-85" name="__codelineno-2-85" href="#__codelineno-2-85"></a><span class="w">        </span><span class="n">printEncryptionType</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">encryptionType</span><span class="p">(</span><span class="n">thisNet</span><span class="p">));</span>
</span><span id="__span-2-86"><a id="__codelineno-2-86" name="__codelineno-2-86" href="#__codelineno-2-86"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-87"><a id="__codelineno-2-87" name="__codelineno-2-87" href="#__codelineno-2-87"></a><span class="p">}</span>
</span><span id="__span-2-88"><a id="__codelineno-2-88" name="__codelineno-2-88" href="#__codelineno-2-88"></a>
</span><span id="__span-2-89"><a id="__codelineno-2-89" name="__codelineno-2-89" href="#__codelineno-2-89"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printEncryptionTypeEx</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">thisType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-90"><a id="__codelineno-2-90" name="__codelineno-2-90" href="#__codelineno-2-90"></a><span class="w">    </span><span class="cm">/*  Arduino wifi api use encryption type to mapping to security type.</span>
</span><span id="__span-2-91"><a id="__codelineno-2-91" name="__codelineno-2-91" href="#__codelineno-2-91"></a><span class="cm">    *  This function demonstrate how to get more richful information of security type.</span>
</span><span id="__span-2-92"><a id="__codelineno-2-92" name="__codelineno-2-92" href="#__codelineno-2-92"></a><span class="cm">    */</span>
</span><span id="__span-2-93"><a id="__codelineno-2-93" name="__codelineno-2-93" href="#__codelineno-2-93"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">thisType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-94"><a id="__codelineno-2-94" name="__codelineno-2-94" href="#__codelineno-2-94"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_OPEN</span><span class="p">:</span>
</span><span id="__span-2-95"><a id="__codelineno-2-95" name="__codelineno-2-95" href="#__codelineno-2-95"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Open&quot;</span><span class="p">);</span>
</span><span id="__span-2-96"><a id="__codelineno-2-96" name="__codelineno-2-96" href="#__codelineno-2-96"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-97"><a id="__codelineno-2-97" name="__codelineno-2-97" href="#__codelineno-2-97"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WEP_PSK</span><span class="p">:</span>
</span><span id="__span-2-98"><a id="__codelineno-2-98" name="__codelineno-2-98" href="#__codelineno-2-98"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WEP&quot;</span><span class="p">);</span>
</span><span id="__span-2-99"><a id="__codelineno-2-99" name="__codelineno-2-99" href="#__codelineno-2-99"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-100"><a id="__codelineno-2-100" name="__codelineno-2-100" href="#__codelineno-2-100"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA_TKIP_PSK</span><span class="p">:</span>
</span><span id="__span-2-101"><a id="__codelineno-2-101" name="__codelineno-2-101" href="#__codelineno-2-101"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA TKIP&quot;</span><span class="p">);</span>
</span><span id="__span-2-102"><a id="__codelineno-2-102" name="__codelineno-2-102" href="#__codelineno-2-102"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-103"><a id="__codelineno-2-103" name="__codelineno-2-103" href="#__codelineno-2-103"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA_AES_PSK</span><span class="p">:</span>
</span><span id="__span-2-104"><a id="__codelineno-2-104" name="__codelineno-2-104" href="#__codelineno-2-104"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA AES&quot;</span><span class="p">);</span>
</span><span id="__span-2-105"><a id="__codelineno-2-105" name="__codelineno-2-105" href="#__codelineno-2-105"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-106"><a id="__codelineno-2-106" name="__codelineno-2-106" href="#__codelineno-2-106"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA2_AES_PSK</span><span class="p">:</span>
</span><span id="__span-2-107"><a id="__codelineno-2-107" name="__codelineno-2-107" href="#__codelineno-2-107"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA2 AES&quot;</span><span class="p">);</span>
</span><span id="__span-2-108"><a id="__codelineno-2-108" name="__codelineno-2-108" href="#__codelineno-2-108"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-109"><a id="__codelineno-2-109" name="__codelineno-2-109" href="#__codelineno-2-109"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA2_TKIP_PSK</span><span class="p">:</span>
</span><span id="__span-2-110"><a id="__codelineno-2-110" name="__codelineno-2-110" href="#__codelineno-2-110"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA2 TKIP&quot;</span><span class="p">);</span>
</span><span id="__span-2-111"><a id="__codelineno-2-111" name="__codelineno-2-111" href="#__codelineno-2-111"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-112"><a id="__codelineno-2-112" name="__codelineno-2-112" href="#__codelineno-2-112"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA2_MIXED_PSK</span><span class="p">:</span>
</span><span id="__span-2-113"><a id="__codelineno-2-113" name="__codelineno-2-113" href="#__codelineno-2-113"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA2 Mixed&quot;</span><span class="p">);</span>
</span><span id="__span-2-114"><a id="__codelineno-2-114" name="__codelineno-2-114" href="#__codelineno-2-114"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-115"><a id="__codelineno-2-115" name="__codelineno-2-115" href="#__codelineno-2-115"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA_WPA2_MIXED</span><span class="p">:</span>
</span><span id="__span-2-116"><a id="__codelineno-2-116" name="__codelineno-2-116" href="#__codelineno-2-116"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA/WPA2 AES&quot;</span><span class="p">);</span>
</span><span id="__span-2-117"><a id="__codelineno-2-117" name="__codelineno-2-117" href="#__codelineno-2-117"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-118"><a id="__codelineno-2-118" name="__codelineno-2-118" href="#__codelineno-2-118"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA3_AES_PSK</span><span class="p">:</span>
</span><span id="__span-2-119"><a id="__codelineno-2-119" name="__codelineno-2-119" href="#__codelineno-2-119"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA3 AES&quot;</span><span class="p">);</span>
</span><span id="__span-2-120"><a id="__codelineno-2-120" name="__codelineno-2-120" href="#__codelineno-2-120"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-121"><a id="__codelineno-2-121" name="__codelineno-2-121" href="#__codelineno-2-121"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SECURITY_WPA2_WPA3_MIXED</span><span class="p">:</span>
</span><span id="__span-2-122"><a id="__codelineno-2-122" name="__codelineno-2-122" href="#__codelineno-2-122"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;WPA2/WPA3&quot;</span><span class="p">);</span>
</span><span id="__span-2-123"><a id="__codelineno-2-123" name="__codelineno-2-123" href="#__codelineno-2-123"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-124"><a id="__codelineno-2-124" name="__codelineno-2-124" href="#__codelineno-2-124"></a><span class="p">}</span>
</span><span id="__span-2-125"><a id="__codelineno-2-125" name="__codelineno-2-125" href="#__codelineno-2-125"></a>
</span><span id="__span-2-126"><a id="__codelineno-2-126" name="__codelineno-2-126" href="#__codelineno-2-126"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printEncryptionType</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">thisType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-127"><a id="__codelineno-2-127" name="__codelineno-2-127" href="#__codelineno-2-127"></a><span class="w">    </span><span class="c1">// read the encryption type and print out the name:</span>
</span><span id="__span-2-128"><a id="__codelineno-2-128" name="__codelineno-2-128" href="#__codelineno-2-128"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">thisType</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-129"><a id="__codelineno-2-129" name="__codelineno-2-129" href="#__codelineno-2-129"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ENC_TYPE_WEP</span><span class="p">:</span>
</span><span id="__span-2-130"><a id="__codelineno-2-130" name="__codelineno-2-130" href="#__codelineno-2-130"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;WEP&quot;</span><span class="p">);</span>
</span><span id="__span-2-131"><a id="__codelineno-2-131" name="__codelineno-2-131" href="#__codelineno-2-131"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-132"><a id="__codelineno-2-132" name="__codelineno-2-132" href="#__codelineno-2-132"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ENC_TYPE_WPA</span><span class="p">:</span>
</span><span id="__span-2-133"><a id="__codelineno-2-133" name="__codelineno-2-133" href="#__codelineno-2-133"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;WPA&quot;</span><span class="p">);</span>
</span><span id="__span-2-134"><a id="__codelineno-2-134" name="__codelineno-2-134" href="#__codelineno-2-134"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-135"><a id="__codelineno-2-135" name="__codelineno-2-135" href="#__codelineno-2-135"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ENC_TYPE_WPA2</span><span class="p">:</span>
</span><span id="__span-2-136"><a id="__codelineno-2-136" name="__codelineno-2-136" href="#__codelineno-2-136"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;WPA2&quot;</span><span class="p">);</span>
</span><span id="__span-2-137"><a id="__codelineno-2-137" name="__codelineno-2-137" href="#__codelineno-2-137"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-138"><a id="__codelineno-2-138" name="__codelineno-2-138" href="#__codelineno-2-138"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ENC_TYPE_WPA3</span><span class="p">:</span>
</span><span id="__span-2-139"><a id="__codelineno-2-139" name="__codelineno-2-139" href="#__codelineno-2-139"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;WPA3&quot;</span><span class="p">);</span>
</span><span id="__span-2-140"><a id="__codelineno-2-140" name="__codelineno-2-140" href="#__codelineno-2-140"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-141"><a id="__codelineno-2-141" name="__codelineno-2-141" href="#__codelineno-2-141"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ENC_TYPE_NONE</span><span class="p">:</span>
</span><span id="__span-2-142"><a id="__codelineno-2-142" name="__codelineno-2-142" href="#__codelineno-2-142"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;None&quot;</span><span class="p">);</span>
</span><span id="__span-2-143"><a id="__codelineno-2-143" name="__codelineno-2-143" href="#__codelineno-2-143"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-144"><a id="__codelineno-2-144" name="__codelineno-2-144" href="#__codelineno-2-144"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">ENC_TYPE_AUTO</span><span class="p">:</span>
</span><span id="__span-2-145"><a id="__codelineno-2-145" name="__codelineno-2-145" href="#__codelineno-2-145"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Auto&quot;</span><span class="p">);</span>
</span><span id="__span-2-146"><a id="__codelineno-2-146" name="__codelineno-2-146" href="#__codelineno-2-146"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-2-147"><a id="__codelineno-2-147" name="__codelineno-2-147" href="#__codelineno-2-147"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-148"><a id="__codelineno-2-148" name="__codelineno-2-148" href="#__codelineno-2-148"></a><span class="p">}</span>
</span></code></pre></div>
<p>Open you <a href="https://learn.sparkfun.com/tutorials/terminal-basics/arduino-serial-monitor-windows-mac-linux">Arduino Serial Monitor</a> at <strong>115200</strong>. The SparkFun Thing Plus NORA-W306 will begin scanning your area. Take note of the encryption type of the WiFi network that you are connecting to. In this case, I had set my home WiFi Router's 5GHz network name to "SparkFun_Router_5GHz" and it was using a WPA2 encryption (as highlighted in the Arduino Serial Monitor).</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/AmebaD_RealTek_NORA-W306_Arduino_WiFi_Scan.JPG"><img src="../assets/img/AmebaD_RealTek_NORA-W306_Arduino_WiFi_Scan.JPG" width="600px" height="600px" alt="SparkFun Router 5GHz Highlighted Arduino Output"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>SparkFun Router 5GHz Highlighted Arduino Output</i></td>
    </tr>
  </table>
</div>

<h1 id="example-4-connecting-to-a-wifi-network">Example 4 - Connecting to a WiFi Network<a class="headerlink" href="#example-4-connecting-to-a-wifi-network" title="Permanent link"></a></h1>
<p>In this example, we will connect to a 5GHz WiFi network.</p>
<h3 id="hardware-hookup_3">Hardware Hookup<a class="headerlink" href="#hardware-hookup_3" title="Permanent link"></a></h3>
<p>The connection is the same as explained earlier in the tutorial. Connect the USB cable to the SparkFun Thing Plus NORA-W306 and the other end to your computer. Again, you will need a wireless router capable of 2.4GHz and 5GHz.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<h3 id="arduino-code_2">Arduino Code<a class="headerlink" href="#arduino-code_2" title="Permanent link"></a></h3>
<p>Let's upload the sketch to connect to the 5GHz network in your area. From the menu, select the following: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray"><b>Examples for SparkFun Thing Plus NORA-W306 (RTL8720DF)</b></font> | <strong>WiFi</strong> &gt; <strong>ConnectWithWiFi</strong> &gt; <strong>ConnectWithWPA</strong>. Depending on your encryption, you may select a different example.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your encryption, you may select a different Arduino sketch to connect to the WiFi. Based on the previous example, the connection used WPA so we selected the <strong>ConnectWithWPA.ino</strong> example.</p>
</div>
<p>Or you can copy and paste the following code in the Arduino IDE.</p>
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cm">/*</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="cm"> This example connects to an unencrypted Wifi network.</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="cm"> Then it prints the MAC address,</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="cm"> the IP address obtained, and other network details.</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="cm"> created 13 July 2010</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="cm"> by dlf (Metodo2 srl)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="cm"> modified 31 May 2012</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="cm"> by Tom Igoe</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="cm"> modified 08 May 2023</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="cm"> by Realtek SG</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="cm"> Example guide:</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="cm"> https://www.amebaiot.com/en/amebad-arduino-connect-wifi/</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="cm"> */</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;WiFi.h&gt;</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>
</span><span id="__span-3-20"><a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="c1">// Set if user wants to key in ssid/pwd manually during operation</span>
</span><span id="__span-3-21"><a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="c1">//#define MANUAL_INPUT</span>
</span><span id="__span-3-22"><a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>
</span><span id="__span-3-23"><a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a><span class="cp">#ifdef MANUAL_INPUT  </span><span class="c1">// Initialise ssid string, pwd string, and serial_in object</span>
</span><span id="__span-3-24"><a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a><span class="c1">// Initialise strings</span>
</span><span id="__span-3-25"><a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a><span class="n">String</span><span class="w"> </span><span class="n">str_ssid</span><span class="p">,</span><span class="w"> </span><span class="n">str_pass</span><span class="p">;</span>
</span><span id="__span-3-26"><a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a><span class="cp">#endif</span>
</span><span id="__span-3-27"><a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>
</span><span id="__span-3-28"><a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a><span class="c1">// If you are connecting to an iPhone WiFi hotspot, the default SSID uses Unicode (U+2019) Right Single Quotation Mark instead of ASCII apostrophe</span>
</span><span id="__span-3-29"><a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a><span class="c1">// Modify the &quot;Your Name&quot; section in the SSID below to connect to an iPhone using a default SSID style</span>
</span><span id="__span-3-30"><a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a><span class="c1">// char ssid[] = &quot;Your Name\xE2\x80\x99s iPhone&quot;;</span>
</span><span id="__span-3-31"><a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>
</span><span id="__span-3-32"><a id="__codelineno-3-32" name="__codelineno-3-32" href="#__codelineno-3-32"></a><span class="c1">// UTF-8 encoding can also be used for SSID with emoji characters</span>
</span><span id="__span-3-33"><a id="__codelineno-3-33" name="__codelineno-3-33" href="#__codelineno-3-33"></a><span class="c1">// Emoji characters can be converted into UTF-8 at https://mothereff.in/utf-8</span>
</span><span id="__span-3-34"><a id="__codelineno-3-34" name="__codelineno-3-34" href="#__codelineno-3-34"></a><span class="c1">// char ssid[] = &quot;\xe2\x9c\x8c\xef\xb8\x8f Ameba \xe2\x9c\x8c\xef\xb8\x8f&quot;;</span>
</span><span id="__span-3-35"><a id="__codelineno-3-35" name="__codelineno-3-35" href="#__codelineno-3-35"></a>
</span><span id="__span-3-36"><a id="__codelineno-3-36" name="__codelineno-3-36" href="#__codelineno-3-36"></a><span class="kt">char</span><span class="w"> </span><span class="n">ssid</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Network_SSID&quot;</span><span class="p">;</span><span class="w">       </span><span class="c1">// your network SSID (name)</span>
</span><span id="__span-3-37"><a id="__codelineno-3-37" name="__codelineno-3-37" href="#__codelineno-3-37"></a><span class="kt">char</span><span class="w"> </span><span class="n">pass</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Password&quot;</span><span class="p">;</span><span class="w">           </span><span class="c1">// your network password</span>
</span><span id="__span-3-38"><a id="__codelineno-3-38" name="__codelineno-3-38" href="#__codelineno-3-38"></a><span class="kt">int</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WL_IDLE_STATUS</span><span class="p">;</span><span class="w">        </span><span class="c1">// Indicater of Wifi status</span>
</span><span id="__span-3-39"><a id="__codelineno-3-39" name="__codelineno-3-39" href="#__codelineno-3-39"></a>
</span><span id="__span-3-40"><a id="__codelineno-3-40" name="__codelineno-3-40" href="#__codelineno-3-40"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-41"><a id="__codelineno-3-41" name="__codelineno-3-41" href="#__codelineno-3-41"></a><span class="w">    </span><span class="c1">//Initialize serial and wait for port to open:</span>
</span><span id="__span-3-42"><a id="__codelineno-3-42" name="__codelineno-3-42" href="#__codelineno-3-42"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-3-43"><a id="__codelineno-3-43" name="__codelineno-3-43" href="#__codelineno-3-43"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-44"><a id="__codelineno-3-44" name="__codelineno-3-44" href="#__codelineno-3-44"></a><span class="w">        </span><span class="p">;</span><span class="w"> </span><span class="c1">// wait for serial port to connect. Needed for native USB port only</span>
</span><span id="__span-3-45"><a id="__codelineno-3-45" name="__codelineno-3-45" href="#__codelineno-3-45"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-46"><a id="__codelineno-3-46" name="__codelineno-3-46" href="#__codelineno-3-46"></a>
</span><span id="__span-3-47"><a id="__codelineno-3-47" name="__codelineno-3-47" href="#__codelineno-3-47"></a><span class="w">    </span><span class="c1">// attempt to connect to Wifi network:</span>
</span><span id="__span-3-48"><a id="__codelineno-3-48" name="__codelineno-3-48" href="#__codelineno-3-48"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">WL_CONNECTED</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-49"><a id="__codelineno-3-49" name="__codelineno-3-49" href="#__codelineno-3-49"></a><span class="cp">#ifdef MANUAL_INPUT</span>
</span><span id="__span-3-50"><a id="__codelineno-3-50" name="__codelineno-3-50" href="#__codelineno-3-50"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Enter your ssid&quot;</span><span class="p">);</span>
</span><span id="__span-3-51"><a id="__codelineno-3-51" name="__codelineno-3-51" href="#__codelineno-3-51"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-3-52"><a id="__codelineno-3-52" name="__codelineno-3-52" href="#__codelineno-3-52"></a><span class="w">            </span><span class="n">str_ssid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">readString</span><span class="p">();</span>
</span><span id="__span-3-53"><a id="__codelineno-3-53" name="__codelineno-3-53" href="#__codelineno-3-53"></a><span class="w">            </span><span class="n">str_ssid</span><span class="p">.</span><span class="n">trim</span><span class="p">();</span>
</span><span id="__span-3-54"><a id="__codelineno-3-54" name="__codelineno-3-54" href="#__codelineno-3-54"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;SSID entered: &quot;</span><span class="p">);</span>
</span><span id="__span-3-55"><a id="__codelineno-3-55" name="__codelineno-3-55" href="#__codelineno-3-55"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">str_ssid</span><span class="p">);</span>
</span><span id="__span-3-56"><a id="__codelineno-3-56" name="__codelineno-3-56" href="#__codelineno-3-56"></a>
</span><span id="__span-3-57"><a id="__codelineno-3-57" name="__codelineno-3-57" href="#__codelineno-3-57"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Enter your password&quot;</span><span class="p">);</span>
</span><span id="__span-3-58"><a id="__codelineno-3-58" name="__codelineno-3-58" href="#__codelineno-3-58"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-3-59"><a id="__codelineno-3-59" name="__codelineno-3-59" href="#__codelineno-3-59"></a><span class="w">        </span><span class="n">str_pass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">readString</span><span class="p">();</span>
</span><span id="__span-3-60"><a id="__codelineno-3-60" name="__codelineno-3-60" href="#__codelineno-3-60"></a><span class="w">        </span><span class="n">str_pass</span><span class="p">.</span><span class="n">trim</span><span class="p">();</span>
</span><span id="__span-3-61"><a id="__codelineno-3-61" name="__codelineno-3-61" href="#__codelineno-3-61"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">str_pass</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// user has entered data</span>
</span><span id="__span-3-62"><a id="__codelineno-3-62" name="__codelineno-3-62" href="#__codelineno-3-62"></a><span class="w">                </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">str_pass</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="mi">8</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// to catch pwd&lt;8 exception</span>
</span><span id="__span-3-63"><a id="__codelineno-3-63" name="__codelineno-3-63" href="#__codelineno-3-63"></a><span class="w">                    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Password cannot be less than 8 characters! Try again&quot;</span><span class="p">);</span>
</span><span id="__span-3-64"><a id="__codelineno-3-64" name="__codelineno-3-64" href="#__codelineno-3-64"></a><span class="w">                    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-3-65"><a id="__codelineno-3-65" name="__codelineno-3-65" href="#__codelineno-3-65"></a><span class="w">                    </span><span class="n">str_pass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Serial</span><span class="p">.</span><span class="n">readString</span><span class="p">();</span>
</span><span id="__span-3-66"><a id="__codelineno-3-66" name="__codelineno-3-66" href="#__codelineno-3-66"></a><span class="w">                    </span><span class="n">str_pass</span><span class="p">.</span><span class="n">trim</span><span class="p">();</span>
</span><span id="__span-3-67"><a id="__codelineno-3-67" name="__codelineno-3-67" href="#__codelineno-3-67"></a><span class="w">                </span><span class="p">}</span>
</span><span id="__span-3-68"><a id="__codelineno-3-68" name="__codelineno-3-68" href="#__codelineno-3-68"></a><span class="w">                    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Password entered: &quot;</span><span class="p">);</span>
</span><span id="__span-3-69"><a id="__codelineno-3-69" name="__codelineno-3-69" href="#__codelineno-3-69"></a><span class="w">                    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">str_pass</span><span class="p">);</span>
</span><span id="__span-3-70"><a id="__codelineno-3-70" name="__codelineno-3-70" href="#__codelineno-3-70"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-3-71"><a id="__codelineno-3-71" name="__codelineno-3-71" href="#__codelineno-3-71"></a><span class="cp">#endif</span>
</span><span id="__span-3-72"><a id="__codelineno-3-72" name="__codelineno-3-72" href="#__codelineno-3-72"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Attempting to connect to WPA SSID: &quot;</span><span class="p">);</span>
</span><span id="__span-3-73"><a id="__codelineno-3-73" name="__codelineno-3-73" href="#__codelineno-3-73"></a>
</span><span id="__span-3-74"><a id="__codelineno-3-74" name="__codelineno-3-74" href="#__codelineno-3-74"></a><span class="cp">#ifndef MANUAL_INPUT</span>
</span><span id="__span-3-75"><a id="__codelineno-3-75" name="__codelineno-3-75" href="#__codelineno-3-75"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ssid</span><span class="p">);</span>
</span><span id="__span-3-76"><a id="__codelineno-3-76" name="__codelineno-3-76" href="#__codelineno-3-76"></a><span class="w">        </span><span class="c1">// Connect to WPA/WPA2 network:</span>
</span><span id="__span-3-77"><a id="__codelineno-3-77" name="__codelineno-3-77" href="#__codelineno-3-77"></a><span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ssid</span><span class="p">,</span><span class="w"> </span><span class="n">pass</span><span class="p">);</span>
</span><span id="__span-3-78"><a id="__codelineno-3-78" name="__codelineno-3-78" href="#__codelineno-3-78"></a><span class="cp">#else</span>
</span><span id="__span-3-79"><a id="__codelineno-3-79" name="__codelineno-3-79" href="#__codelineno-3-79"></a><span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="n">ssid_cust</span><span class="p">[</span><span class="n">str_ssid</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-3-80"><a id="__codelineno-3-80" name="__codelineno-3-80" href="#__codelineno-3-80"></a><span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="n">pass_cust</span><span class="p">[</span><span class="n">str_pass</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-3-81"><a id="__codelineno-3-81" name="__codelineno-3-81" href="#__codelineno-3-81"></a><span class="w">        </span><span class="n">strcpy</span><span class="p">(</span><span class="n">ssid_cust</span><span class="p">,</span><span class="w"> </span><span class="n">str_ssid</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span><span id="__span-3-82"><a id="__codelineno-3-82" name="__codelineno-3-82" href="#__codelineno-3-82"></a><span class="w">        </span><span class="n">strcpy</span><span class="p">(</span><span class="n">pass_cust</span><span class="p">,</span><span class="w"> </span><span class="n">str_pass</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span><span id="__span-3-83"><a id="__codelineno-3-83" name="__codelineno-3-83" href="#__codelineno-3-83"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">str_ssid</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
</span><span id="__span-3-84"><a id="__codelineno-3-84" name="__codelineno-3-84" href="#__codelineno-3-84"></a><span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">ssid_cust</span><span class="p">,</span><span class="w"> </span><span class="n">pass_cust</span><span class="p">);</span>
</span><span id="__span-3-85"><a id="__codelineno-3-85" name="__codelineno-3-85" href="#__codelineno-3-85"></a><span class="w">        </span><span class="n">str_ssid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_pass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
</span><span id="__span-3-86"><a id="__codelineno-3-86" name="__codelineno-3-86" href="#__codelineno-3-86"></a><span class="cp">#endif</span>
</span><span id="__span-3-87"><a id="__codelineno-3-87" name="__codelineno-3-87" href="#__codelineno-3-87"></a><span class="w">        </span><span class="c1">// wait 10 seconds for connection:</span>
</span><span id="__span-3-88"><a id="__codelineno-3-88" name="__codelineno-3-88" href="#__codelineno-3-88"></a><span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
</span><span id="__span-3-89"><a id="__codelineno-3-89" name="__codelineno-3-89" href="#__codelineno-3-89"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-3-90"><a id="__codelineno-3-90" name="__codelineno-3-90" href="#__codelineno-3-90"></a>
</span><span id="__span-3-91"><a id="__codelineno-3-91" name="__codelineno-3-91" href="#__codelineno-3-91"></a><span class="w">    </span><span class="c1">// you&#39;re connected now, so print out the data:</span>
</span><span id="__span-3-92"><a id="__codelineno-3-92" name="__codelineno-3-92" href="#__codelineno-3-92"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
</span><span id="__span-3-93"><a id="__codelineno-3-93" name="__codelineno-3-93" href="#__codelineno-3-93"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;You&#39;re connected to the network&quot;</span><span class="p">);</span>
</span><span id="__span-3-94"><a id="__codelineno-3-94" name="__codelineno-3-94" href="#__codelineno-3-94"></a><span class="w">    </span><span class="n">printCurrentNet</span><span class="p">();</span>
</span><span id="__span-3-95"><a id="__codelineno-3-95" name="__codelineno-3-95" href="#__codelineno-3-95"></a><span class="w">    </span><span class="n">printWifiData</span><span class="p">();</span>
</span><span id="__span-3-96"><a id="__codelineno-3-96" name="__codelineno-3-96" href="#__codelineno-3-96"></a><span class="p">}</span>
</span><span id="__span-3-97"><a id="__codelineno-3-97" name="__codelineno-3-97" href="#__codelineno-3-97"></a>
</span><span id="__span-3-98"><a id="__codelineno-3-98" name="__codelineno-3-98" href="#__codelineno-3-98"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-99"><a id="__codelineno-3-99" name="__codelineno-3-99" href="#__codelineno-3-99"></a><span class="w">    </span><span class="c1">// check the network connection once every 10 seconds:</span>
</span><span id="__span-3-100"><a id="__codelineno-3-100" name="__codelineno-3-100" href="#__codelineno-3-100"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
</span><span id="__span-3-101"><a id="__codelineno-3-101" name="__codelineno-3-101" href="#__codelineno-3-101"></a><span class="w">    </span><span class="n">printCurrentNet</span><span class="p">();</span>
</span><span id="__span-3-102"><a id="__codelineno-3-102" name="__codelineno-3-102" href="#__codelineno-3-102"></a><span class="p">}</span>
</span><span id="__span-3-103"><a id="__codelineno-3-103" name="__codelineno-3-103" href="#__codelineno-3-103"></a>
</span><span id="__span-3-104"><a id="__codelineno-3-104" name="__codelineno-3-104" href="#__codelineno-3-104"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printWifiData</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-105"><a id="__codelineno-3-105" name="__codelineno-3-105" href="#__codelineno-3-105"></a><span class="w">    </span><span class="c1">// print your WiFi IP address:</span>
</span><span id="__span-3-106"><a id="__codelineno-3-106" name="__codelineno-3-106" href="#__codelineno-3-106"></a><span class="w">    </span><span class="n">IPAddress</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">localIP</span><span class="p">();</span>
</span><span id="__span-3-107"><a id="__codelineno-3-107" name="__codelineno-3-107" href="#__codelineno-3-107"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;IP Address: &quot;</span><span class="p">);</span>
</span><span id="__span-3-108"><a id="__codelineno-3-108" name="__codelineno-3-108" href="#__codelineno-3-108"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ip</span><span class="p">);</span>
</span><span id="__span-3-109"><a id="__codelineno-3-109" name="__codelineno-3-109" href="#__codelineno-3-109"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">ip</span><span class="p">);</span>
</span><span id="__span-3-110"><a id="__codelineno-3-110" name="__codelineno-3-110" href="#__codelineno-3-110"></a>
</span><span id="__span-3-111"><a id="__codelineno-3-111" name="__codelineno-3-111" href="#__codelineno-3-111"></a><span class="w">    </span><span class="c1">// print your MAC address:</span>
</span><span id="__span-3-112"><a id="__codelineno-3-112" name="__codelineno-3-112" href="#__codelineno-3-112"></a><span class="w">    </span><span class="n">byte</span><span class="w"> </span><span class="n">mac</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
</span><span id="__span-3-113"><a id="__codelineno-3-113" name="__codelineno-3-113" href="#__codelineno-3-113"></a><span class="w">    </span><span class="n">WiFi</span><span class="p">.</span><span class="n">macAddress</span><span class="p">(</span><span class="n">mac</span><span class="p">);</span>
</span><span id="__span-3-114"><a id="__codelineno-3-114" name="__codelineno-3-114" href="#__codelineno-3-114"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;MAC address: &quot;</span><span class="p">);</span>
</span><span id="__span-3-115"><a id="__codelineno-3-115" name="__codelineno-3-115" href="#__codelineno-3-115"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-116"><a id="__codelineno-3-116" name="__codelineno-3-116" href="#__codelineno-3-116"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-117"><a id="__codelineno-3-117" name="__codelineno-3-117" href="#__codelineno-3-117"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-118"><a id="__codelineno-3-118" name="__codelineno-3-118" href="#__codelineno-3-118"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-119"><a id="__codelineno-3-119" name="__codelineno-3-119" href="#__codelineno-3-119"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-120"><a id="__codelineno-3-120" name="__codelineno-3-120" href="#__codelineno-3-120"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-121"><a id="__codelineno-3-121" name="__codelineno-3-121" href="#__codelineno-3-121"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-122"><a id="__codelineno-3-122" name="__codelineno-3-122" href="#__codelineno-3-122"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-123"><a id="__codelineno-3-123" name="__codelineno-3-123" href="#__codelineno-3-123"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-124"><a id="__codelineno-3-124" name="__codelineno-3-124" href="#__codelineno-3-124"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-125"><a id="__codelineno-3-125" name="__codelineno-3-125" href="#__codelineno-3-125"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">mac</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-126"><a id="__codelineno-3-126" name="__codelineno-3-126" href="#__codelineno-3-126"></a><span class="p">}</span>
</span><span id="__span-3-127"><a id="__codelineno-3-127" name="__codelineno-3-127" href="#__codelineno-3-127"></a>
</span><span id="__span-3-128"><a id="__codelineno-3-128" name="__codelineno-3-128" href="#__codelineno-3-128"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printCurrentNet</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-129"><a id="__codelineno-3-129" name="__codelineno-3-129" href="#__codelineno-3-129"></a><span class="w">    </span><span class="c1">// print the SSID of the network you&#39;re attached to:</span>
</span><span id="__span-3-130"><a id="__codelineno-3-130" name="__codelineno-3-130" href="#__codelineno-3-130"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;SSID: &quot;</span><span class="p">);</span>
</span><span id="__span-3-131"><a id="__codelineno-3-131" name="__codelineno-3-131" href="#__codelineno-3-131"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">WiFi</span><span class="p">.</span><span class="n">SSID</span><span class="p">());</span>
</span><span id="__span-3-132"><a id="__codelineno-3-132" name="__codelineno-3-132" href="#__codelineno-3-132"></a>
</span><span id="__span-3-133"><a id="__codelineno-3-133" name="__codelineno-3-133" href="#__codelineno-3-133"></a><span class="w">    </span><span class="c1">// print the MAC address of the router you&#39;re attached to:</span>
</span><span id="__span-3-134"><a id="__codelineno-3-134" name="__codelineno-3-134" href="#__codelineno-3-134"></a><span class="w">    </span><span class="n">byte</span><span class="w"> </span><span class="n">bssid</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>
</span><span id="__span-3-135"><a id="__codelineno-3-135" name="__codelineno-3-135" href="#__codelineno-3-135"></a><span class="w">    </span><span class="n">WiFi</span><span class="p">.</span><span class="n">BSSID</span><span class="p">(</span><span class="n">bssid</span><span class="p">);</span>
</span><span id="__span-3-136"><a id="__codelineno-3-136" name="__codelineno-3-136" href="#__codelineno-3-136"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;BSSID: &quot;</span><span class="p">);</span>
</span><span id="__span-3-137"><a id="__codelineno-3-137" name="__codelineno-3-137" href="#__codelineno-3-137"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">bssid</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-138"><a id="__codelineno-3-138" name="__codelineno-3-138" href="#__codelineno-3-138"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-139"><a id="__codelineno-3-139" name="__codelineno-3-139" href="#__codelineno-3-139"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">bssid</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-140"><a id="__codelineno-3-140" name="__codelineno-3-140" href="#__codelineno-3-140"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-141"><a id="__codelineno-3-141" name="__codelineno-3-141" href="#__codelineno-3-141"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">bssid</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-142"><a id="__codelineno-3-142" name="__codelineno-3-142" href="#__codelineno-3-142"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-143"><a id="__codelineno-3-143" name="__codelineno-3-143" href="#__codelineno-3-143"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">bssid</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-144"><a id="__codelineno-3-144" name="__codelineno-3-144" href="#__codelineno-3-144"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-145"><a id="__codelineno-3-145" name="__codelineno-3-145" href="#__codelineno-3-145"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">bssid</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-146"><a id="__codelineno-3-146" name="__codelineno-3-146" href="#__codelineno-3-146"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;:&quot;</span><span class="p">);</span>
</span><span id="__span-3-147"><a id="__codelineno-3-147" name="__codelineno-3-147" href="#__codelineno-3-147"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">bssid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-148"><a id="__codelineno-3-148" name="__codelineno-3-148" href="#__codelineno-3-148"></a>
</span><span id="__span-3-149"><a id="__codelineno-3-149" name="__codelineno-3-149" href="#__codelineno-3-149"></a><span class="w">    </span><span class="c1">// print the received signal strength:</span>
</span><span id="__span-3-150"><a id="__codelineno-3-150" name="__codelineno-3-150" href="#__codelineno-3-150"></a><span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">rssi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">RSSI</span><span class="p">();</span>
</span><span id="__span-3-151"><a id="__codelineno-3-151" name="__codelineno-3-151" href="#__codelineno-3-151"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;signal strength (RSSI):&quot;</span><span class="p">);</span>
</span><span id="__span-3-152"><a id="__codelineno-3-152" name="__codelineno-3-152" href="#__codelineno-3-152"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">rssi</span><span class="p">);</span>
</span><span id="__span-3-153"><a id="__codelineno-3-153" name="__codelineno-3-153" href="#__codelineno-3-153"></a>
</span><span id="__span-3-154"><a id="__codelineno-3-154" name="__codelineno-3-154" href="#__codelineno-3-154"></a><span class="w">    </span><span class="c1">// print the encryption type:</span>
</span><span id="__span-3-155"><a id="__codelineno-3-155" name="__codelineno-3-155" href="#__codelineno-3-155"></a><span class="w">    </span><span class="n">byte</span><span class="w"> </span><span class="n">encryption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WiFi</span><span class="p">.</span><span class="n">encryptionType</span><span class="p">();</span>
</span><span id="__span-3-156"><a id="__codelineno-3-156" name="__codelineno-3-156" href="#__codelineno-3-156"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Encryption Type:&quot;</span><span class="p">);</span>
</span><span id="__span-3-157"><a id="__codelineno-3-157" name="__codelineno-3-157" href="#__codelineno-3-157"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">encryption</span><span class="p">,</span><span class="w"> </span><span class="n">HEX</span><span class="p">);</span>
</span><span id="__span-3-158"><a id="__codelineno-3-158" name="__codelineno-3-158" href="#__codelineno-3-158"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
</span><span id="__span-3-159"><a id="__codelineno-3-159" name="__codelineno-3-159" href="#__codelineno-3-159"></a><span class="p">}</span>
</span></code></pre></div>
<p>Then adjust the arrays that holed the SSID (i.e. <code>yourNetwork</code>) and password  (<code>secretPassword</code>) based on your WiFi network's settings.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/AmebaD_RealTek_NORA-W306_Arduino_Connect_to_WPA_Rename_SSID_to_5GHz_Network.JPG"><img src="../assets/img/AmebaD_RealTek_NORA-W306_Arduino_Connect_to_WPA_Rename_SSID_to_5GHz_Network.JPG" width="600px" height="600px" alt="SSID Changed"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>SSID Changed</i></td>
   </tr>
  </table>
</div>

<p>Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Boards</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was COM13). Hit upload button.</p>
<p>Open the <a href="https://learn.sparkfun.com/tutorials/terminal-basics/arduino-serial-monitor-windows-mac-linux">Arduino Serial Monitor</a> at <strong>115200</strong>. The SparkFun Thing Plus NORA-W306 will attempt to connect to the network.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/AmebaD_RealTek_NORA-W306_Arduino_Connect_to_WPA_5GHz_Network.JPG"><img src="../assets/img/AmebaD_RealTek_NORA-W306_Arduino_Connect_to_WPA_5GHz_Network.JPG" width="600px" height="600px" alt="Serial Monitor attempting to connect to WiFi network"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Serial Monitor attempting to connect to WiFi network</i></td>
   </tr>
  </table>
</div>

<p>If all goes well, you should see some status outputs and message indicating that you are connected to your network! In this case, I had the following message:</p>
<!-- Note: Using HTML tag for this message, otherwise there are weird syntax highlighting depending on the text editor that you are using. -->

<pre>
    <code class="language-bash" style="white-space: pre-wrap;">You're connected to the networkSSID: SparkFun_Router_5GHz</code>
</pre>

<p>The serial output will then continue outputting the status of the connection some of which include the SSID, signal strength (RSSI), and encryption type.  If you have admin privileges, you can check to see if the device is connected to the 5GHz WiFi network as well. Try connecting to a website and pulling the local time or weather in your area!</p>
<h1 id="example-5a-bluetooth-uart-service">Example 5a - Bluetooth UART Service<a class="headerlink" href="#example-5a-bluetooth-uart-service" title="Permanent link"></a></h1>
<p>In the following two examples, we will connect two NORA-W306 development boards  via Bluetooth and send serial characters.</p>
<h3 id="hardware-hookup_4">Hardware Hookup<a class="headerlink" href="#hardware-hookup_4" title="Permanent link"></a></h3>
<p>Connect the USB C cables to the boards and two different COM ports on your computer.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To keep track of which board that you are connecting to, use a sticky note and label the boards that you are using as the Service and Client.</p>
</div>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<p>When connecting and disconnecting the boards from your computer, you will noticed that the COM port enumerates to a certain number from the menu <strong>Tools</strong> &gt; <strong>Port</strong>. Feel free to write down the COM port on the sticky note as well after uploading code.</p>
<h3 id="arduino-code_3">Arduino Code<a class="headerlink" href="#arduino-code_3" title="Permanent link"></a></h3>
<p>Let&apos;s upload the sketch to send serial data between two SparkFun Thing Plus NORA-W306 boards wirelessly using the Bluetooth&reg; Low Energy (BLE) feature. From the menu, select the following: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray"><b>Examples for SparkFun Thing Plus NORA-W306 (RTL8720DF)</b></font> | <strong>AmebaBLE</strong> &gt; <strong>BLEUartService</strong>.</p>
<p>Or you can copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Boards</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was COM13). Hit upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cm">/*</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="cm"> Example guide:</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="cm"> https://www.amebaiot.com/en/amebad-arduino-ble-uart-service/</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="cm"> */</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;BLEDevice.h&quot;</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="cp">#define UART_SERVICE_UUID      &quot;6E400001-B5A3-F393-E0A9-E50E24DCCA9E&quot;</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="cp">#define CHARACTERISTIC_UUID_RX &quot;6E400002-B5A3-F393-E0A9-E50E24DCCA9E&quot;</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="cp">#define CHARACTERISTIC_UUID_TX &quot;6E400003-B5A3-F393-E0A9-E50E24DCCA9E&quot;</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="cp">#define STRING_BUF_SIZE 100</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="n">BLEService</span><span class="w"> </span><span class="nf">UartService</span><span class="p">(</span><span class="n">UART_SERVICE_UUID</span><span class="p">);</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="n">BLECharacteristic</span><span class="w"> </span><span class="nf">Rx</span><span class="p">(</span><span class="n">CHARACTERISTIC_UUID_RX</span><span class="p">);</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="n">BLECharacteristic</span><span class="w"> </span><span class="nf">Tx</span><span class="p">(</span><span class="n">CHARACTERISTIC_UUID_TX</span><span class="p">);</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="n">BLEAdvertData</span><span class="w"> </span><span class="n">advdata</span><span class="p">;</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="n">BLEAdvertData</span><span class="w"> </span><span class="n">scndata</span><span class="p">;</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="kt">bool</span><span class="w"> </span><span class="n">notify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="kt">void</span><span class="w"> </span><span class="nf">readCB</span><span class="w"> </span><span class="p">(</span><span class="n">BLECharacteristic</span><span class="o">*</span><span class="w"> </span><span class="n">chr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">connID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Characteristic &quot;</span><span class="p">);</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">chr</span><span class="o">-&gt;</span><span class="n">getUUID</span><span class="p">().</span><span class="n">str</span><span class="p">());</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; read by connection &quot;</span><span class="p">);</span>
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">connID</span><span class="p">);</span>
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a><span class="p">}</span>
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="kt">void</span><span class="w"> </span><span class="nf">writeCB</span><span class="w"> </span><span class="p">(</span><span class="n">BLECharacteristic</span><span class="o">*</span><span class="w"> </span><span class="n">chr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">connID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Characteristic &quot;</span><span class="p">);</span>
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">chr</span><span class="o">-&gt;</span><span class="n">getUUID</span><span class="p">().</span><span class="n">str</span><span class="p">());</span>
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; write by connection &quot;</span><span class="p">);</span>
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">connID</span><span class="p">);</span>
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">chr</span><span class="o">-&gt;</span><span class="n">getDataLen</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Received string: &quot;</span><span class="p">);</span>
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">chr</span><span class="o">-&gt;</span><span class="n">readString</span><span class="p">());</span>
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a><span class="p">}</span>
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a><span class="kt">void</span><span class="w"> </span><span class="nf">notifCB</span><span class="p">(</span><span class="n">BLECharacteristic</span><span class="o">*</span><span class="w"> </span><span class="n">chr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">connID</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">cccd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cccd</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">GATT_CLIENT_CHAR_CONFIG_NOTIFY</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a><span class="w">        </span><span class="c1">//printf(&quot;Notifications enabled on Characteristic %s for connection %d \n&quot;, chr-&gt;getUUID().str(), connID);</span>
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Notifications enabled on Characteristic&quot;</span><span class="p">);</span>
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a><span class="w">        </span><span class="n">notify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a><span class="w">        </span><span class="c1">//printf(&quot;Notifications disabled on Characteristic %s for connection %d \n&quot;, chr-&gt;getUUID().str(), connID);</span>
</span><span id="__span-4-48"><a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Notifications disabled on Characteristic&quot;</span><span class="p">);</span>
</span><span id="__span-4-49"><a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a><span class="w">        </span><span class="n">notify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-4-50"><a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-51"><a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">chr</span><span class="o">-&gt;</span><span class="n">getUUID</span><span class="p">().</span><span class="n">str</span><span class="p">());</span>
</span><span id="__span-4-52"><a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot; for connection&quot;</span><span class="p">);</span>
</span><span id="__span-4-53"><a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">connID</span><span class="p">);</span>
</span><span id="__span-4-54"><a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a><span class="p">}</span>
</span><span id="__span-4-55"><a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>
</span><span id="__span-4-56"><a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-57"><a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-4-58"><a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>
</span><span id="__span-4-59"><a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a><span class="w">    </span><span class="n">advdata</span><span class="p">.</span><span class="n">addFlags</span><span class="p">(</span><span class="n">GAP_ADTYPE_FLAGS_LIMITED</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">GAP_ADTYPE_FLAGS_BREDR_NOT_SUPPORTED</span><span class="p">);</span>
</span><span id="__span-4-60"><a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a><span class="w">    </span><span class="n">advdata</span><span class="p">.</span><span class="n">addCompleteName</span><span class="p">(</span><span class="s">&quot;AMEBA_BLE_DEV&quot;</span><span class="p">);</span>
</span><span id="__span-4-61"><a id="__codelineno-4-61" name="__codelineno-4-61" href="#__codelineno-4-61"></a><span class="w">    </span><span class="n">scndata</span><span class="p">.</span><span class="n">addCompleteServices</span><span class="p">(</span><span class="n">BLEUUID</span><span class="p">(</span><span class="n">UART_SERVICE_UUID</span><span class="p">));</span>
</span><span id="__span-4-62"><a id="__codelineno-4-62" name="__codelineno-4-62" href="#__codelineno-4-62"></a>
</span><span id="__span-4-63"><a id="__codelineno-4-63" name="__codelineno-4-63" href="#__codelineno-4-63"></a><span class="w">    </span><span class="n">Rx</span><span class="p">.</span><span class="n">setWriteProperty</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span><span id="__span-4-64"><a id="__codelineno-4-64" name="__codelineno-4-64" href="#__codelineno-4-64"></a><span class="w">    </span><span class="n">Rx</span><span class="p">.</span><span class="n">setWritePermissions</span><span class="p">(</span><span class="n">GATT_PERM_WRITE</span><span class="p">);</span>
</span><span id="__span-4-65"><a id="__codelineno-4-65" name="__codelineno-4-65" href="#__codelineno-4-65"></a><span class="w">    </span><span class="n">Rx</span><span class="p">.</span><span class="n">setWriteCallback</span><span class="p">(</span><span class="n">writeCB</span><span class="p">);</span>
</span><span id="__span-4-66"><a id="__codelineno-4-66" name="__codelineno-4-66" href="#__codelineno-4-66"></a><span class="w">    </span><span class="n">Rx</span><span class="p">.</span><span class="n">setBufferLen</span><span class="p">(</span><span class="n">STRING_BUF_SIZE</span><span class="p">);</span>
</span><span id="__span-4-67"><a id="__codelineno-4-67" name="__codelineno-4-67" href="#__codelineno-4-67"></a><span class="w">    </span><span class="n">Tx</span><span class="p">.</span><span class="n">setReadProperty</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span><span id="__span-4-68"><a id="__codelineno-4-68" name="__codelineno-4-68" href="#__codelineno-4-68"></a><span class="w">    </span><span class="n">Tx</span><span class="p">.</span><span class="n">setReadPermissions</span><span class="p">(</span><span class="n">GATT_PERM_READ</span><span class="p">);</span>
</span><span id="__span-4-69"><a id="__codelineno-4-69" name="__codelineno-4-69" href="#__codelineno-4-69"></a><span class="w">    </span><span class="n">Tx</span><span class="p">.</span><span class="n">setReadCallback</span><span class="p">(</span><span class="n">readCB</span><span class="p">);</span>
</span><span id="__span-4-70"><a id="__codelineno-4-70" name="__codelineno-4-70" href="#__codelineno-4-70"></a><span class="w">    </span><span class="n">Tx</span><span class="p">.</span><span class="n">setNotifyProperty</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span><span id="__span-4-71"><a id="__codelineno-4-71" name="__codelineno-4-71" href="#__codelineno-4-71"></a><span class="w">    </span><span class="n">Tx</span><span class="p">.</span><span class="n">setCCCDCallback</span><span class="p">(</span><span class="n">notifCB</span><span class="p">);</span>
</span><span id="__span-4-72"><a id="__codelineno-4-72" name="__codelineno-4-72" href="#__codelineno-4-72"></a><span class="w">    </span><span class="n">Tx</span><span class="p">.</span><span class="n">setBufferLen</span><span class="p">(</span><span class="n">STRING_BUF_SIZE</span><span class="p">);</span>
</span><span id="__span-4-73"><a id="__codelineno-4-73" name="__codelineno-4-73" href="#__codelineno-4-73"></a>
</span><span id="__span-4-74"><a id="__codelineno-4-74" name="__codelineno-4-74" href="#__codelineno-4-74"></a><span class="w">    </span><span class="n">UartService</span><span class="p">.</span><span class="n">addCharacteristic</span><span class="p">(</span><span class="n">Rx</span><span class="p">);</span>
</span><span id="__span-4-75"><a id="__codelineno-4-75" name="__codelineno-4-75" href="#__codelineno-4-75"></a><span class="w">    </span><span class="n">UartService</span><span class="p">.</span><span class="n">addCharacteristic</span><span class="p">(</span><span class="n">Tx</span><span class="p">);</span>
</span><span id="__span-4-76"><a id="__codelineno-4-76" name="__codelineno-4-76" href="#__codelineno-4-76"></a>
</span><span id="__span-4-77"><a id="__codelineno-4-77" name="__codelineno-4-77" href="#__codelineno-4-77"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
</span><span id="__span-4-78"><a id="__codelineno-4-78" name="__codelineno-4-78" href="#__codelineno-4-78"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">configAdvert</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">setAdvData</span><span class="p">(</span><span class="n">advdata</span><span class="p">);</span>
</span><span id="__span-4-79"><a id="__codelineno-4-79" name="__codelineno-4-79" href="#__codelineno-4-79"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">configAdvert</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">setScanRspData</span><span class="p">(</span><span class="n">scndata</span><span class="p">);</span>
</span><span id="__span-4-80"><a id="__codelineno-4-80" name="__codelineno-4-80" href="#__codelineno-4-80"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">configServer</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-4-81"><a id="__codelineno-4-81" name="__codelineno-4-81" href="#__codelineno-4-81"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">addService</span><span class="p">(</span><span class="n">UartService</span><span class="p">);</span>
</span><span id="__span-4-82"><a id="__codelineno-4-82" name="__codelineno-4-82" href="#__codelineno-4-82"></a>
</span><span id="__span-4-83"><a id="__codelineno-4-83" name="__codelineno-4-83" href="#__codelineno-4-83"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">beginPeripheral</span><span class="p">();</span>
</span><span id="__span-4-84"><a id="__codelineno-4-84" name="__codelineno-4-84" href="#__codelineno-4-84"></a><span class="p">}</span>
</span><span id="__span-4-85"><a id="__codelineno-4-85" name="__codelineno-4-85" href="#__codelineno-4-85"></a>
</span><span id="__span-4-86"><a id="__codelineno-4-86" name="__codelineno-4-86" href="#__codelineno-4-86"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-87"><a id="__codelineno-4-87" name="__codelineno-4-87" href="#__codelineno-4-87"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-88"><a id="__codelineno-4-88" name="__codelineno-4-88" href="#__codelineno-4-88"></a><span class="w">        </span><span class="n">Tx</span><span class="p">.</span><span class="n">writeString</span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">readString</span><span class="p">());</span>
</span><span id="__span-4-89"><a id="__codelineno-4-89" name="__codelineno-4-89" href="#__codelineno-4-89"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">BLE</span><span class="p">.</span><span class="n">connected</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">notify</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-90"><a id="__codelineno-4-90" name="__codelineno-4-90" href="#__codelineno-4-90"></a><span class="w">            </span><span class="n">Tx</span><span class="p">.</span><span class="n">notify</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-4-91"><a id="__codelineno-4-91" name="__codelineno-4-91" href="#__codelineno-4-91"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-92"><a id="__codelineno-4-92" name="__codelineno-4-92" href="#__codelineno-4-92"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-4-93"><a id="__codelineno-4-93" name="__codelineno-4-93" href="#__codelineno-4-93"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-4-94"><a id="__codelineno-4-94" name="__codelineno-4-94" href="#__codelineno-4-94"></a><span class="p">}</span>
</span></code></pre></div>
<p>When finished uploading, head to the next section to upload code to a second SparkFun Thing Plus NORA-W306 board.</p>
<h1 id="example-5b-bluetooth-uart-client">Example 5b - Bluetooth UART Client<a class="headerlink" href="#example-5b-bluetooth-uart-client" title="Permanent link"></a></h1>
<p>We will upload code for the Bluetooth UART client in this example. Then we will send characters between two serial terminals.</p>
<h3 id="hardware-hookup_5">Hardware Hookup<a class="headerlink" href="#hardware-hookup_5" title="Permanent link"></a></h3>
<p>Connect the USB C cables to the boards and two different COM ports on your computer.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To keep track of which board that you are connecting to, use a sticky note and label the boards that you are using as the Service and Client.</p>
</div>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<h3 id="arduino-code_4">Arduino Code<a class="headerlink" href="#arduino-code_4" title="Permanent link"></a></h3>
<p>Let&apos;s upload the corresponding sketch to send serial data between two SparkFun Thing Plus NORA-W306 boards wirelessly using the Bluetooth&reg; Low Energy (BLE) feature. From the menu, select the following: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray"><b>Examples for SparkFun Thing Plus NORA-W306 (RTL8720DF)</b></font> | <strong>AmebaBLE</strong> &gt; <strong>BLEUartClient</strong>.</p>
<p>Or you can copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Boards</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was COM22). Hit upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cm">/*</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="cm"> Example guide:</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="cm"> https://www.amebaiot.com/en/amebad-arduino-ble-uart/</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="cm"> */</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;BLEDevice.h&quot;</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="cp">#define UART_SERVICE_UUID      &quot;6E400001-B5A3-F393-E0A9-E50E24DCCA9E&quot;</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="cp">#define CHARACTERISTIC_UUID_RX &quot;6E400002-B5A3-F393-E0A9-E50E24DCCA9E&quot;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="cp">#define CHARACTERISTIC_UUID_TX &quot;6E400003-B5A3-F393-E0A9-E50E24DCCA9E&quot;</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="cp">#define STRING_BUF_SIZE 100</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="n">BLEAdvertData</span><span class="w"> </span><span class="n">foundDevice</span><span class="p">;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="n">BLEAdvertData</span><span class="w"> </span><span class="n">targetDevice</span><span class="p">;</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="n">BLEClient</span><span class="o">*</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="n">BLERemoteService</span><span class="o">*</span><span class="w"> </span><span class="n">UartService</span><span class="p">;</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="n">BLERemoteCharacteristic</span><span class="o">*</span><span class="w"> </span><span class="n">Rx</span><span class="p">;</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="n">BLERemoteCharacteristic</span><span class="o">*</span><span class="w"> </span><span class="n">Tx</span><span class="p">;</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="kt">void</span><span class="w"> </span><span class="nf">scanCB</span><span class="p">(</span><span class="n">T_LE_CB_DATA</span><span class="o">*</span><span class="w"> </span><span class="n">p_data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="w">    </span><span class="n">foundDevice</span><span class="p">.</span><span class="n">parseScanInfo</span><span class="p">(</span><span class="n">p_data</span><span class="p">);</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foundDevice</span><span class="p">.</span><span class="n">hasName</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foundDevice</span><span class="p">.</span><span class="n">getName</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="s">&quot;AMEBA_BLE_DEV&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Found Ameba BLE Device at address &quot;</span><span class="p">);</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">foundDevice</span><span class="p">.</span><span class="n">getAddr</span><span class="p">().</span><span class="n">str</span><span class="p">());</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w">            </span><span class="n">targetDevice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">foundDevice</span><span class="p">;</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="p">}</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="kt">void</span><span class="w"> </span><span class="nf">notificationCB</span><span class="w"> </span><span class="p">(</span><span class="n">BLERemoteCharacteristic</span><span class="o">*</span><span class="w"> </span><span class="n">chr</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">len</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">msg</span><span class="p">[</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a><span class="w">    </span><span class="n">memcpy</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Notification received for chr UUID: &quot;</span><span class="p">);</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">chr</span><span class="o">-&gt;</span><span class="n">getUUID</span><span class="p">().</span><span class="n">str</span><span class="p">());</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Received string: &quot;</span><span class="p">);</span>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="n">msg</span><span class="p">));</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="p">}</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-5-44"><a id="__codelineno-5-44" name="__codelineno-5-44" href="#__codelineno-5-44"></a>
</span><span id="__span-5-45"><a id="__codelineno-5-45" name="__codelineno-5-45" href="#__codelineno-5-45"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
</span><span id="__span-5-46"><a id="__codelineno-5-46" name="__codelineno-5-46" href="#__codelineno-5-46"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">setScanCallback</span><span class="p">(</span><span class="n">scanCB</span><span class="p">);</span>
</span><span id="__span-5-47"><a id="__codelineno-5-47" name="__codelineno-5-47" href="#__codelineno-5-47"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">beginCentral</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-5-48"><a id="__codelineno-5-48" name="__codelineno-5-48" href="#__codelineno-5-48"></a>
</span><span id="__span-5-49"><a id="__codelineno-5-49" name="__codelineno-5-49" href="#__codelineno-5-49"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">configScan</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">startScan</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
</span><span id="__span-5-50"><a id="__codelineno-5-50" name="__codelineno-5-50" href="#__codelineno-5-50"></a><span class="w">    </span><span class="n">BLE</span><span class="p">.</span><span class="n">configConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">connect</span><span class="p">(</span><span class="n">targetDevice</span><span class="p">,</span><span class="w"> </span><span class="mi">2000</span><span class="p">);</span>
</span><span id="__span-5-51"><a id="__codelineno-5-51" name="__codelineno-5-51" href="#__codelineno-5-51"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">2000</span><span class="p">);</span>
</span><span id="__span-5-52"><a id="__codelineno-5-52" name="__codelineno-5-52" href="#__codelineno-5-52"></a><span class="w">    </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">connID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLE</span><span class="p">.</span><span class="n">configConnection</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getConnId</span><span class="p">(</span><span class="n">targetDevice</span><span class="p">);</span>
</span><span id="__span-5-53"><a id="__codelineno-5-53" name="__codelineno-5-53" href="#__codelineno-5-53"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">BLE</span><span class="p">.</span><span class="n">connected</span><span class="p">(</span><span class="n">connID</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-54"><a id="__codelineno-5-54" name="__codelineno-5-54" href="#__codelineno-5-54"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;BLE not connected&quot;</span><span class="p">);</span>
</span><span id="__span-5-55"><a id="__codelineno-5-55" name="__codelineno-5-55" href="#__codelineno-5-55"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-56"><a id="__codelineno-5-56" name="__codelineno-5-56" href="#__codelineno-5-56"></a><span class="w">        </span><span class="n">BLE</span><span class="p">.</span><span class="n">configClient</span><span class="p">();</span>
</span><span id="__span-5-57"><a id="__codelineno-5-57" name="__codelineno-5-57" href="#__codelineno-5-57"></a><span class="w">        </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BLE</span><span class="p">.</span><span class="n">addClient</span><span class="p">(</span><span class="n">connID</span><span class="p">);</span>
</span><span id="__span-5-58"><a id="__codelineno-5-58" name="__codelineno-5-58" href="#__codelineno-5-58"></a><span class="w">        </span><span class="n">client</span><span class="o">-&gt;</span><span class="n">discoverServices</span><span class="p">();</span>
</span><span id="__span-5-59"><a id="__codelineno-5-59" name="__codelineno-5-59" href="#__codelineno-5-59"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Discovering services of connected device&quot;</span><span class="p">);</span>
</span><span id="__span-5-60"><a id="__codelineno-5-60" name="__codelineno-5-60" href="#__codelineno-5-60"></a><span class="w">        </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-61"><a id="__codelineno-5-61" name="__codelineno-5-61" href="#__codelineno-5-61"></a><span class="w">            </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">);</span>
</span><span id="__span-5-62"><a id="__codelineno-5-62" name="__codelineno-5-62" href="#__codelineno-5-62"></a><span class="w">            </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-5-63"><a id="__codelineno-5-63" name="__codelineno-5-63" href="#__codelineno-5-63"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">client</span><span class="o">-&gt;</span><span class="n">discoveryDone</span><span class="p">()));</span>
</span><span id="__span-5-64"><a id="__codelineno-5-64" name="__codelineno-5-64" href="#__codelineno-5-64"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
</span><span id="__span-5-65"><a id="__codelineno-5-65" name="__codelineno-5-65" href="#__codelineno-5-65"></a>
</span><span id="__span-5-66"><a id="__codelineno-5-66" name="__codelineno-5-66" href="#__codelineno-5-66"></a><span class="w">        </span><span class="n">UartService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="o">-&gt;</span><span class="n">getService</span><span class="p">(</span><span class="n">UART_SERVICE_UUID</span><span class="p">);</span>
</span><span id="__span-5-67"><a id="__codelineno-5-67" name="__codelineno-5-67" href="#__codelineno-5-67"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">UartService</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-68"><a id="__codelineno-5-68" name="__codelineno-5-68" href="#__codelineno-5-68"></a><span class="w">            </span><span class="n">Tx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UartService</span><span class="o">-&gt;</span><span class="n">getCharacteristic</span><span class="p">(</span><span class="n">CHARACTERISTIC_UUID_TX</span><span class="p">);</span>
</span><span id="__span-5-69"><a id="__codelineno-5-69" name="__codelineno-5-69" href="#__codelineno-5-69"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Tx</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-70"><a id="__codelineno-5-70" name="__codelineno-5-70" href="#__codelineno-5-70"></a><span class="w">                </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;TX characteristic found&quot;</span><span class="p">);</span>
</span><span id="__span-5-71"><a id="__codelineno-5-71" name="__codelineno-5-71" href="#__codelineno-5-71"></a><span class="w">                </span><span class="n">Tx</span><span class="o">-&gt;</span><span class="n">setBufferLen</span><span class="p">(</span><span class="n">STRING_BUF_SIZE</span><span class="p">);</span>
</span><span id="__span-5-72"><a id="__codelineno-5-72" name="__codelineno-5-72" href="#__codelineno-5-72"></a><span class="w">                </span><span class="n">Tx</span><span class="o">-&gt;</span><span class="n">setNotifyCallback</span><span class="p">(</span><span class="n">notificationCB</span><span class="p">);</span>
</span><span id="__span-5-73"><a id="__codelineno-5-73" name="__codelineno-5-73" href="#__codelineno-5-73"></a><span class="w">                </span><span class="n">Tx</span><span class="o">-&gt;</span><span class="n">enableNotifyIndicate</span><span class="p">();</span>
</span><span id="__span-5-74"><a id="__codelineno-5-74" name="__codelineno-5-74" href="#__codelineno-5-74"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-75"><a id="__codelineno-5-75" name="__codelineno-5-75" href="#__codelineno-5-75"></a><span class="w">            </span><span class="n">Rx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UartService</span><span class="o">-&gt;</span><span class="n">getCharacteristic</span><span class="p">(</span><span class="n">CHARACTERISTIC_UUID_RX</span><span class="p">);</span>
</span><span id="__span-5-76"><a id="__codelineno-5-76" name="__codelineno-5-76" href="#__codelineno-5-76"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Rx</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-77"><a id="__codelineno-5-77" name="__codelineno-5-77" href="#__codelineno-5-77"></a><span class="w">                </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;RX characteristic found&quot;</span><span class="p">);</span>
</span><span id="__span-5-78"><a id="__codelineno-5-78" name="__codelineno-5-78" href="#__codelineno-5-78"></a><span class="w">                </span><span class="n">Rx</span><span class="o">-&gt;</span><span class="n">setBufferLen</span><span class="p">(</span><span class="n">STRING_BUF_SIZE</span><span class="p">);</span>
</span><span id="__span-5-79"><a id="__codelineno-5-79" name="__codelineno-5-79" href="#__codelineno-5-79"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-5-80"><a id="__codelineno-5-80" name="__codelineno-5-80" href="#__codelineno-5-80"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-5-81"><a id="__codelineno-5-81" name="__codelineno-5-81" href="#__codelineno-5-81"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-82"><a id="__codelineno-5-82" name="__codelineno-5-82" href="#__codelineno-5-82"></a><span class="p">}</span>
</span><span id="__span-5-83"><a id="__codelineno-5-83" name="__codelineno-5-83" href="#__codelineno-5-83"></a>
</span><span id="__span-5-84"><a id="__codelineno-5-84" name="__codelineno-5-84" href="#__codelineno-5-84"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-85"><a id="__codelineno-5-85" name="__codelineno-5-85" href="#__codelineno-5-85"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-86"><a id="__codelineno-5-86" name="__codelineno-5-86" href="#__codelineno-5-86"></a><span class="w">        </span><span class="n">Rx</span><span class="o">-&gt;</span><span class="n">writeString</span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">readString</span><span class="p">());</span>
</span><span id="__span-5-87"><a id="__codelineno-5-87" name="__codelineno-5-87" href="#__codelineno-5-87"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-88"><a id="__codelineno-5-88" name="__codelineno-5-88" href="#__codelineno-5-88"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-5-89"><a id="__codelineno-5-89" name="__codelineno-5-89" href="#__codelineno-5-89"></a><span class="p">}</span>
</span></code></pre></div>
<p>To test, open the <a href="https://learn.sparkfun.com/tutorials/terminal-basics/arduino-serial-monitor-windows-mac-linux">Arduino Serial Monitor</a> for the client device on its respective COM port at <strong>115200</strong>. Then open a second serial terminal (in this case we used TeraTerm) for the previous service device on its respective COM port at <strong>115200</strong>. Type some characters and hit <strong>Send</strong> button from the client device. You should see the same characters received on the service device! Then try typing messages from the service to the client. Again, you should see the same characters on the other end. You may need to turn on the local echo depending on the terminal window that you are using.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/Arduino_NORA_W306_BLE_UART_Service_Output.JPG"><img src="../assets/img/Arduino_NORA_W306_BLE_UART_Service_Output.JPG" width="600px" height="600px" alt="BLE UART Service via Tera Term"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/Arduino_NORA_W306_BLE_UART_Client_Output.JPG"><img src="../assets/img/Arduino_NORA_W306_BLE_UART_Client_Output.JPG" width="600px" height="600px" alt="BLE UART Client via Arduino Serial Monitor"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>BLE UART Service via Tera Term</i></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>BLE UART Client via Arduino Serial Monitor</i></td>
    </tr>
  </table>
</div>

<h1 id="example-6-microsd-card">Example 6 - MicroSD Card<a class="headerlink" href="#example-6-microsd-card" title="Permanent link"></a></h1>
<p>In this example, we will write some text to a microSD card and read the contents of the text file for verification.</p>
<h3 id="hardware-hookup_6">Hardware Hookup<a class="headerlink" href="#hardware-hookup_6" title="Permanent link"></a></h3>
<p>Make sure to insert a microSD card into the microSD card socket on the back of the board.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_microSD_Card.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_microSD_Card.jpg" width="600px" height="600px" alt="MicroSD Card in Socket"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>MicroSD Card in Socket</i></td>
    </tr>
  </table>
</div>

<p>When ready, connect the board to your computer with the USB C cable.</p>
<h3 id="arduino-library">Arduino Library<a class="headerlink" href="#arduino-library" title="Permanent link"></a></h3>
<p>If you have not already, make sure to install the following library as explained earlier. Keep in mind there is more than one SdFat Arduino Library. We recommend using the SdFat Arduino Library by Bill Greiman.</p>
<ul>
<li><a href="https://github.com/greiman/SdFat">SdFat</a></li>
</ul>
<h3 id="arduino-code_5">Arduino Code<a class="headerlink" href="#arduino-code_5" title="Permanent link"></a></h3>
<p>Let&apos;s check your microSD card, write some text to a fill, and read hte contents of the file for verification</p>
<p>Copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Boards</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was COM13). Hit upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="cm">/*</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="cm">SparkFun Electronics</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="cm">7/17/2024</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="cm">SD card example for the SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="cm">Note, the SparkFun Thing Plus NORA-W306 does not use the SDIO hardware peripheral.</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="cm">It utilizes SPI0 to communicate with the uSD card.</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="cm">Using sdFAT and the onboard uSD socket (SPI0), this program attempts to:</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="cm">  1. Initialize an SD card and analyze its structure.</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a><span class="cm">  2. Create a file on the SD card and write a string to it.</span>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="cm">  3. Open the file and print the contents to the serial monitor.</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="cm">Hardware Hookup and Instructions:</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="cm">  Insert an SD card into the SD card slot on the NORA-W306.</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="cm">  Connect the NORA-W306 to your computer using a USB-C cable.</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="cm">  Upload this code to the NORA-W306.</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a><span class="cm">  Open the serial monitor to see the results.</span>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="cm">Software versions used in this example:</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a><span class="cm">  Arduino IDE 2.3.2</span>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="cm">  usdFAT by Bill Greiman, Arduino Library Version 2.2.3</span>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="cm">    (https://github.com/greiman/SdFat)</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="cm">  Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz) by Realtek Version 3.1.8</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a><span class="cm">    (https://github.com/ambiot/ambd_arduino)</span>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="cm">    (https://raw.githubusercontent.com/ambiot/ambd_arduino/dev/Arduino_package/package_realtek_amebad_early_index.json)</span>
</span><span id="__span-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
</span><span id="__span-6-39"><a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a>
</span><span id="__span-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="cm">Original code is from the following two examples in the SdFat library:</span>
</span><span id="__span-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a><span class="cm">  SdInfo - Program to read and display SD card information</span>
</span><span id="__span-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a><span class="cm">    -MIT License, Copyright (c) 2011..2020 Bill Greiman</span>
</span><span id="__span-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a><span class="cm">  examplesV1/ReadWrite - Program to test read and write functions</span>
</span><span id="__span-6-44"><a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="cm">    -Public Domain, created Nov 2010 by David A. Mellis, modified 9 Apr 2012 by Tom Igoe</span>
</span><span id="__span-6-45"><a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a>
</span><span id="__span-6-46"><a id="__codelineno-6-46" name="__codelineno-6-46" href="#__codelineno-6-46"></a>
</span><span id="__span-6-47"><a id="__codelineno-6-47" name="__codelineno-6-47" href="#__codelineno-6-47"></a><span class="cm">MIT License</span>
</span><span id="__span-6-48"><a id="__codelineno-6-48" name="__codelineno-6-48" href="#__codelineno-6-48"></a>
</span><span id="__span-6-49"><a id="__codelineno-6-49" name="__codelineno-6-49" href="#__codelineno-6-49"></a>
</span><span id="__span-6-50"><a id="__codelineno-6-50" name="__codelineno-6-50" href="#__codelineno-6-50"></a><span class="cm">Copyright (c) 2024 SparkFun Electronics</span>
</span><span id="__span-6-51"><a id="__codelineno-6-51" name="__codelineno-6-51" href="#__codelineno-6-51"></a>
</span><span id="__span-6-52"><a id="__codelineno-6-52" name="__codelineno-6-52" href="#__codelineno-6-52"></a>
</span><span id="__span-6-53"><a id="__codelineno-6-53" name="__codelineno-6-53" href="#__codelineno-6-53"></a><span class="cm">Permission is hereby granted, free of charge, to any person obtaining a copy of</span>
</span><span id="__span-6-54"><a id="__codelineno-6-54" name="__codelineno-6-54" href="#__codelineno-6-54"></a><span class="cm">this software and associated documentation files (the &quot;Software&quot;), to deal in the</span>
</span><span id="__span-6-55"><a id="__codelineno-6-55" name="__codelineno-6-55" href="#__codelineno-6-55"></a><span class="cm">Software without restriction, including without limitation the rights to use,</span>
</span><span id="__span-6-56"><a id="__codelineno-6-56" name="__codelineno-6-56" href="#__codelineno-6-56"></a><span class="cm">copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the</span>
</span><span id="__span-6-57"><a id="__codelineno-6-57" name="__codelineno-6-57" href="#__codelineno-6-57"></a><span class="cm">Software, and to permit persons to whom the Software is furnished to do so,</span>
</span><span id="__span-6-58"><a id="__codelineno-6-58" name="__codelineno-6-58" href="#__codelineno-6-58"></a><span class="cm">subject to the following conditions:</span>
</span><span id="__span-6-59"><a id="__codelineno-6-59" name="__codelineno-6-59" href="#__codelineno-6-59"></a>
</span><span id="__span-6-60"><a id="__codelineno-6-60" name="__codelineno-6-60" href="#__codelineno-6-60"></a>
</span><span id="__span-6-61"><a id="__codelineno-6-61" name="__codelineno-6-61" href="#__codelineno-6-61"></a><span class="cm">The above copyright notice and this permission notice shall be included in all</span>
</span><span id="__span-6-62"><a id="__codelineno-6-62" name="__codelineno-6-62" href="#__codelineno-6-62"></a><span class="cm">copies or substantial portions of the Software.</span>
</span><span id="__span-6-63"><a id="__codelineno-6-63" name="__codelineno-6-63" href="#__codelineno-6-63"></a>
</span><span id="__span-6-64"><a id="__codelineno-6-64" name="__codelineno-6-64" href="#__codelineno-6-64"></a>
</span><span id="__span-6-65"><a id="__codelineno-6-65" name="__codelineno-6-65" href="#__codelineno-6-65"></a><span class="cm">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,</span>
</span><span id="__span-6-66"><a id="__codelineno-6-66" name="__codelineno-6-66" href="#__codelineno-6-66"></a><span class="cm">INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A</span>
</span><span id="__span-6-67"><a id="__codelineno-6-67" name="__codelineno-6-67" href="#__codelineno-6-67"></a><span class="cm">PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</span>
</span><span id="__span-6-68"><a id="__codelineno-6-68" name="__codelineno-6-68" href="#__codelineno-6-68"></a><span class="cm">HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
</span><span id="__span-6-69"><a id="__codelineno-6-69" name="__codelineno-6-69" href="#__codelineno-6-69"></a><span class="cm">OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span>
</span><span id="__span-6-70"><a id="__codelineno-6-70" name="__codelineno-6-70" href="#__codelineno-6-70"></a><span class="cm">SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
</span><span id="__span-6-71"><a id="__codelineno-6-71" name="__codelineno-6-71" href="#__codelineno-6-71"></a><span class="cm">*/</span>
</span><span id="__span-6-72"><a id="__codelineno-6-72" name="__codelineno-6-72" href="#__codelineno-6-72"></a>
</span><span id="__span-6-73"><a id="__codelineno-6-73" name="__codelineno-6-73" href="#__codelineno-6-73"></a>
</span><span id="__span-6-74"><a id="__codelineno-6-74" name="__codelineno-6-74" href="#__codelineno-6-74"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;SdFat.h&quot;</span>
</span><span id="__span-6-75"><a id="__codelineno-6-75" name="__codelineno-6-75" href="#__codelineno-6-75"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;sdios.h&quot;</span>
</span><span id="__span-6-76"><a id="__codelineno-6-76" name="__codelineno-6-76" href="#__codelineno-6-76"></a>
</span><span id="__span-6-77"><a id="__codelineno-6-77" name="__codelineno-6-77" href="#__codelineno-6-77"></a>
</span><span id="__span-6-78"><a id="__codelineno-6-78" name="__codelineno-6-78" href="#__codelineno-6-78"></a><span class="n">File</span><span class="w"> </span><span class="n">myFile</span><span class="p">;</span>
</span><span id="__span-6-79"><a id="__codelineno-6-79" name="__codelineno-6-79" href="#__codelineno-6-79"></a>
</span><span id="__span-6-80"><a id="__codelineno-6-80" name="__codelineno-6-80" href="#__codelineno-6-80"></a>
</span><span id="__span-6-81"><a id="__codelineno-6-81" name="__codelineno-6-81" href="#__codelineno-6-81"></a><span class="cm">/*</span>
</span><span id="__span-6-82"><a id="__codelineno-6-82" name="__codelineno-6-82" href="#__codelineno-6-82"></a><span class="cm">  Set DISABLE_CS_PIN to disable a second SPI device.</span>
</span><span id="__span-6-83"><a id="__codelineno-6-83" name="__codelineno-6-83" href="#__codelineno-6-83"></a><span class="cm">  For example, with the Ethernet shield, set DISABLE_CS_PIN</span>
</span><span id="__span-6-84"><a id="__codelineno-6-84" name="__codelineno-6-84" href="#__codelineno-6-84"></a><span class="cm">  to 10 to disable the Ethernet controller.</span>
</span><span id="__span-6-85"><a id="__codelineno-6-85" name="__codelineno-6-85" href="#__codelineno-6-85"></a><span class="cm">*/</span>
</span><span id="__span-6-86"><a id="__codelineno-6-86" name="__codelineno-6-86" href="#__codelineno-6-86"></a><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">DISABLE_CS_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
</span><span id="__span-6-87"><a id="__codelineno-6-87" name="__codelineno-6-87" href="#__codelineno-6-87"></a><span class="cm">/*</span>
</span><span id="__span-6-88"><a id="__codelineno-6-88" name="__codelineno-6-88" href="#__codelineno-6-88"></a><span class="cm">  Change the value of SD_CS_PIN if you are using SPI</span>
</span><span id="__span-6-89"><a id="__codelineno-6-89" name="__codelineno-6-89" href="#__codelineno-6-89"></a><span class="cm">  and your hardware does not use the default value, SS.</span>
</span><span id="__span-6-90"><a id="__codelineno-6-90" name="__codelineno-6-90" href="#__codelineno-6-90"></a><span class="cm">  Common values are:</span>
</span><span id="__span-6-91"><a id="__codelineno-6-91" name="__codelineno-6-91" href="#__codelineno-6-91"></a><span class="cm">  Arduino Ethernet shield: pin 4</span>
</span><span id="__span-6-92"><a id="__codelineno-6-92" name="__codelineno-6-92" href="#__codelineno-6-92"></a><span class="cm">  Sparkfun SD shield: pin 8</span>
</span><span id="__span-6-93"><a id="__codelineno-6-93" name="__codelineno-6-93" href="#__codelineno-6-93"></a><span class="cm">  Adafruit SD shields and modules: pin 10</span>
</span><span id="__span-6-94"><a id="__codelineno-6-94" name="__codelineno-6-94" href="#__codelineno-6-94"></a><span class="cm">  SparkFun Thing Plus NORA-W306: Arduino pin 4 (aka SS/PB_21/SPI0_CS)</span>
</span><span id="__span-6-95"><a id="__codelineno-6-95" name="__codelineno-6-95" href="#__codelineno-6-95"></a><span class="cm">*/</span>
</span><span id="__span-6-96"><a id="__codelineno-6-96" name="__codelineno-6-96" href="#__codelineno-6-96"></a><span class="c1">// SDCARD_SS_PIN is defined for the built-in SD on some boards.</span>
</span><span id="__span-6-97"><a id="__codelineno-6-97" name="__codelineno-6-97" href="#__codelineno-6-97"></a><span class="cp">#ifndef SDCARD_SS_PIN</span>
</span><span id="__span-6-98"><a id="__codelineno-6-98" name="__codelineno-6-98" href="#__codelineno-6-98"></a><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">SD_CS_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SS</span><span class="p">;</span>
</span><span id="__span-6-99"><a id="__codelineno-6-99" name="__codelineno-6-99" href="#__codelineno-6-99"></a><span class="cp">#else   </span><span class="c1">// SDCARD_SS_PIN</span>
</span><span id="__span-6-100"><a id="__codelineno-6-100" name="__codelineno-6-100" href="#__codelineno-6-100"></a><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">SD_CS_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SDCARD_SS_PIN</span><span class="p">;</span>
</span><span id="__span-6-101"><a id="__codelineno-6-101" name="__codelineno-6-101" href="#__codelineno-6-101"></a><span class="cp">#endif  </span><span class="c1">// SDCARD_SS_PIN</span>
</span><span id="__span-6-102"><a id="__codelineno-6-102" name="__codelineno-6-102" href="#__codelineno-6-102"></a>
</span><span id="__span-6-103"><a id="__codelineno-6-103" name="__codelineno-6-103" href="#__codelineno-6-103"></a>
</span><span id="__span-6-104"><a id="__codelineno-6-104" name="__codelineno-6-104" href="#__codelineno-6-104"></a><span class="c1">// Try to select the best SD card configuration.</span>
</span><span id="__span-6-105"><a id="__codelineno-6-105" name="__codelineno-6-105" href="#__codelineno-6-105"></a><span class="cp">#if HAS_SDIO_CLASS</span>
</span><span id="__span-6-106"><a id="__codelineno-6-106" name="__codelineno-6-106" href="#__codelineno-6-106"></a><span class="cp">#define SD_CONFIG SdioConfig(FIFO_SDIO)</span>
</span><span id="__span-6-107"><a id="__codelineno-6-107" name="__codelineno-6-107" href="#__codelineno-6-107"></a><span class="cp">#elif ENABLE_DEDICATED_SPI</span>
</span><span id="__span-6-108"><a id="__codelineno-6-108" name="__codelineno-6-108" href="#__codelineno-6-108"></a><span class="cp">#define SD_CONFIG SdSpiConfig(SD_CS_PIN, DEDICATED_SPI, SD_SCK_MHZ(16))</span>
</span><span id="__span-6-109"><a id="__codelineno-6-109" name="__codelineno-6-109" href="#__codelineno-6-109"></a><span class="cp">#else  </span><span class="c1">// HAS_SDIO_CLASS</span>
</span><span id="__span-6-110"><a id="__codelineno-6-110" name="__codelineno-6-110" href="#__codelineno-6-110"></a><span class="cp">#define SD_CONFIG SdSpiConfig(SD_CS_PIN, SHARED_SPI, SD_SCK_MHZ(16))</span>
</span><span id="__span-6-111"><a id="__codelineno-6-111" name="__codelineno-6-111" href="#__codelineno-6-111"></a><span class="cp">#endif  </span><span class="c1">// HAS_SDIO_CLASS</span>
</span><span id="__span-6-112"><a id="__codelineno-6-112" name="__codelineno-6-112" href="#__codelineno-6-112"></a>
</span><span id="__span-6-113"><a id="__codelineno-6-113" name="__codelineno-6-113" href="#__codelineno-6-113"></a>
</span><span id="__span-6-114"><a id="__codelineno-6-114" name="__codelineno-6-114" href="#__codelineno-6-114"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-115"><a id="__codelineno-6-115" name="__codelineno-6-115" href="#__codelineno-6-115"></a><span class="n">SdFs</span><span class="w"> </span><span class="n">sd</span><span class="p">;</span>
</span><span id="__span-6-116"><a id="__codelineno-6-116" name="__codelineno-6-116" href="#__codelineno-6-116"></a><span class="n">cid_t</span><span class="w"> </span><span class="n">cid</span><span class="p">;</span>
</span><span id="__span-6-117"><a id="__codelineno-6-117" name="__codelineno-6-117" href="#__codelineno-6-117"></a><span class="n">csd_t</span><span class="w"> </span><span class="n">csd</span><span class="p">;</span>
</span><span id="__span-6-118"><a id="__codelineno-6-118" name="__codelineno-6-118" href="#__codelineno-6-118"></a><span class="n">scr_t</span><span class="w"> </span><span class="n">scr</span><span class="p">;</span>
</span><span id="__span-6-119"><a id="__codelineno-6-119" name="__codelineno-6-119" href="#__codelineno-6-119"></a><span class="kt">uint8_t</span><span class="w"> </span><span class="n">cmd6Data</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
</span><span id="__span-6-120"><a id="__codelineno-6-120" name="__codelineno-6-120" href="#__codelineno-6-120"></a><span class="kt">uint32_t</span><span class="w"> </span><span class="n">eraseSize</span><span class="p">;</span>
</span><span id="__span-6-121"><a id="__codelineno-6-121" name="__codelineno-6-121" href="#__codelineno-6-121"></a><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ocr</span><span class="p">;</span>
</span><span id="__span-6-122"><a id="__codelineno-6-122" name="__codelineno-6-122" href="#__codelineno-6-122"></a><span class="k">static</span><span class="w"> </span><span class="n">ArduinoOutStream</span><span class="w"> </span><span class="nf">cout</span><span class="p">(</span><span class="n">Serial</span><span class="p">);</span>
</span><span id="__span-6-123"><a id="__codelineno-6-123" name="__codelineno-6-123" href="#__codelineno-6-123"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-124"><a id="__codelineno-6-124" name="__codelineno-6-124" href="#__codelineno-6-124"></a><span class="kt">void</span><span class="w"> </span><span class="nf">cidDmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-125"><a id="__codelineno-6-125" name="__codelineno-6-125" href="#__codelineno-6-125"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Manufacturer ID: &quot;</span><span class="p">);</span>
</span><span id="__span-6-126"><a id="__codelineno-6-126" name="__codelineno-6-126" href="#__codelineno-6-126"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">cid</span><span class="p">.</span><span class="n">mid</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-127"><a id="__codelineno-6-127" name="__codelineno-6-127" href="#__codelineno-6-127"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;OEM ID: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">oid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">oid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-128"><a id="__codelineno-6-128" name="__codelineno-6-128" href="#__codelineno-6-128"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Product: &quot;</span><span class="p">);</span>
</span><span id="__span-6-129"><a id="__codelineno-6-129" name="__codelineno-6-129" href="#__codelineno-6-129"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-130"><a id="__codelineno-6-130" name="__codelineno-6-130" href="#__codelineno-6-130"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">pnm</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-6-131"><a id="__codelineno-6-131" name="__codelineno-6-131" href="#__codelineno-6-131"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-132"><a id="__codelineno-6-132" name="__codelineno-6-132" href="#__codelineno-6-132"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Revision: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">prvN</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">prvM</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-133"><a id="__codelineno-6-133" name="__codelineno-6-133" href="#__codelineno-6-133"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Serial number: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">psn</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-134"><a id="__codelineno-6-134" name="__codelineno-6-134" href="#__codelineno-6-134"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Manufacturing date: &quot;</span><span class="p">);</span>
</span><span id="__span-6-135"><a id="__codelineno-6-135" name="__codelineno-6-135" href="#__codelineno-6-135"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">mdtMonth</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">mdtYear</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-136"><a id="__codelineno-6-136" name="__codelineno-6-136" href="#__codelineno-6-136"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-137"><a id="__codelineno-6-137" name="__codelineno-6-137" href="#__codelineno-6-137"></a><span class="p">}</span>
</span><span id="__span-6-138"><a id="__codelineno-6-138" name="__codelineno-6-138" href="#__codelineno-6-138"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-139"><a id="__codelineno-6-139" name="__codelineno-6-139" href="#__codelineno-6-139"></a><span class="kt">void</span><span class="w"> </span><span class="nf">clearSerialInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-140"><a id="__codelineno-6-140" name="__codelineno-6-140" href="#__codelineno-6-140"></a><span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">micros</span><span class="p">();</span>
</span><span id="__span-6-141"><a id="__codelineno-6-141" name="__codelineno-6-141" href="#__codelineno-6-141"></a><span class="w">  </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-142"><a id="__codelineno-6-142" name="__codelineno-6-142" href="#__codelineno-6-142"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-143"><a id="__codelineno-6-143" name="__codelineno-6-143" href="#__codelineno-6-143"></a><span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">micros</span><span class="p">();</span>
</span><span id="__span-6-144"><a id="__codelineno-6-144" name="__codelineno-6-144" href="#__codelineno-6-144"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-145"><a id="__codelineno-6-145" name="__codelineno-6-145" href="#__codelineno-6-145"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">micros</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10000</span><span class="p">);</span>
</span><span id="__span-6-146"><a id="__codelineno-6-146" name="__codelineno-6-146" href="#__codelineno-6-146"></a><span class="p">}</span>
</span><span id="__span-6-147"><a id="__codelineno-6-147" name="__codelineno-6-147" href="#__codelineno-6-147"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-148"><a id="__codelineno-6-148" name="__codelineno-6-148" href="#__codelineno-6-148"></a><span class="kt">void</span><span class="w"> </span><span class="nf">csdDmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-149"><a id="__codelineno-6-149" name="__codelineno-6-149" href="#__codelineno-6-149"></a><span class="w">  </span><span class="n">eraseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">csd</span><span class="p">.</span><span class="n">eraseSize</span><span class="p">();</span>
</span><span id="__span-6-150"><a id="__codelineno-6-150" name="__codelineno-6-150" href="#__codelineno-6-150"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;cardSize: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mf">0.000512</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">csd</span><span class="p">.</span><span class="n">capacity</span><span class="p">();</span>
</span><span id="__span-6-151"><a id="__codelineno-6-151" name="__codelineno-6-151" href="#__codelineno-6-151"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot; MB (MB = 1,000,000 bytes)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-152"><a id="__codelineno-6-152" name="__codelineno-6-152" href="#__codelineno-6-152"></a>
</span><span id="__span-6-153"><a id="__codelineno-6-153" name="__codelineno-6-153" href="#__codelineno-6-153"></a>
</span><span id="__span-6-154"><a id="__codelineno-6-154" name="__codelineno-6-154" href="#__codelineno-6-154"></a>
</span><span id="__span-6-155"><a id="__codelineno-6-155" name="__codelineno-6-155" href="#__codelineno-6-155"></a>
</span><span id="__span-6-156"><a id="__codelineno-6-156" name="__codelineno-6-156" href="#__codelineno-6-156"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;flashEraseSize: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">eraseSize</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot; blocks</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-157"><a id="__codelineno-6-157" name="__codelineno-6-157" href="#__codelineno-6-157"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;eraseSingleBlock: &quot;</span><span class="p">);</span>
</span><span id="__span-6-158"><a id="__codelineno-6-158" name="__codelineno-6-158" href="#__codelineno-6-158"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">csd</span><span class="p">.</span><span class="n">eraseSingleBlock</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-159"><a id="__codelineno-6-159" name="__codelineno-6-159" href="#__codelineno-6-159"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;true</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-160"><a id="__codelineno-6-160" name="__codelineno-6-160" href="#__codelineno-6-160"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-161"><a id="__codelineno-6-161" name="__codelineno-6-161" href="#__codelineno-6-161"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;false</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-162"><a id="__codelineno-6-162" name="__codelineno-6-162" href="#__codelineno-6-162"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-163"><a id="__codelineno-6-163" name="__codelineno-6-163" href="#__codelineno-6-163"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;dataAfterErase: &quot;</span><span class="p">);</span>
</span><span id="__span-6-164"><a id="__codelineno-6-164" name="__codelineno-6-164" href="#__codelineno-6-164"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">scr</span><span class="p">.</span><span class="n">dataAfterErase</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-165"><a id="__codelineno-6-165" name="__codelineno-6-165" href="#__codelineno-6-165"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;ones</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-166"><a id="__codelineno-6-166" name="__codelineno-6-166" href="#__codelineno-6-166"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-167"><a id="__codelineno-6-167" name="__codelineno-6-167" href="#__codelineno-6-167"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;zeros</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-168"><a id="__codelineno-6-168" name="__codelineno-6-168" href="#__codelineno-6-168"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-169"><a id="__codelineno-6-169" name="__codelineno-6-169" href="#__codelineno-6-169"></a><span class="p">}</span>
</span><span id="__span-6-170"><a id="__codelineno-6-170" name="__codelineno-6-170" href="#__codelineno-6-170"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-171"><a id="__codelineno-6-171" name="__codelineno-6-171" href="#__codelineno-6-171"></a><span class="kt">void</span><span class="w"> </span><span class="nf">errorPrint</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-172"><a id="__codelineno-6-172" name="__codelineno-6-172" href="#__codelineno-6-172"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorCode</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-173"><a id="__codelineno-6-173" name="__codelineno-6-173" href="#__codelineno-6-173"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD errorCode: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="p">;</span>
</span><span id="__span-6-174"><a id="__codelineno-6-174" name="__codelineno-6-174" href="#__codelineno-6-174"></a><span class="w">    </span><span class="n">printSdErrorSymbol</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Serial</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorCode</span><span class="p">());</span>
</span><span id="__span-6-175"><a id="__codelineno-6-175" name="__codelineno-6-175" href="#__codelineno-6-175"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot; = &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorCode</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-176"><a id="__codelineno-6-176" name="__codelineno-6-176" href="#__codelineno-6-176"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD errorData = &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorData</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-177"><a id="__codelineno-6-177" name="__codelineno-6-177" href="#__codelineno-6-177"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-178"><a id="__codelineno-6-178" name="__codelineno-6-178" href="#__codelineno-6-178"></a><span class="p">}</span>
</span><span id="__span-6-179"><a id="__codelineno-6-179" name="__codelineno-6-179" href="#__codelineno-6-179"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-180"><a id="__codelineno-6-180" name="__codelineno-6-180" href="#__codelineno-6-180"></a><span class="kt">bool</span><span class="w"> </span><span class="nf">mbrDmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-181"><a id="__codelineno-6-181" name="__codelineno-6-181" href="#__codelineno-6-181"></a><span class="w">  </span><span class="n">MbrSector_t</span><span class="w"> </span><span class="n">mbr</span><span class="p">;</span>
</span><span id="__span-6-182"><a id="__codelineno-6-182" name="__codelineno-6-182" href="#__codelineno-6-182"></a><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><span id="__span-6-183"><a id="__codelineno-6-183" name="__codelineno-6-183" href="#__codelineno-6-183"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readSector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mbr</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-184"><a id="__codelineno-6-184" name="__codelineno-6-184" href="#__codelineno-6-184"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">read MBR failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-185"><a id="__codelineno-6-185" name="__codelineno-6-185" href="#__codelineno-6-185"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-6-186"><a id="__codelineno-6-186" name="__codelineno-6-186" href="#__codelineno-6-186"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-6-187"><a id="__codelineno-6-187" name="__codelineno-6-187" href="#__codelineno-6-187"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-188"><a id="__codelineno-6-188" name="__codelineno-6-188" href="#__codelineno-6-188"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">SD Partition Table</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-189"><a id="__codelineno-6-189" name="__codelineno-6-189" href="#__codelineno-6-189"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;part,boot,bgnCHS[3],type,endCHS[3],start,length</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-190"><a id="__codelineno-6-190" name="__codelineno-6-190" href="#__codelineno-6-190"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">ip</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-191"><a id="__codelineno-6-191" name="__codelineno-6-191" href="#__codelineno-6-191"></a><span class="w">    </span><span class="n">MbrPart_t</span><span class="w"> </span><span class="o">*</span><span class="n">pt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mbr</span><span class="p">.</span><span class="n">part</span><span class="p">[</span><span class="n">ip</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-6-192"><a id="__codelineno-6-192" name="__codelineno-6-192" href="#__codelineno-6-192"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">boot</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">boot</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mh">0X80</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">getLe32</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">relativeSectors</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">csd</span><span class="p">.</span><span class="n">capacity</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-193"><a id="__codelineno-6-193" name="__codelineno-6-193" href="#__codelineno-6-193"></a><span class="w">      </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-6-194"><a id="__codelineno-6-194" name="__codelineno-6-194" href="#__codelineno-6-194"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-195"><a id="__codelineno-6-195" name="__codelineno-6-195" href="#__codelineno-6-195"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="p">;</span>
</span><span id="__span-6-196"><a id="__codelineno-6-196" name="__codelineno-6-196" href="#__codelineno-6-196"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">boot</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-6-197"><a id="__codelineno-6-197" name="__codelineno-6-197" href="#__codelineno-6-197"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-198"><a id="__codelineno-6-198" name="__codelineno-6-198" href="#__codelineno-6-198"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">beginCHS</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-6-199"><a id="__codelineno-6-199" name="__codelineno-6-199" href="#__codelineno-6-199"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-200"><a id="__codelineno-6-200" name="__codelineno-6-200" href="#__codelineno-6-200"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-6-201"><a id="__codelineno-6-201" name="__codelineno-6-201" href="#__codelineno-6-201"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-202"><a id="__codelineno-6-202" name="__codelineno-6-202" href="#__codelineno-6-202"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">endCHS</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-6-203"><a id="__codelineno-6-203" name="__codelineno-6-203" href="#__codelineno-6-203"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-204"><a id="__codelineno-6-204" name="__codelineno-6-204" href="#__codelineno-6-204"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">getLe32</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">relativeSectors</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-6-205"><a id="__codelineno-6-205" name="__codelineno-6-205" href="#__codelineno-6-205"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">getLe32</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">totalSectors</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-206"><a id="__codelineno-6-206" name="__codelineno-6-206" href="#__codelineno-6-206"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-207"><a id="__codelineno-6-207" name="__codelineno-6-207" href="#__codelineno-6-207"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">valid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-208"><a id="__codelineno-6-208" name="__codelineno-6-208" href="#__codelineno-6-208"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">MBR not valid, assuming Super Floppy format.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-209"><a id="__codelineno-6-209" name="__codelineno-6-209" href="#__codelineno-6-209"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-210"><a id="__codelineno-6-210" name="__codelineno-6-210" href="#__codelineno-6-210"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><span id="__span-6-211"><a id="__codelineno-6-211" name="__codelineno-6-211" href="#__codelineno-6-211"></a><span class="p">}</span>
</span><span id="__span-6-212"><a id="__codelineno-6-212" name="__codelineno-6-212" href="#__codelineno-6-212"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-213"><a id="__codelineno-6-213" name="__codelineno-6-213" href="#__codelineno-6-213"></a><span class="kt">void</span><span class="w"> </span><span class="nf">dmpVol</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-214"><a id="__codelineno-6-214" name="__codelineno-6-214" href="#__codelineno-6-214"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Scanning FAT, please wait.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-215"><a id="__codelineno-6-215" name="__codelineno-6-215" href="#__codelineno-6-215"></a><span class="w">  </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">freeClusterCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">freeClusterCount</span><span class="p">();</span>
</span><span id="__span-6-216"><a id="__codelineno-6-216" name="__codelineno-6-216" href="#__codelineno-6-216"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">fatType</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-217"><a id="__codelineno-6-217" name="__codelineno-6-217" href="#__codelineno-6-217"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Volume is FAT&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">fatType</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-218"><a id="__codelineno-6-218" name="__codelineno-6-218" href="#__codelineno-6-218"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-219"><a id="__codelineno-6-219" name="__codelineno-6-219" href="#__codelineno-6-219"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Volume is exFAT</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-220"><a id="__codelineno-6-220" name="__codelineno-6-220" href="#__codelineno-6-220"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-221"><a id="__codelineno-6-221" name="__codelineno-6-221" href="#__codelineno-6-221"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;sectorsPerCluster: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">sectorsPerCluster</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-222"><a id="__codelineno-6-222" name="__codelineno-6-222" href="#__codelineno-6-222"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;fatStartSector:    &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">fatStartSector</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-223"><a id="__codelineno-6-223" name="__codelineno-6-223" href="#__codelineno-6-223"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;dataStartSector:   &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">dataStartSector</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-224"><a id="__codelineno-6-224" name="__codelineno-6-224" href="#__codelineno-6-224"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;clusterCount:      &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">clusterCount</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-225"><a id="__codelineno-6-225" name="__codelineno-6-225" href="#__codelineno-6-225"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;freeClusterCount:  &quot;</span><span class="p">);</span>
</span><span id="__span-6-226"><a id="__codelineno-6-226" name="__codelineno-6-226" href="#__codelineno-6-226"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">freeClusterCount</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-227"><a id="__codelineno-6-227" name="__codelineno-6-227" href="#__codelineno-6-227"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">freeClusterCount</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-228"><a id="__codelineno-6-228" name="__codelineno-6-228" href="#__codelineno-6-228"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-229"><a id="__codelineno-6-229" name="__codelineno-6-229" href="#__codelineno-6-229"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-230"><a id="__codelineno-6-230" name="__codelineno-6-230" href="#__codelineno-6-230"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-6-231"><a id="__codelineno-6-231" name="__codelineno-6-231" href="#__codelineno-6-231"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-232"><a id="__codelineno-6-232" name="__codelineno-6-232" href="#__codelineno-6-232"></a><span class="p">}</span>
</span><span id="__span-6-233"><a id="__codelineno-6-233" name="__codelineno-6-233" href="#__codelineno-6-233"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-234"><a id="__codelineno-6-234" name="__codelineno-6-234" href="#__codelineno-6-234"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printCardType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-235"><a id="__codelineno-6-235" name="__codelineno-6-235" href="#__codelineno-6-235"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Card type: &quot;</span><span class="p">);</span>
</span><span id="__span-6-236"><a id="__codelineno-6-236" name="__codelineno-6-236" href="#__codelineno-6-236"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-237"><a id="__codelineno-6-237" name="__codelineno-6-237" href="#__codelineno-6-237"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">SD_CARD_TYPE_SD1</span><span class="p">:</span>
</span><span id="__span-6-238"><a id="__codelineno-6-238" name="__codelineno-6-238" href="#__codelineno-6-238"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-239"><a id="__codelineno-6-239" name="__codelineno-6-239" href="#__codelineno-6-239"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-6-240"><a id="__codelineno-6-240" name="__codelineno-6-240" href="#__codelineno-6-240"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">SD_CARD_TYPE_SD2</span><span class="p">:</span>
</span><span id="__span-6-241"><a id="__codelineno-6-241" name="__codelineno-6-241" href="#__codelineno-6-241"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-242"><a id="__codelineno-6-242" name="__codelineno-6-242" href="#__codelineno-6-242"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-6-243"><a id="__codelineno-6-243" name="__codelineno-6-243" href="#__codelineno-6-243"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">SD_CARD_TYPE_SDHC</span><span class="p">:</span>
</span><span id="__span-6-244"><a id="__codelineno-6-244" name="__codelineno-6-244" href="#__codelineno-6-244"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">csd</span><span class="p">.</span><span class="n">capacity</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">70000000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-245"><a id="__codelineno-6-245" name="__codelineno-6-245" href="#__codelineno-6-245"></a><span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SDHC</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-246"><a id="__codelineno-6-246" name="__codelineno-6-246" href="#__codelineno-6-246"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-247"><a id="__codelineno-6-247" name="__codelineno-6-247" href="#__codelineno-6-247"></a><span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SDXC</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-248"><a id="__codelineno-6-248" name="__codelineno-6-248" href="#__codelineno-6-248"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-6-249"><a id="__codelineno-6-249" name="__codelineno-6-249" href="#__codelineno-6-249"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-6-250"><a id="__codelineno-6-250" name="__codelineno-6-250" href="#__codelineno-6-250"></a><span class="w">    </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-6-251"><a id="__codelineno-6-251" name="__codelineno-6-251" href="#__codelineno-6-251"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Unknown</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-252"><a id="__codelineno-6-252" name="__codelineno-6-252" href="#__codelineno-6-252"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-253"><a id="__codelineno-6-253" name="__codelineno-6-253" href="#__codelineno-6-253"></a><span class="p">}</span>
</span><span id="__span-6-254"><a id="__codelineno-6-254" name="__codelineno-6-254" href="#__codelineno-6-254"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-255"><a id="__codelineno-6-255" name="__codelineno-6-255" href="#__codelineno-6-255"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printConfig</span><span class="p">(</span><span class="n">SdSpiConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-256"><a id="__codelineno-6-256" name="__codelineno-6-256" href="#__codelineno-6-256"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-257"><a id="__codelineno-6-257" name="__codelineno-6-257" href="#__codelineno-6-257"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span>
</span><span id="__span-6-258"><a id="__codelineno-6-258" name="__codelineno-6-258" href="#__codelineno-6-258"></a><span class="w">      </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Assuming the SD is the only SPI device.</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-6-259"><a id="__codelineno-6-259" name="__codelineno-6-259" href="#__codelineno-6-259"></a><span class="w">      </span><span class="s">&quot;Edit DISABLE_CS_PIN to disable an SPI device.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-260"><a id="__codelineno-6-260" name="__codelineno-6-260" href="#__codelineno-6-260"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-261"><a id="__codelineno-6-261" name="__codelineno-6-261" href="#__codelineno-6-261"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Disabling SPI device on pin &quot;</span><span class="p">);</span>
</span><span id="__span-6-262"><a id="__codelineno-6-262" name="__codelineno-6-262" href="#__codelineno-6-262"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-263"><a id="__codelineno-6-263" name="__codelineno-6-263" href="#__codelineno-6-263"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>
</span><span id="__span-6-264"><a id="__codelineno-6-264" name="__codelineno-6-264" href="#__codelineno-6-264"></a><span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span>
</span><span id="__span-6-265"><a id="__codelineno-6-265" name="__codelineno-6-265" href="#__codelineno-6-265"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-266"><a id="__codelineno-6-266" name="__codelineno-6-266" href="#__codelineno-6-266"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Assuming the SD chip select pin is: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">csPin</span><span class="p">);</span>
</span><span id="__span-6-267"><a id="__codelineno-6-267" name="__codelineno-6-267" href="#__codelineno-6-267"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Edit SD_CS_PIN to change the SD chip select pin.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-268"><a id="__codelineno-6-268" name="__codelineno-6-268" href="#__codelineno-6-268"></a><span class="p">}</span>
</span><span id="__span-6-269"><a id="__codelineno-6-269" name="__codelineno-6-269" href="#__codelineno-6-269"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-270"><a id="__codelineno-6-270" name="__codelineno-6-270" href="#__codelineno-6-270"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printConfig</span><span class="p">(</span><span class="n">SdioConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-271"><a id="__codelineno-6-271" name="__codelineno-6-271" href="#__codelineno-6-271"></a><span class="w">  </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">config</span><span class="p">;</span>
</span><span id="__span-6-272"><a id="__codelineno-6-272" name="__codelineno-6-272" href="#__codelineno-6-272"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Assuming an SDIO interface.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-273"><a id="__codelineno-6-273" name="__codelineno-6-273" href="#__codelineno-6-273"></a><span class="p">}</span>
</span><span id="__span-6-274"><a id="__codelineno-6-274" name="__codelineno-6-274" href="#__codelineno-6-274"></a><span class="c1">//-----------------------------------------------------------------------------</span>
</span><span id="__span-6-275"><a id="__codelineno-6-275" name="__codelineno-6-275" href="#__codelineno-6-275"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-276"><a id="__codelineno-6-276" name="__codelineno-6-276" href="#__codelineno-6-276"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
</span><span id="__span-6-277"><a id="__codelineno-6-277" name="__codelineno-6-277" href="#__codelineno-6-277"></a><span class="w">  </span><span class="c1">// Wait for USB Serial</span>
</span><span id="__span-6-278"><a id="__codelineno-6-278" name="__codelineno-6-278" href="#__codelineno-6-278"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-279"><a id="__codelineno-6-279" name="__codelineno-6-279" href="#__codelineno-6-279"></a><span class="w">    </span><span class="n">yield</span><span class="p">();</span>
</span><span id="__span-6-280"><a id="__codelineno-6-280" name="__codelineno-6-280" href="#__codelineno-6-280"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-281"><a id="__codelineno-6-281" name="__codelineno-6-281" href="#__codelineno-6-281"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SdFat version: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">SD_FAT_VERSION_STR</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-282"><a id="__codelineno-6-282" name="__codelineno-6-282" href="#__codelineno-6-282"></a><span class="w">  </span><span class="n">printConfig</span><span class="p">(</span><span class="n">SD_CONFIG</span><span class="p">);</span>
</span><span id="__span-6-283"><a id="__codelineno-6-283" name="__codelineno-6-283" href="#__codelineno-6-283"></a><span class="p">}</span>
</span><span id="__span-6-284"><a id="__codelineno-6-284" name="__codelineno-6-284" href="#__codelineno-6-284"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-285"><a id="__codelineno-6-285" name="__codelineno-6-285" href="#__codelineno-6-285"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-286"><a id="__codelineno-6-286" name="__codelineno-6-286" href="#__codelineno-6-286"></a><span class="w">  </span><span class="c1">// Read any existing Serial data.</span>
</span><span id="__span-6-287"><a id="__codelineno-6-287" name="__codelineno-6-287" href="#__codelineno-6-287"></a><span class="w">  </span><span class="n">clearSerialInput</span><span class="p">();</span>
</span><span id="__span-6-288"><a id="__codelineno-6-288" name="__codelineno-6-288" href="#__codelineno-6-288"></a>
</span><span id="__span-6-289"><a id="__codelineno-6-289" name="__codelineno-6-289" href="#__codelineno-6-289"></a>
</span><span id="__span-6-290"><a id="__codelineno-6-290" name="__codelineno-6-290" href="#__codelineno-6-290"></a><span class="w">  </span><span class="c1">// F stores strings in flash to save RAM</span>
</span><span id="__span-6-291"><a id="__codelineno-6-291" name="__codelineno-6-291" href="#__codelineno-6-291"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">type any character to start</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-292"><a id="__codelineno-6-292" name="__codelineno-6-292" href="#__codelineno-6-292"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-293"><a id="__codelineno-6-293" name="__codelineno-6-293" href="#__codelineno-6-293"></a><span class="w">    </span><span class="n">yield</span><span class="p">();</span>
</span><span id="__span-6-294"><a id="__codelineno-6-294" name="__codelineno-6-294" href="#__codelineno-6-294"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-295"><a id="__codelineno-6-295" name="__codelineno-6-295" href="#__codelineno-6-295"></a><span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">millis</span><span class="p">();</span>
</span><span id="__span-6-296"><a id="__codelineno-6-296" name="__codelineno-6-296" href="#__codelineno-6-296"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">cardBegin</span><span class="p">(</span><span class="n">SD_CONFIG</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-297"><a id="__codelineno-6-297" name="__codelineno-6-297" href="#__codelineno-6-297"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span>
</span><span id="__span-6-298"><a id="__codelineno-6-298" name="__codelineno-6-298" href="#__codelineno-6-298"></a><span class="w">      </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">SD initialization failed.</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-6-299"><a id="__codelineno-6-299" name="__codelineno-6-299" href="#__codelineno-6-299"></a><span class="w">      </span><span class="s">&quot;Do not reformat the card!</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-6-300"><a id="__codelineno-6-300" name="__codelineno-6-300" href="#__codelineno-6-300"></a><span class="w">      </span><span class="s">&quot;Is the card correctly inserted?</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-6-301"><a id="__codelineno-6-301" name="__codelineno-6-301" href="#__codelineno-6-301"></a><span class="w">      </span><span class="s">&quot;Is there a wiring/soldering problem?</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-302"><a id="__codelineno-6-302" name="__codelineno-6-302" href="#__codelineno-6-302"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isSpi</span><span class="p">(</span><span class="n">SD_CONFIG</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-303"><a id="__codelineno-6-303" name="__codelineno-6-303" href="#__codelineno-6-303"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span>
</span><span id="__span-6-304"><a id="__codelineno-6-304" name="__codelineno-6-304" href="#__codelineno-6-304"></a><span class="w">        </span><span class="s">&quot;Is SD_CS_PIN set to the correct value?</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-6-305"><a id="__codelineno-6-305" name="__codelineno-6-305" href="#__codelineno-6-305"></a><span class="w">        </span><span class="s">&quot;Does another SPI device need to be disabled?</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-306"><a id="__codelineno-6-306" name="__codelineno-6-306" href="#__codelineno-6-306"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-307"><a id="__codelineno-6-307" name="__codelineno-6-307" href="#__codelineno-6-307"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-6-308"><a id="__codelineno-6-308" name="__codelineno-6-308" href="#__codelineno-6-308"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-6-309"><a id="__codelineno-6-309" name="__codelineno-6-309" href="#__codelineno-6-309"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-310"><a id="__codelineno-6-310" name="__codelineno-6-310" href="#__codelineno-6-310"></a><span class="w">  </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">millis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
</span><span id="__span-6-311"><a id="__codelineno-6-311" name="__codelineno-6-311" href="#__codelineno-6-311"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;init time: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; ms&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-312"><a id="__codelineno-6-312" name="__codelineno-6-312" href="#__codelineno-6-312"></a>
</span><span id="__span-6-313"><a id="__codelineno-6-313" name="__codelineno-6-313" href="#__codelineno-6-313"></a>
</span><span id="__span-6-314"><a id="__codelineno-6-314" name="__codelineno-6-314" href="#__codelineno-6-314"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readCID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cid</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readCSD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">csd</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readOCR</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ocr</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readSCR</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scr</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-315"><a id="__codelineno-6-315" name="__codelineno-6-315" href="#__codelineno-6-315"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;readInfo failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-316"><a id="__codelineno-6-316" name="__codelineno-6-316" href="#__codelineno-6-316"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-6-317"><a id="__codelineno-6-317" name="__codelineno-6-317" href="#__codelineno-6-317"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-6-318"><a id="__codelineno-6-318" name="__codelineno-6-318" href="#__codelineno-6-318"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-319"><a id="__codelineno-6-319" name="__codelineno-6-319" href="#__codelineno-6-319"></a><span class="w">  </span><span class="n">printCardType</span><span class="p">();</span>
</span><span id="__span-6-320"><a id="__codelineno-6-320" name="__codelineno-6-320" href="#__codelineno-6-320"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;sdSpecVer: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mf">0.01</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">scr</span><span class="p">.</span><span class="n">sdSpecVer</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-321"><a id="__codelineno-6-321" name="__codelineno-6-321" href="#__codelineno-6-321"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;HighSpeedMode: &quot;</span><span class="p">);</span>
</span><span id="__span-6-322"><a id="__codelineno-6-322" name="__codelineno-6-322" href="#__codelineno-6-322"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">scr</span><span class="p">.</span><span class="n">sdSpecVer</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">cardCMD6</span><span class="p">(</span><span class="mh">0X00FFFFFF</span><span class="p">,</span><span class="w"> </span><span class="n">cmd6Data</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">cmd6Data</span><span class="p">[</span><span class="mi">13</span><span class="p">]))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-323"><a id="__codelineno-6-323" name="__codelineno-6-323" href="#__codelineno-6-323"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;true</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-324"><a id="__codelineno-6-324" name="__codelineno-6-324" href="#__codelineno-6-324"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-325"><a id="__codelineno-6-325" name="__codelineno-6-325" href="#__codelineno-6-325"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;false</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-326"><a id="__codelineno-6-326" name="__codelineno-6-326" href="#__codelineno-6-326"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-327"><a id="__codelineno-6-327" name="__codelineno-6-327" href="#__codelineno-6-327"></a><span class="w">  </span><span class="n">cidDmp</span><span class="p">();</span>
</span><span id="__span-6-328"><a id="__codelineno-6-328" name="__codelineno-6-328" href="#__codelineno-6-328"></a><span class="w">  </span><span class="n">csdDmp</span><span class="p">();</span>
</span><span id="__span-6-329"><a id="__codelineno-6-329" name="__codelineno-6-329" href="#__codelineno-6-329"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">OCR: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="p">;</span>
</span><span id="__span-6-330"><a id="__codelineno-6-330" name="__codelineno-6-330" href="#__codelineno-6-330"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">ocr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-6-331"><a id="__codelineno-6-331" name="__codelineno-6-331" href="#__codelineno-6-331"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">mbrDmp</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-332"><a id="__codelineno-6-332" name="__codelineno-6-332" href="#__codelineno-6-332"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-6-333"><a id="__codelineno-6-333" name="__codelineno-6-333" href="#__codelineno-6-333"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-334"><a id="__codelineno-6-334" name="__codelineno-6-334" href="#__codelineno-6-334"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">volumeBegin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-335"><a id="__codelineno-6-335" name="__codelineno-6-335" href="#__codelineno-6-335"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">volumeBegin failed. Is the card formatted?</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-6-336"><a id="__codelineno-6-336" name="__codelineno-6-336" href="#__codelineno-6-336"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-6-337"><a id="__codelineno-6-337" name="__codelineno-6-337" href="#__codelineno-6-337"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-6-338"><a id="__codelineno-6-338" name="__codelineno-6-338" href="#__codelineno-6-338"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-339"><a id="__codelineno-6-339" name="__codelineno-6-339" href="#__codelineno-6-339"></a><span class="w">  </span><span class="n">dmpVol</span><span class="p">();</span>
</span><span id="__span-6-340"><a id="__codelineno-6-340" name="__codelineno-6-340" href="#__codelineno-6-340"></a><span class="w">  </span><span class="n">test</span><span class="p">();</span>
</span><span id="__span-6-341"><a id="__codelineno-6-341" name="__codelineno-6-341" href="#__codelineno-6-341"></a><span class="p">}</span>
</span><span id="__span-6-342"><a id="__codelineno-6-342" name="__codelineno-6-342" href="#__codelineno-6-342"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-6-343"><a id="__codelineno-6-343" name="__codelineno-6-343" href="#__codelineno-6-343"></a><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-344"><a id="__codelineno-6-344" name="__codelineno-6-344" href="#__codelineno-6-344"></a><span class="w">  </span><span class="c1">// open the file. note that only one file can be open at a time,</span>
</span><span id="__span-6-345"><a id="__codelineno-6-345" name="__codelineno-6-345" href="#__codelineno-6-345"></a><span class="w">  </span><span class="c1">// so you have to close this one before opening another.</span>
</span><span id="__span-6-346"><a id="__codelineno-6-346" name="__codelineno-6-346" href="#__codelineno-6-346"></a><span class="w">  </span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_WRITE</span><span class="p">);</span>
</span><span id="__span-6-347"><a id="__codelineno-6-347" name="__codelineno-6-347" href="#__codelineno-6-347"></a>
</span><span id="__span-6-348"><a id="__codelineno-6-348" name="__codelineno-6-348" href="#__codelineno-6-348"></a>
</span><span id="__span-6-349"><a id="__codelineno-6-349" name="__codelineno-6-349" href="#__codelineno-6-349"></a><span class="w">  </span><span class="c1">// if the file opened okay, write to it:</span>
</span><span id="__span-6-350"><a id="__codelineno-6-350" name="__codelineno-6-350" href="#__codelineno-6-350"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-351"><a id="__codelineno-6-351" name="__codelineno-6-351" href="#__codelineno-6-351"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Writing to test.txt...&quot;</span><span class="p">);</span>
</span><span id="__span-6-352"><a id="__codelineno-6-352" name="__codelineno-6-352" href="#__codelineno-6-352"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;testing 3,4,5 wahoo&quot;</span><span class="p">);</span>
</span><span id="__span-6-353"><a id="__codelineno-6-353" name="__codelineno-6-353" href="#__codelineno-6-353"></a><span class="w">    </span><span class="c1">// close the file:</span>
</span><span id="__span-6-354"><a id="__codelineno-6-354" name="__codelineno-6-354" href="#__codelineno-6-354"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span><span id="__span-6-355"><a id="__codelineno-6-355" name="__codelineno-6-355" href="#__codelineno-6-355"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;done.&quot;</span><span class="p">);</span>
</span><span id="__span-6-356"><a id="__codelineno-6-356" name="__codelineno-6-356" href="#__codelineno-6-356"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-357"><a id="__codelineno-6-357" name="__codelineno-6-357" href="#__codelineno-6-357"></a><span class="w">    </span><span class="c1">// if the file didn&#39;t open, print an error:</span>
</span><span id="__span-6-358"><a id="__codelineno-6-358" name="__codelineno-6-358" href="#__codelineno-6-358"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;error opening test.txt&quot;</span><span class="p">);</span>
</span><span id="__span-6-359"><a id="__codelineno-6-359" name="__codelineno-6-359" href="#__codelineno-6-359"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-360"><a id="__codelineno-6-360" name="__codelineno-6-360" href="#__codelineno-6-360"></a>
</span><span id="__span-6-361"><a id="__codelineno-6-361" name="__codelineno-6-361" href="#__codelineno-6-361"></a>
</span><span id="__span-6-362"><a id="__codelineno-6-362" name="__codelineno-6-362" href="#__codelineno-6-362"></a><span class="w">  </span><span class="c1">// re-open the file for reading:</span>
</span><span id="__span-6-363"><a id="__codelineno-6-363" name="__codelineno-6-363" href="#__codelineno-6-363"></a><span class="w">  </span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">);</span>
</span><span id="__span-6-364"><a id="__codelineno-6-364" name="__codelineno-6-364" href="#__codelineno-6-364"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-365"><a id="__codelineno-6-365" name="__codelineno-6-365" href="#__codelineno-6-365"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;test.txt:&quot;</span><span class="p">);</span>
</span><span id="__span-6-366"><a id="__codelineno-6-366" name="__codelineno-6-366" href="#__codelineno-6-366"></a>
</span><span id="__span-6-367"><a id="__codelineno-6-367" name="__codelineno-6-367" href="#__codelineno-6-367"></a>
</span><span id="__span-6-368"><a id="__codelineno-6-368" name="__codelineno-6-368" href="#__codelineno-6-368"></a>
</span><span id="__span-6-369"><a id="__codelineno-6-369" name="__codelineno-6-369" href="#__codelineno-6-369"></a>
</span><span id="__span-6-370"><a id="__codelineno-6-370" name="__codelineno-6-370" href="#__codelineno-6-370"></a><span class="w">    </span><span class="c1">// read from the file until there&#39;s nothing else in it:</span>
</span><span id="__span-6-371"><a id="__codelineno-6-371" name="__codelineno-6-371" href="#__codelineno-6-371"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">myFile</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-372"><a id="__codelineno-6-372" name="__codelineno-6-372" href="#__codelineno-6-372"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">myFile</span><span class="p">.</span><span class="n">read</span><span class="p">());</span>
</span><span id="__span-6-373"><a id="__codelineno-6-373" name="__codelineno-6-373" href="#__codelineno-6-373"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-374"><a id="__codelineno-6-374" name="__codelineno-6-374" href="#__codelineno-6-374"></a><span class="w">    </span><span class="c1">// close the file:</span>
</span><span id="__span-6-375"><a id="__codelineno-6-375" name="__codelineno-6-375" href="#__codelineno-6-375"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span><span id="__span-6-376"><a id="__codelineno-6-376" name="__codelineno-6-376" href="#__codelineno-6-376"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-377"><a id="__codelineno-6-377" name="__codelineno-6-377" href="#__codelineno-6-377"></a><span class="w">    </span><span class="c1">// if the file didn&#39;t open, print an error:</span>
</span><span id="__span-6-378"><a id="__codelineno-6-378" name="__codelineno-6-378" href="#__codelineno-6-378"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;error opening test.txt&quot;</span><span class="p">);</span>
</span><span id="__span-6-379"><a id="__codelineno-6-379" name="__codelineno-6-379" href="#__codelineno-6-379"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-6-380"><a id="__codelineno-6-380" name="__codelineno-6-380" href="#__codelineno-6-380"></a><span class="p">}</span>
</span></code></pre></div>
<p>Open the <a href="https://learn.sparkfun.com/tutorials/terminal-basics/arduino-serial-monitor-windows-mac-linux">Arduino Serial Monitor</a> at <strong>115200</strong> baud. Send a character through the Arduino Serial Monitor. You should get a prompt in the Serial Monitor. Enter a chararacter (i.e. send <kbd>s</kbd> or any other keyboard character) to start. The example will then read the card. If the card is compatible, the output will provide information about the microSD card type, create a new file, write text to the file, and then close the file. The example will then re-open the file and read the contents of the file. You should see the following text in the file: "<em>testing 3,4,5 wahoo</em>". If the example code is run more than once, you may see the same text repeat a few times.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_sdFAT_microSD_Card_Example_Output.JPG"><img src="../assets/img/NORA-W306_sdFAT_microSD_Card_Example_Output.JPG" width="600px" height="600px" alt="MicroSD Card Test Output"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>MicroSD Card Test Output</i></td>
    </tr>
  </table>
</div>

<p>To open using the a file explorer, you can disconnect the SparkFun Thing Plus - NORA-W306, remove the microSD card, and connect it to a computer with a microSD card adapter. Once connected, you can open the <strong>test.txt</strong> file with a text editor to verify the text written in the file.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/File_Explorer_Text_Editor_Verification.JPG"><img src="../assets/img/File_Explorer_Text_Editor_Verification.JPG" width="600px" height="600px" alt="File Explorer Text Editor Verification"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>File Explorer Text Editor Verification</i></td>
    </tr>
  </table>
</div>

<h1 id="example-7-deep-sleep-and-blink">Example 7 - Deep Sleep and Blink<a class="headerlink" href="#example-7-deep-sleep-and-blink" title="Permanent link"></a></h1>
<p>In this example, we will show how to set your board in deep sleep, blink the user LED as an indicator, and then go back into power saving mode.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a modified example from the Realtek's Arduino example for <a href="https://www.amebaiot.com/en/amebad-arduino-deepsleepmode/">Deep Sleep Mode</a>.</p>
</div>
<h3 id="hardware-hookup_7">Hardware Hookup<a class="headerlink" href="#hardware-hookup_7" title="Permanent link"></a></h3>
<p>For users interested in measuring the current draw via the MEAS jumper, you can cut the trace located on the back of the board. Power the board via USB or battery. Then place a <a href="https://learn.sparkfun.com/tutorials/how-to-use-a-multimeter#measuring-current">multimeter set to measure current</a> on the PTHs. This makes it easier to measure the current as opposed to measuring the current between the power source and connector.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The MEAS jumper is before the XC6222 3.3V voltage regulator. For users that are connecting power to the 3V3 pin or Qwiic connector, you will need to place a multimeter between the regulated 3.3V power source and the board.</p>
</div>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_MEAS_Jumper_Modified.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_MEAS_Jumper_Modified.jpg" width="600px" height="600px" alt="MEAS Jumper Modified"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>MEAS Jumper Modified</i></td>
    </tr>
  </table>
</div>

<p>To upload code, connect the USB cable to the SparkFun Thing Plus NORA-W306. Of course, make sure to connect the other end to your computer.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="USB Cable inserted into Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>USB Cable inserted into Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Make sure to add a solder blob on the MEAS jumper when finished measuring. Users can also solder a <a href="https://www.sparkfun.com/products/116">2-pin male header</a> and <a href="https://www.sparkfun.com/products/9044">shunt</a> to the PTHs to easily remove/add the connection.</p>
</div>
<h3 id="arduino-code_6">Arduino Code<a class="headerlink" href="#arduino-code_6" title="Permanent link"></a></h3>
<p>This example builds upon Realtek's deep sleep mode. Once the deep sleep modes are set up, the NORA-W306 goes into deep sleep. In this particular example, we will use the timer (i.e. <code>SET_DS_AON_TIMER_WAKEUP</code>) as the source. After 5 seconds, the board wakes up with the user LED also blinking five times before going back to deep sleep for 5 seconds.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The serial UART is disabled to reduce amount the peripherals that are turned on. To save more power, you can cut the JP3 and PWR LED jumpers. There is also a fancy circuit to disable power to the CP2102 when there is no USB power. As an alternative to USB power, users can power the board with a LiPo battery.</p>
</div>
<p>Copy and paste the following code in the Arduino IDE. Select your Board (in this case the <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>), and associated COM port (in this case <strong>COM13</strong>). Then hit the upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="cm">/*</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="cm">* SparkFun Electronics</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="cm">* 7/17/2024</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="cm">*</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="cm">* SparkFun_ThingPlus_NORAW306_DeepSleepBlink.ino</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="cm">*</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="cm">* Deep Sleep mode example for the SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="cm">*</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="cm">* This example demonstrates how to put the NORA-W306 into deep sleep mode and</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="cm">* wake it up using the AON timer (every 5 seconds).</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="cm">* When awake, the onboard LED will blink.</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="cm">* When asleep, the current consumption can be monitored using the MEAS jumper.</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="cm">*</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="cm">* Hardware Hookup and Instructions:</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="cm">*   Connect the NORA-W306 to your computer using a USB-C cable.</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="cm">*   Upload this code to the NORA-W306.</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="cm">*   To measure the low-power consumption of the NORA-W306, remove USB-C cable</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="cm">*   and utilize the MEAS jumper to measure the current consumption.</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="cm">*   </span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="cm">* Software versions used in this example:</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="cm">*   Arduino IDE 2.3.2</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="cm">*   Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz) by Realtek Version 3.1.8</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="cm">*     (https://github.com/ambiot/ambd_arduino)</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="cm">*     (https://raw.githubusercontent.com/ambiot/ambd_arduino/dev/Arduino_package/package_realtek_amebad_early_index.json)</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="cm">*</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="cm">* Original code is from the following example in the RealTek Ameba Arduino package:</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="cm">*  Examples -&gt; AmebaPowerSave -&gt; DeepSleepMode.ino</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="cm">*</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="cm">* MIT License</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="cm">*</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="cm">* Copyright (c) 2024 SparkFun Electronics</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="cm">*</span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="cm">* Permission is hereby granted, free of charge, to any person obtaining a copy of</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="cm">* this software and associated documentation files (the &quot;Software&quot;), to deal in the</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="cm">* Software without restriction, including without limitation the rights to use,</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="cm">* copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="cm">* Software, and to permit persons to whom the Software is furnished to do so,</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="cm">* subject to the following conditions:</span>
</span><span id="__span-7-39"><a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="cm">*</span>
</span><span id="__span-7-40"><a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="cm">* The above copyright notice and this permission notice shall be included in all</span>
</span><span id="__span-7-41"><a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="cm">* copies or substantial portions of the Software.</span>
</span><span id="__span-7-42"><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a><span class="cm">*</span>
</span><span id="__span-7-43"><a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="cm">* THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,</span>
</span><span id="__span-7-44"><a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="cm">* INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A</span>
</span><span id="__span-7-45"><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="cm">* PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</span>
</span><span id="__span-7-46"><a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a><span class="cm">* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
</span><span id="__span-7-47"><a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a><span class="cm">* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span>
</span><span id="__span-7-48"><a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a><span class="cm">* SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
</span><span id="__span-7-49"><a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a><span class="cm">*/</span>
</span><span id="__span-7-50"><a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a>
</span><span id="__span-7-51"><a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;PowerSave.h&gt;</span>
</span><span id="__span-7-52"><a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a>
</span><span id="__span-7-53"><a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a><span class="c1">//SET_DS_AON_TIMER_WAKEUP</span>
</span><span id="__span-7-54"><a id="__codelineno-7-54" name="__codelineno-7-54" href="#__codelineno-7-54"></a><span class="c1">//SET_DS_RTC_WAKEUP</span>
</span><span id="__span-7-55"><a id="__codelineno-7-55" name="__codelineno-7-55" href="#__codelineno-7-55"></a><span class="c1">//For AMB21/22 only the AON GPIO pins listed below should be selected</span>
</span><span id="__span-7-56"><a id="__codelineno-7-56" name="__codelineno-7-56" href="#__codelineno-7-56"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 16</span>
</span><span id="__span-7-57"><a id="__codelineno-7-57" name="__codelineno-7-57" href="#__codelineno-7-57"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 17</span>
</span><span id="__span-7-58"><a id="__codelineno-7-58" name="__codelineno-7-58" href="#__codelineno-7-58"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA21          // pin 26</span>
</span><span id="__span-7-59"><a id="__codelineno-7-59" name="__codelineno-7-59" href="#__codelineno-7-59"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA20          // pin 27</span>
</span><span id="__span-7-60"><a id="__codelineno-7-60" name="__codelineno-7-60" href="#__codelineno-7-60"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA19          // pin 28</span>
</span><span id="__span-7-61"><a id="__codelineno-7-61" name="__codelineno-7-61" href="#__codelineno-7-61"></a><span class="c1">//For AMB23 only the AON GPIO pins listed below should be selected</span>
</span><span id="__span-7-62"><a id="__codelineno-7-62" name="__codelineno-7-62" href="#__codelineno-7-62"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 9</span>
</span><span id="__span-7-63"><a id="__codelineno-7-63" name="__codelineno-7-63" href="#__codelineno-7-63"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 10</span>
</span><span id="__span-7-64"><a id="__codelineno-7-64" name="__codelineno-7-64" href="#__codelineno-7-64"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 11</span>
</span><span id="__span-7-65"><a id="__codelineno-7-65" name="__codelineno-7-65" href="#__codelineno-7-65"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 12</span>
</span><span id="__span-7-66"><a id="__codelineno-7-66" name="__codelineno-7-66" href="#__codelineno-7-66"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA16          // pin 13</span>
</span><span id="__span-7-67"><a id="__codelineno-7-67" name="__codelineno-7-67" href="#__codelineno-7-67"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA18          // pin 15</span>
</span><span id="__span-7-68"><a id="__codelineno-7-68" name="__codelineno-7-68" href="#__codelineno-7-68"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA19          // pin 16</span>
</span><span id="__span-7-69"><a id="__codelineno-7-69" name="__codelineno-7-69" href="#__codelineno-7-69"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA21          // pin 18</span>
</span><span id="__span-7-70"><a id="__codelineno-7-70" name="__codelineno-7-70" href="#__codelineno-7-70"></a><span class="c1">//For BW16/BW16-TypeC only the AON GPIO pins listed below should be selected</span>
</span><span id="__span-7-71"><a id="__codelineno-7-71" name="__codelineno-7-71" href="#__codelineno-7-71"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 7</span>
</span><span id="__span-7-72"><a id="__codelineno-7-72" name="__codelineno-7-72" href="#__codelineno-7-72"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 8</span>
</span><span id="__span-7-73"><a id="__codelineno-7-73" name="__codelineno-7-73" href="#__codelineno-7-73"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 9</span>
</span><span id="__span-7-74"><a id="__codelineno-7-74" name="__codelineno-7-74" href="#__codelineno-7-74"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 10</span>
</span><span id="__span-7-75"><a id="__codelineno-7-75" name="__codelineno-7-75" href="#__codelineno-7-75"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 11</span>
</span><span id="__span-7-76"><a id="__codelineno-7-76" name="__codelineno-7-76" href="#__codelineno-7-76"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 12</span>
</span><span id="__span-7-77"><a id="__codelineno-7-77" name="__codelineno-7-77" href="#__codelineno-7-77"></a><span class="c1">//For board AW-CU488_ThingPlus</span>
</span><span id="__span-7-78"><a id="__codelineno-7-78" name="__codelineno-7-78" href="#__codelineno-7-78"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA18          // pin 0</span>
</span><span id="__span-7-79"><a id="__codelineno-7-79" name="__codelineno-7-79" href="#__codelineno-7-79"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA16          // pin 1</span>
</span><span id="__span-7-80"><a id="__codelineno-7-80" name="__codelineno-7-80" href="#__codelineno-7-80"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA17          // pin 2</span>
</span><span id="__span-7-81"><a id="__codelineno-7-81" name="__codelineno-7-81" href="#__codelineno-7-81"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 3</span>
</span><span id="__span-7-82"><a id="__codelineno-7-82" name="__codelineno-7-82" href="#__codelineno-7-82"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 4</span>
</span><span id="__span-7-83"><a id="__codelineno-7-83" name="__codelineno-7-83" href="#__codelineno-7-83"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 5</span>
</span><span id="__span-7-84"><a id="__codelineno-7-84" name="__codelineno-7-84" href="#__codelineno-7-84"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 6</span>
</span><span id="__span-7-85"><a id="__codelineno-7-85" name="__codelineno-7-85" href="#__codelineno-7-85"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA19          // pin 8</span>
</span><span id="__span-7-86"><a id="__codelineno-7-86" name="__codelineno-7-86" href="#__codelineno-7-86"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 28</span>
</span><span id="__span-7-87"><a id="__codelineno-7-87" name="__codelineno-7-87" href="#__codelineno-7-87"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 29</span>
</span><span id="__span-7-88"><a id="__codelineno-7-88" name="__codelineno-7-88" href="#__codelineno-7-88"></a><span class="c1">//For board AMB25/AMB26</span>
</span><span id="__span-7-89"><a id="__codelineno-7-89" name="__codelineno-7-89" href="#__codelineno-7-89"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 3</span>
</span><span id="__span-7-90"><a id="__codelineno-7-90" name="__codelineno-7-90" href="#__codelineno-7-90"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 2</span>
</span><span id="__span-7-91"><a id="__codelineno-7-91" name="__codelineno-7-91" href="#__codelineno-7-91"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 1</span>
</span><span id="__span-7-92"><a id="__codelineno-7-92" name="__codelineno-7-92" href="#__codelineno-7-92"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 0</span>
</span><span id="__span-7-93"><a id="__codelineno-7-93" name="__codelineno-7-93" href="#__codelineno-7-93"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 7</span>
</span><span id="__span-7-94"><a id="__codelineno-7-94" name="__codelineno-7-94" href="#__codelineno-7-94"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 6</span>
</span><span id="__span-7-95"><a id="__codelineno-7-95" name="__codelineno-7-95" href="#__codelineno-7-95"></a><span class="c1">//For board SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-7-96"><a id="__codelineno-7-96" name="__codelineno-7-96" href="#__codelineno-7-96"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA18          // pin 6</span>
</span><span id="__span-7-97"><a id="__codelineno-7-97" name="__codelineno-7-97" href="#__codelineno-7-97"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 13</span>
</span><span id="__span-7-98"><a id="__codelineno-7-98" name="__codelineno-7-98" href="#__codelineno-7-98"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 14</span>
</span><span id="__span-7-99"><a id="__codelineno-7-99" name="__codelineno-7-99" href="#__codelineno-7-99"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 11</span>
</span><span id="__span-7-100"><a id="__codelineno-7-100" name="__codelineno-7-100" href="#__codelineno-7-100"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 12</span>
</span><span id="__span-7-101"><a id="__codelineno-7-101" name="__codelineno-7-101" href="#__codelineno-7-101"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 15</span>
</span><span id="__span-7-102"><a id="__codelineno-7-102" name="__codelineno-7-102" href="#__codelineno-7-102"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 16</span>
</span><span id="__span-7-103"><a id="__codelineno-7-103" name="__codelineno-7-103" href="#__codelineno-7-103"></a>
</span><span id="__span-7-104"><a id="__codelineno-7-104" name="__codelineno-7-104" href="#__codelineno-7-104"></a><span class="cp">#define DS_WAKEUP_SOURCE                SET_DS_AON_TIMER_WAKEUP</span>
</span><span id="__span-7-105"><a id="__codelineno-7-105" name="__codelineno-7-105" href="#__codelineno-7-105"></a>
</span><span id="__span-7-106"><a id="__codelineno-7-106" name="__codelineno-7-106" href="#__codelineno-7-106"></a><span class="cp">#define AON_TIMER_SLEEP_DURATION        5000</span>
</span><span id="__span-7-107"><a id="__codelineno-7-107" name="__codelineno-7-107" href="#__codelineno-7-107"></a><span class="cp">#define DS_RTC_ALARM_DAY                0</span>
</span><span id="__span-7-108"><a id="__codelineno-7-108" name="__codelineno-7-108" href="#__codelineno-7-108"></a><span class="cp">#define DS_RTC_ALARM_HOUR               0</span>
</span><span id="__span-7-109"><a id="__codelineno-7-109" name="__codelineno-7-109" href="#__codelineno-7-109"></a><span class="cp">#define DS_RTC_ALARM_MIN                0</span>
</span><span id="__span-7-110"><a id="__codelineno-7-110" name="__codelineno-7-110" href="#__codelineno-7-110"></a><span class="cp">#define DS_RTC_ALARM_SEC                10</span>
</span><span id="__span-7-111"><a id="__codelineno-7-111" name="__codelineno-7-111" href="#__codelineno-7-111"></a>
</span><span id="__span-7-112"><a id="__codelineno-7-112" name="__codelineno-7-112" href="#__codelineno-7-112"></a><span class="kt">void</span><span class="w"> </span><span class="nf">DeepSleep_wakeup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-113"><a id="__codelineno-7-113" name="__codelineno-7-113" href="#__codelineno-7-113"></a><span class="w">    </span><span class="c1">//printf(&quot;\r\nDeep sleep wakeuped! \r\n&quot;);</span>
</span><span id="__span-7-114"><a id="__codelineno-7-114" name="__codelineno-7-114" href="#__codelineno-7-114"></a><span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONWakeReason</span><span class="p">();</span>
</span><span id="__span-7-115"><a id="__codelineno-7-115" name="__codelineno-7-115" href="#__codelineno-7-115"></a>
</span><span id="__span-7-116"><a id="__codelineno-7-116" name="__codelineno-7-116" href="#__codelineno-7-116"></a><span class="w">    </span><span class="c1">//pinMode(17, OUTPUT); // 17 SDPC uSD power control</span>
</span><span id="__span-7-117"><a id="__codelineno-7-117" name="__codelineno-7-117" href="#__codelineno-7-117"></a><span class="w">    </span><span class="c1">//digitalWrite(17, LOW); // Turn on uSD power if you&#39;d like to measure its current consumption   </span>
</span><span id="__span-7-118"><a id="__codelineno-7-118" name="__codelineno-7-118" href="#__codelineno-7-118"></a>
</span><span id="__span-7-119"><a id="__codelineno-7-119" name="__codelineno-7-119" href="#__codelineno-7-119"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AONWakeReason_AON_GPIO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-120"><a id="__codelineno-7-120" name="__codelineno-7-120" href="#__codelineno-7-120"></a><span class="w">        </span><span class="c1">//printf(&quot;AonWakepin wakeup. Wait 5s sleep again.    \r\n&quot;);</span>
</span><span id="__span-7-121"><a id="__codelineno-7-121" name="__codelineno-7-121" href="#__codelineno-7-121"></a><span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</span><span id="__span-7-122"><a id="__codelineno-7-122" name="__codelineno-7-122" href="#__codelineno-7-122"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AONWakeReason_AON_TIMER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-123"><a id="__codelineno-7-123" name="__codelineno-7-123" href="#__codelineno-7-123"></a><span class="w">        </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONTimerCmd</span><span class="p">();</span>
</span><span id="__span-7-124"><a id="__codelineno-7-124" name="__codelineno-7-124" href="#__codelineno-7-124"></a><span class="w">        </span><span class="c1">//printf(&quot;AonTimer wakeup. Wait 5s sleep again.    \r\n&quot;);</span>
</span><span id="__span-7-125"><a id="__codelineno-7-125" name="__codelineno-7-125" href="#__codelineno-7-125"></a>
</span><span id="__span-7-126"><a id="__codelineno-7-126" name="__codelineno-7-126" href="#__codelineno-7-126"></a><span class="w">        </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>
</span><span id="__span-7-127"><a id="__codelineno-7-127" name="__codelineno-7-127" href="#__codelineno-7-127"></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-7-128"><a id="__codelineno-7-128" name="__codelineno-7-128" href="#__codelineno-7-128"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-7-129"><a id="__codelineno-7-129" name="__codelineno-7-129" href="#__codelineno-7-129"></a><span class="w">          </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span>
</span><span id="__span-7-130"><a id="__codelineno-7-130" name="__codelineno-7-130" href="#__codelineno-7-130"></a><span class="w">          </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-7-131"><a id="__codelineno-7-131" name="__codelineno-7-131" href="#__codelineno-7-131"></a><span class="w">          </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span>
</span><span id="__span-7-132"><a id="__codelineno-7-132" name="__codelineno-7-132" href="#__codelineno-7-132"></a><span class="w">          </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-7-133"><a id="__codelineno-7-133" name="__codelineno-7-133" href="#__codelineno-7-133"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-7-134"><a id="__codelineno-7-134" name="__codelineno-7-134" href="#__codelineno-7-134"></a><span class="w">        </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT</span><span class="p">);</span>
</span><span id="__span-7-135"><a id="__codelineno-7-135" name="__codelineno-7-135" href="#__codelineno-7-135"></a><span class="w">        </span><span class="c1">//delay(5000);</span>
</span><span id="__span-7-136"><a id="__codelineno-7-136" name="__codelineno-7-136" href="#__codelineno-7-136"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AONWakeReason_RTC</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-137"><a id="__codelineno-7-137" name="__codelineno-7-137" href="#__codelineno-7-137"></a><span class="w">        </span><span class="c1">//printf(&quot;RTC wakeup. Wait 5s sleep again.    \r\n&quot;);</span>
</span><span id="__span-7-138"><a id="__codelineno-7-138" name="__codelineno-7-138" href="#__codelineno-7-138"></a><span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</span><span id="__span-7-139"><a id="__codelineno-7-139" name="__codelineno-7-139" href="#__codelineno-7-139"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-140"><a id="__codelineno-7-140" name="__codelineno-7-140" href="#__codelineno-7-140"></a>
</span><span id="__span-7-141"><a id="__codelineno-7-141" name="__codelineno-7-141" href="#__codelineno-7-141"></a><span class="w">    </span><span class="c1">//pinMode(17, INPUT_PULLUP); // 17 SDPC uSD power control (Pullup = off)</span>
</span><span id="__span-7-142"><a id="__codelineno-7-142" name="__codelineno-7-142" href="#__codelineno-7-142"></a>
</span><span id="__span-7-143"><a id="__codelineno-7-143" name="__codelineno-7-143" href="#__codelineno-7-143"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONWakeClear</span><span class="p">();</span>
</span><span id="__span-7-144"><a id="__codelineno-7-144" name="__codelineno-7-144" href="#__codelineno-7-144"></a><span class="p">}</span>
</span><span id="__span-7-145"><a id="__codelineno-7-145" name="__codelineno-7-145" href="#__codelineno-7-145"></a>
</span><span id="__span-7-146"><a id="__codelineno-7-146" name="__codelineno-7-146" href="#__codelineno-7-146"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-147"><a id="__codelineno-7-147" name="__codelineno-7-147" href="#__codelineno-7-147"></a><span class="w">    </span><span class="c1">// If you want serial debug messages, uncomment the following lines and others</span>
</span><span id="__span-7-148"><a id="__codelineno-7-148" name="__codelineno-7-148" href="#__codelineno-7-148"></a><span class="w">    </span><span class="c1">// below, as desired.</span>
</span><span id="__span-7-149"><a id="__codelineno-7-149" name="__codelineno-7-149" href="#__codelineno-7-149"></a><span class="w">    </span><span class="c1">// Open serial communications and wait for port to open:</span>
</span><span id="__span-7-150"><a id="__codelineno-7-150" name="__codelineno-7-150" href="#__codelineno-7-150"></a><span class="w">    </span><span class="c1">// Serial.begin(115200);</span>
</span><span id="__span-7-151"><a id="__codelineno-7-151" name="__codelineno-7-151" href="#__codelineno-7-151"></a><span class="w">    </span><span class="c1">// while (!Serial) {</span>
</span><span id="__span-7-152"><a id="__codelineno-7-152" name="__codelineno-7-152" href="#__codelineno-7-152"></a><span class="w">    </span><span class="c1">//     ; // wait for serial port to connect. Needed for native USB port only</span>
</span><span id="__span-7-153"><a id="__codelineno-7-153" name="__codelineno-7-153" href="#__codelineno-7-153"></a><span class="w">    </span><span class="c1">// }</span>
</span><span id="__span-7-154"><a id="__codelineno-7-154" name="__codelineno-7-154" href="#__codelineno-7-154"></a>
</span><span id="__span-7-155"><a id="__codelineno-7-155" name="__codelineno-7-155" href="#__codelineno-7-155"></a><span class="w">    </span><span class="c1">// Pin configuration - specific to the SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-7-156"><a id="__codelineno-7-156" name="__codelineno-7-156" href="#__codelineno-7-156"></a>
</span><span id="__span-7-157"><a id="__codelineno-7-157" name="__codelineno-7-157" href="#__codelineno-7-157"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// LOG RX, can backpower the CP2102</span>
</span><span id="__span-7-158"><a id="__codelineno-7-158" name="__codelineno-7-158" href="#__codelineno-7-158"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// LOG TX, can backpower the CP2102</span>
</span><span id="__span-7-159"><a id="__codelineno-7-159" name="__codelineno-7-159" href="#__codelineno-7-159"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_CS, can sink current from 3V3 via R16 (100K), note, this is only possible if you leave uSD power on</span>
</span><span id="__span-7-160"><a id="__codelineno-7-160" name="__codelineno-7-160" href="#__codelineno-7-160"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_CLK</span>
</span><span id="__span-7-161"><a id="__codelineno-7-161" name="__codelineno-7-161" href="#__codelineno-7-161"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_PICO</span>
</span><span id="__span-7-162"><a id="__codelineno-7-162" name="__codelineno-7-162" href="#__codelineno-7-162"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_POCI</span>
</span><span id="__span-7-163"><a id="__codelineno-7-163" name="__codelineno-7-163" href="#__codelineno-7-163"></a>
</span><span id="__span-7-164"><a id="__codelineno-7-164" name="__codelineno-7-164" href="#__codelineno-7-164"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// SDA</span>
</span><span id="__span-7-165"><a id="__codelineno-7-165" name="__codelineno-7-165" href="#__codelineno-7-165"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// SCL</span>
</span><span id="__span-7-166"><a id="__codelineno-7-166" name="__codelineno-7-166" href="#__codelineno-7-166"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// 17 SDPC uSD power control</span>
</span><span id="__span-7-167"><a id="__codelineno-7-167" name="__codelineno-7-167" href="#__codelineno-7-167"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLNONE</span><span class="p">);</span><span class="w"> </span><span class="c1">// aka PB_24, this is tied internally to PB_23 (aka Arduino pin &quot;17&quot;) and also defaults to internal pulldown.</span>
</span><span id="__span-7-168"><a id="__codelineno-7-168" name="__codelineno-7-168" href="#__codelineno-7-168"></a>
</span><span id="__span-7-169"><a id="__codelineno-7-169" name="__codelineno-7-169" href="#__codelineno-7-169"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">DEEPSLEEP_MODE</span><span class="p">);</span>
</span><span id="__span-7-170"><a id="__codelineno-7-170" name="__codelineno-7-170" href="#__codelineno-7-170"></a>
</span><span id="__span-7-171"><a id="__codelineno-7-171" name="__codelineno-7-171" href="#__codelineno-7-171"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">TRUE</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="n">PowerSave</span><span class="p">.</span><span class="n">DsleepWakeStatusGet</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-172"><a id="__codelineno-7-172" name="__codelineno-7-172" href="#__codelineno-7-172"></a><span class="w">        </span><span class="n">DeepSleep_wakeup</span><span class="p">();</span>
</span><span id="__span-7-173"><a id="__codelineno-7-173" name="__codelineno-7-173" href="#__codelineno-7-173"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-174"><a id="__codelineno-7-174" name="__codelineno-7-174" href="#__codelineno-7-174"></a>
</span><span id="__span-7-175"><a id="__codelineno-7-175" name="__codelineno-7-175" href="#__codelineno-7-175"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONTimerDuration</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-7-176"><a id="__codelineno-7-176" name="__codelineno-7-176" href="#__codelineno-7-176"></a>
</span><span id="__span-7-177"><a id="__codelineno-7-177" name="__codelineno-7-177" href="#__codelineno-7-177"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">DS_WAKEUP_SOURCE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-178"><a id="__codelineno-7-178" name="__codelineno-7-178" href="#__codelineno-7-178"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_DS_AON_TIMER_WAKEUP</span><span class="p">:</span>
</span><span id="__span-7-179"><a id="__codelineno-7-179" name="__codelineno-7-179" href="#__codelineno-7-179"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">DS_AON_TIMER_WAKEUP</span><span class="p">();</span>
</span><span id="__span-7-180"><a id="__codelineno-7-180" name="__codelineno-7-180" href="#__codelineno-7-180"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONTimerDuration</span><span class="p">(</span><span class="n">AON_TIMER_SLEEP_DURATION</span><span class="p">);</span>
</span><span id="__span-7-181"><a id="__codelineno-7-181" name="__codelineno-7-181" href="#__codelineno-7-181"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-182"><a id="__codelineno-7-182" name="__codelineno-7-182" href="#__codelineno-7-182"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_DS_RTC_WAKEUP</span><span class="p">:</span>
</span><span id="__span-7-183"><a id="__codelineno-7-183" name="__codelineno-7-183" href="#__codelineno-7-183"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">DS_RTC_WAKEUP</span><span class="p">();</span>
</span><span id="__span-7-184"><a id="__codelineno-7-184" name="__codelineno-7-184" href="#__codelineno-7-184"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">RTCWakeSetup</span><span class="p">(</span><span class="n">DS_RTC_ALARM_DAY</span><span class="p">,</span><span class="w"> </span><span class="n">DS_RTC_ALARM_HOUR</span><span class="p">,</span><span class="w"> </span><span class="n">DS_RTC_ALARM_MIN</span><span class="p">,</span><span class="w"> </span><span class="n">DS_RTC_ALARM_SEC</span><span class="p">);</span>
</span><span id="__span-7-185"><a id="__codelineno-7-185" name="__codelineno-7-185" href="#__codelineno-7-185"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-186"><a id="__codelineno-7-186" name="__codelineno-7-186" href="#__codelineno-7-186"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA12</span><span class="p">:</span>
</span><span id="__span-7-187"><a id="__codelineno-7-187" name="__codelineno-7-187" href="#__codelineno-7-187"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA12</span><span class="p">();</span>
</span><span id="__span-7-188"><a id="__codelineno-7-188" name="__codelineno-7-188" href="#__codelineno-7-188"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-189"><a id="__codelineno-7-189" name="__codelineno-7-189" href="#__codelineno-7-189"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA13</span><span class="p">:</span>
</span><span id="__span-7-190"><a id="__codelineno-7-190" name="__codelineno-7-190" href="#__codelineno-7-190"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA13</span><span class="p">();</span>
</span><span id="__span-7-191"><a id="__codelineno-7-191" name="__codelineno-7-191" href="#__codelineno-7-191"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-192"><a id="__codelineno-7-192" name="__codelineno-7-192" href="#__codelineno-7-192"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA14</span><span class="p">:</span>
</span><span id="__span-7-193"><a id="__codelineno-7-193" name="__codelineno-7-193" href="#__codelineno-7-193"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA14</span><span class="p">();</span>
</span><span id="__span-7-194"><a id="__codelineno-7-194" name="__codelineno-7-194" href="#__codelineno-7-194"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-195"><a id="__codelineno-7-195" name="__codelineno-7-195" href="#__codelineno-7-195"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA15</span><span class="p">:</span>
</span><span id="__span-7-196"><a id="__codelineno-7-196" name="__codelineno-7-196" href="#__codelineno-7-196"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA15</span><span class="p">();</span>
</span><span id="__span-7-197"><a id="__codelineno-7-197" name="__codelineno-7-197" href="#__codelineno-7-197"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-198"><a id="__codelineno-7-198" name="__codelineno-7-198" href="#__codelineno-7-198"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA16</span><span class="p">:</span>
</span><span id="__span-7-199"><a id="__codelineno-7-199" name="__codelineno-7-199" href="#__codelineno-7-199"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA16</span><span class="p">();</span>
</span><span id="__span-7-200"><a id="__codelineno-7-200" name="__codelineno-7-200" href="#__codelineno-7-200"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-201"><a id="__codelineno-7-201" name="__codelineno-7-201" href="#__codelineno-7-201"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA17</span><span class="p">:</span>
</span><span id="__span-7-202"><a id="__codelineno-7-202" name="__codelineno-7-202" href="#__codelineno-7-202"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA17</span><span class="p">();</span>
</span><span id="__span-7-203"><a id="__codelineno-7-203" name="__codelineno-7-203" href="#__codelineno-7-203"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-204"><a id="__codelineno-7-204" name="__codelineno-7-204" href="#__codelineno-7-204"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA18</span><span class="p">:</span>
</span><span id="__span-7-205"><a id="__codelineno-7-205" name="__codelineno-7-205" href="#__codelineno-7-205"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA18</span><span class="p">();</span>
</span><span id="__span-7-206"><a id="__codelineno-7-206" name="__codelineno-7-206" href="#__codelineno-7-206"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-207"><a id="__codelineno-7-207" name="__codelineno-7-207" href="#__codelineno-7-207"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA19</span><span class="p">:</span>
</span><span id="__span-7-208"><a id="__codelineno-7-208" name="__codelineno-7-208" href="#__codelineno-7-208"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA19</span><span class="p">();</span>
</span><span id="__span-7-209"><a id="__codelineno-7-209" name="__codelineno-7-209" href="#__codelineno-7-209"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-210"><a id="__codelineno-7-210" name="__codelineno-7-210" href="#__codelineno-7-210"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA20</span><span class="p">:</span>
</span><span id="__span-7-211"><a id="__codelineno-7-211" name="__codelineno-7-211" href="#__codelineno-7-211"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA20</span><span class="p">();</span>
</span><span id="__span-7-212"><a id="__codelineno-7-212" name="__codelineno-7-212" href="#__codelineno-7-212"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-213"><a id="__codelineno-7-213" name="__codelineno-7-213" href="#__codelineno-7-213"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA21</span><span class="p">:</span>
</span><span id="__span-7-214"><a id="__codelineno-7-214" name="__codelineno-7-214" href="#__codelineno-7-214"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA21</span><span class="p">();</span>
</span><span id="__span-7-215"><a id="__codelineno-7-215" name="__codelineno-7-215" href="#__codelineno-7-215"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-216"><a id="__codelineno-7-216" name="__codelineno-7-216" href="#__codelineno-7-216"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA25</span><span class="p">:</span>
</span><span id="__span-7-217"><a id="__codelineno-7-217" name="__codelineno-7-217" href="#__codelineno-7-217"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA25</span><span class="p">();</span>
</span><span id="__span-7-218"><a id="__codelineno-7-218" name="__codelineno-7-218" href="#__codelineno-7-218"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-219"><a id="__codelineno-7-219" name="__codelineno-7-219" href="#__codelineno-7-219"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA26</span><span class="p">:</span>
</span><span id="__span-7-220"><a id="__codelineno-7-220" name="__codelineno-7-220" href="#__codelineno-7-220"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA26</span><span class="p">();</span>
</span><span id="__span-7-221"><a id="__codelineno-7-221" name="__codelineno-7-221" href="#__codelineno-7-221"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-222"><a id="__codelineno-7-222" name="__codelineno-7-222" href="#__codelineno-7-222"></a><span class="w">        </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-7-223"><a id="__codelineno-7-223" name="__codelineno-7-223" href="#__codelineno-7-223"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Unknown wakeup source.    </span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-7-224"><a id="__codelineno-7-224" name="__codelineno-7-224" href="#__codelineno-7-224"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-7-225"><a id="__codelineno-7-225" name="__codelineno-7-225" href="#__codelineno-7-225"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-7-226"><a id="__codelineno-7-226" name="__codelineno-7-226" href="#__codelineno-7-226"></a>
</span><span id="__span-7-227"><a id="__codelineno-7-227" name="__codelineno-7-227" href="#__codelineno-7-227"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">enable</span><span class="p">();</span>
</span><span id="__span-7-228"><a id="__codelineno-7-228" name="__codelineno-7-228" href="#__codelineno-7-228"></a><span class="p">}</span>
</span><span id="__span-7-229"><a id="__codelineno-7-229" name="__codelineno-7-229" href="#__codelineno-7-229"></a>
</span><span id="__span-7-230"><a id="__codelineno-7-230" name="__codelineno-7-230" href="#__codelineno-7-230"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-231"><a id="__codelineno-7-231" name="__codelineno-7-231" href="#__codelineno-7-231"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-7-232"><a id="__codelineno-7-232" name="__codelineno-7-232" href="#__codelineno-7-232"></a><span class="p">}</span>
</span></code></pre></div>
<p>Once connected, choose a power source to connect to the SparkFun Thing Plus NORA-W306. This can be through the PTHs on the edge of the board (VU, VB, or 3V3) or the connectors (USB C, 2-pin JST, or Qwiic). Note that the board will draw more power through the USB C connector and VU PTH as this will power the CP2102. Power will also be drawn with the LiPo charger and 3.3V voltage regulator.</p>
<p>Below are a few diagrams showing two possible ways to measure the current draw when the board is in deep sleep mode.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Low_Power_Deep_Sleep_Multimeter_bb.jpg"><img src="../assets/img/NORA-W306_Low_Power_Deep_Sleep_Multimeter_bb.jpg" width="600px" height="600px" alt="Fritzing Diagram of Multimeter Measuring Current through MEAS and a LiPo Battery as the Power Source"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Low_Power_Deep_Sleep_Multimeter_PTH_bb.jpg"><img src="../assets/img/NORA-W306_Low_Power_Deep_Sleep_Multimeter_PTH_bb.jpg" width="600px" height="600px" alt="Fritzing Diagram of Multimeter Measuring Current LiPo Battery and Board"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Fritzing Diagram of Multimeter Measuring Current through MEAS and a LiPo Battery as the Power Source</i></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Fritzing Diagram of Multimeter Measuring Current LiPo Battery and Board</i></td>
    </tr>
  </table>
</div>

<p>If you haven't already, check out the demo video that was linked earlier in the hardware overview showing the current draw for the board in low power mode!</p>
<div style="text-align: center;">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/ElCYbEnyYH4?si=EVBnWnvqqZ6KBMxX" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>

<h1 id="example-8-deep-sleep-and-microsd-power-control">Example 8 - Deep Sleep and MicroSD Power Control<a class="headerlink" href="#example-8-deep-sleep-and-microsd-power-control" title="Permanent link"></a></h1>
<p>In this example, we will read sensor readings from a BME280, log the data to a microSD card, and then go into deep sleep.</p>
<h3 id="hardware-hookup_8">Hardware Hookup<a class="headerlink" href="#hardware-hookup_8" title="Permanent link"></a></h3>
<p>To take advantage of the SD power control (SDPC), you will need to make sure to cut the trace on the back of the board and add a solder blob between the center pad and pad labeled as <code>17</code>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SDPC_Jumper_Modification.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_SDPC_Jumper_Modification.jpg" width="600px" height="600px" alt="MicroSD Card Power Control Jumper Modified"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>MicroSD Card Power Control Jumper Modified</i></td>
    </tr>
  </table>
</div>

<p>When ready, insert a microSD card into the socket on the back of the board. Then connect the Qwiic BME280 to the SparkFun Thing Plus NORA-W306 using a Qwiic cable.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Low_Power_Deep_Sleep_microSD_BME280_bb.jpg"><img src="../assets/img/NORA-W306_Low_Power_Deep_Sleep_microSD_BME280_bb.jpg" width="600px" height="600px" alt="Fritzing Diagram BME280 connected to NORA-W306 via Qwiic"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Fritzing Diagram BME280 connected to NORA-W306 via Qwiic</i></td>
    </tr>
  </table>
</div>

<p>Connect a USB cable to the board to power and upload code.</p>
<h3 id="arduino-code_7">Arduino Code<a class="headerlink" href="#arduino-code_7" title="Permanent link"></a></h3>
<p>This example builds upon Realtek's deep sleep like the previous example. In addition to blinking the LED, we will also read the temperature from a BME280 and write the sensor data to the microSD card.</p>
<p>Copy and paste the following code in the Arduino IDE. Select your Board (in this case the <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>), and associated COM port (in this case <strong>COM23</strong>). Then hit the upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cm">/*</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="cm">* SparkFun Electronics</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="cm">* 7/17/2024</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="cm">*</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="cm">* SparkFun_ThingPlus_NORAW306_DeepSleepTempLogger.ino</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="cm">*</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="cm">* Deep Sleep mode with data logging  - example for the SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="cm">*</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="cm">* This example demonstrates how to put the NORA-W306 into deep sleep mode and</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="cm">* wake it up using the AON timer (every 5 seconds).</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="cm">* When awake, it will log the temperature from the BME280 sensor to the uSD card.</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="cm">* When awake, it will also blink the stat LED three times to indicate a log has happened.</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="cm">* When asleep, the current consumption can be monitored using the MEAS jumper.</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="cm">*</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="cm">* Hardware Hookup and Instructions:</span>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="cm">*   Connect the NORA-W306 to your computer using a USB-C cable.</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="cm">*   Connect the BME280 sensor with a Qwiic Cable.</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="cm">*   Upload this code to the NORA-W306.</span>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="cm">*   To measure the low-power consumption of the NORA-W306, remove USB-C cable</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="cm">*   and utilize the MEAS jumper to measure the current consumption.</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="cm">*   </span>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="cm">* Software versions used in this example:</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="cm">*   Arduino IDE 2.3.2</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="cm">*   Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz) by Realtek Version 3.1.8</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="cm">*     (https://github.com/ambiot/ambd_arduino)</span>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="cm">*     (https://raw.githubusercontent.com/ambiot/ambd_arduino/dev/Arduino_package/package_realtek_amebad_early_index.json)</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="cm">*   BME280 library by SparkFun Electronics</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="cm">*     (https://github.com/sparkfun/SparkFun_BME280_Arduino_Library)</span>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="cm">*</span>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="cm">* Original code is from the following example in the RealTek Ameba Arduino package:</span>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="cm">*  Examples -&gt; AmebaPowerSave -&gt; DeepSleepMode.ino</span>
</span><span id="__span-8-32"><a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="cm">*</span>
</span><span id="__span-8-33"><a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="cm">* MIT License</span>
</span><span id="__span-8-34"><a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="cm">*</span>
</span><span id="__span-8-35"><a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="cm">* Copyright (c) 2024 SparkFun Electronics</span>
</span><span id="__span-8-36"><a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="cm">*</span>
</span><span id="__span-8-37"><a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a><span class="cm">* Permission is hereby granted, free of charge, to any person obtaining a copy of</span>
</span><span id="__span-8-38"><a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="cm">* this software and associated documentation files (the &quot;Software&quot;), to deal in the</span>
</span><span id="__span-8-39"><a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="cm">* Software without restriction, including without limitation the rights to use,</span>
</span><span id="__span-8-40"><a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="cm">* copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the</span>
</span><span id="__span-8-41"><a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="cm">* Software, and to permit persons to whom the Software is furnished to do so,</span>
</span><span id="__span-8-42"><a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="cm">* subject to the following conditions:</span>
</span><span id="__span-8-43"><a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="cm">*</span>
</span><span id="__span-8-44"><a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="cm">* The above copyright notice and this permission notice shall be included in all</span>
</span><span id="__span-8-45"><a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="cm">* copies or substantial portions of the Software.</span>
</span><span id="__span-8-46"><a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="cm">*</span>
</span><span id="__span-8-47"><a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="cm">* THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,</span>
</span><span id="__span-8-48"><a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="cm">* INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A</span>
</span><span id="__span-8-49"><a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a><span class="cm">* PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT</span>
</span><span id="__span-8-50"><a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="cm">* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
</span><span id="__span-8-51"><a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="cm">* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE</span>
</span><span id="__span-8-52"><a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="cm">* SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
</span><span id="__span-8-53"><a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="cm">*/</span>
</span><span id="__span-8-54"><a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>
</span><span id="__span-8-55"><a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a><span class="c1">// variables to store the readings from the sensor</span>
</span><span id="__span-8-56"><a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a><span class="kt">float</span><span class="w"> </span><span class="n">humidity</span><span class="p">;</span>
</span><span id="__span-8-57"><a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a><span class="kt">float</span><span class="w"> </span><span class="n">pressure</span><span class="p">;</span>
</span><span id="__span-8-58"><a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a><span class="kt">float</span><span class="w"> </span><span class="n">altitude</span><span class="p">;</span>
</span><span id="__span-8-59"><a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a><span class="kt">float</span><span class="w"> </span><span class="n">temperature</span><span class="p">;</span>
</span><span id="__span-8-60"><a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a>
</span><span id="__span-8-61"><a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;SdFat.h&quot;</span>
</span><span id="__span-8-62"><a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;sdios.h&quot;</span>
</span><span id="__span-8-63"><a id="__codelineno-8-63" name="__codelineno-8-63" href="#__codelineno-8-63"></a>
</span><span id="__span-8-64"><a id="__codelineno-8-64" name="__codelineno-8-64" href="#__codelineno-8-64"></a><span class="n">File</span><span class="w"> </span><span class="n">myFile</span><span class="p">;</span>
</span><span id="__span-8-65"><a id="__codelineno-8-65" name="__codelineno-8-65" href="#__codelineno-8-65"></a>
</span><span id="__span-8-66"><a id="__codelineno-8-66" name="__codelineno-8-66" href="#__codelineno-8-66"></a><span class="cm">/*</span>
</span><span id="__span-8-67"><a id="__codelineno-8-67" name="__codelineno-8-67" href="#__codelineno-8-67"></a><span class="cm">  Set DISABLE_CS_PIN to disable a second SPI device.</span>
</span><span id="__span-8-68"><a id="__codelineno-8-68" name="__codelineno-8-68" href="#__codelineno-8-68"></a><span class="cm">  For example, with the Ethernet shield, set DISABLE_CS_PIN</span>
</span><span id="__span-8-69"><a id="__codelineno-8-69" name="__codelineno-8-69" href="#__codelineno-8-69"></a><span class="cm">  to 10 to disable the Ethernet controller.</span>
</span><span id="__span-8-70"><a id="__codelineno-8-70" name="__codelineno-8-70" href="#__codelineno-8-70"></a><span class="cm">*/</span>
</span><span id="__span-8-71"><a id="__codelineno-8-71" name="__codelineno-8-71" href="#__codelineno-8-71"></a><span class="k">const</span><span class="w"> </span><span class="kt">int8_t</span><span class="w"> </span><span class="n">DISABLE_CS_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
</span><span id="__span-8-72"><a id="__codelineno-8-72" name="__codelineno-8-72" href="#__codelineno-8-72"></a><span class="cm">/*</span>
</span><span id="__span-8-73"><a id="__codelineno-8-73" name="__codelineno-8-73" href="#__codelineno-8-73"></a><span class="cm">  Change the value of SD_CS_PIN if you are using SPI</span>
</span><span id="__span-8-74"><a id="__codelineno-8-74" name="__codelineno-8-74" href="#__codelineno-8-74"></a><span class="cm">  and your hardware does not use the default value, SS.</span>
</span><span id="__span-8-75"><a id="__codelineno-8-75" name="__codelineno-8-75" href="#__codelineno-8-75"></a><span class="cm">  Common values are:</span>
</span><span id="__span-8-76"><a id="__codelineno-8-76" name="__codelineno-8-76" href="#__codelineno-8-76"></a><span class="cm">  Arduino Ethernet shield: pin 4</span>
</span><span id="__span-8-77"><a id="__codelineno-8-77" name="__codelineno-8-77" href="#__codelineno-8-77"></a><span class="cm">  Sparkfun SD shield: pin 8</span>
</span><span id="__span-8-78"><a id="__codelineno-8-78" name="__codelineno-8-78" href="#__codelineno-8-78"></a><span class="cm">  Adafruit SD shields and modules: pin 10</span>
</span><span id="__span-8-79"><a id="__codelineno-8-79" name="__codelineno-8-79" href="#__codelineno-8-79"></a><span class="cm">  SparkFun Thing Plus NORA-W306: Arduino pin 4 (aka SS/PB_21/SPI0_CS)</span>
</span><span id="__span-8-80"><a id="__codelineno-8-80" name="__codelineno-8-80" href="#__codelineno-8-80"></a><span class="cm">*/</span>
</span><span id="__span-8-81"><a id="__codelineno-8-81" name="__codelineno-8-81" href="#__codelineno-8-81"></a><span class="c1">// SDCARD_SS_PIN is defined for the built-in SD on some boards.</span>
</span><span id="__span-8-82"><a id="__codelineno-8-82" name="__codelineno-8-82" href="#__codelineno-8-82"></a><span class="cp">#ifndef SDCARD_SS_PIN</span>
</span><span id="__span-8-83"><a id="__codelineno-8-83" name="__codelineno-8-83" href="#__codelineno-8-83"></a><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">SD_CS_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SS</span><span class="p">;</span>
</span><span id="__span-8-84"><a id="__codelineno-8-84" name="__codelineno-8-84" href="#__codelineno-8-84"></a><span class="cp">#else  </span><span class="c1">// SDCARD_SS_PIN</span>
</span><span id="__span-8-85"><a id="__codelineno-8-85" name="__codelineno-8-85" href="#__codelineno-8-85"></a><span class="k">const</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">SD_CS_PIN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SDCARD_SS_PIN</span><span class="p">;</span>
</span><span id="__span-8-86"><a id="__codelineno-8-86" name="__codelineno-8-86" href="#__codelineno-8-86"></a><span class="cp">#endif  </span><span class="c1">// SDCARD_SS_PIN</span>
</span><span id="__span-8-87"><a id="__codelineno-8-87" name="__codelineno-8-87" href="#__codelineno-8-87"></a>
</span><span id="__span-8-88"><a id="__codelineno-8-88" name="__codelineno-8-88" href="#__codelineno-8-88"></a><span class="c1">// Try to select the best SD card configuration.</span>
</span><span id="__span-8-89"><a id="__codelineno-8-89" name="__codelineno-8-89" href="#__codelineno-8-89"></a><span class="cp">#if HAS_SDIO_CLASS</span>
</span><span id="__span-8-90"><a id="__codelineno-8-90" name="__codelineno-8-90" href="#__codelineno-8-90"></a><span class="cp">#define SD_CONFIG SdioConfig(FIFO_SDIO)</span>
</span><span id="__span-8-91"><a id="__codelineno-8-91" name="__codelineno-8-91" href="#__codelineno-8-91"></a><span class="cp">#elif ENABLE_DEDICATED_SPI</span>
</span><span id="__span-8-92"><a id="__codelineno-8-92" name="__codelineno-8-92" href="#__codelineno-8-92"></a><span class="cp">#define SD_CONFIG SdSpiConfig(SD_CS_PIN, DEDICATED_SPI, SD_SCK_MHZ(16))</span>
</span><span id="__span-8-93"><a id="__codelineno-8-93" name="__codelineno-8-93" href="#__codelineno-8-93"></a><span class="cp">#else  </span><span class="c1">// HAS_SDIO_CLASS</span>
</span><span id="__span-8-94"><a id="__codelineno-8-94" name="__codelineno-8-94" href="#__codelineno-8-94"></a><span class="cp">#define SD_CONFIG SdSpiConfig(SD_CS_PIN, SHARED_SPI, SD_SCK_MHZ(16))</span>
</span><span id="__span-8-95"><a id="__codelineno-8-95" name="__codelineno-8-95" href="#__codelineno-8-95"></a><span class="cp">#endif  </span><span class="c1">// HAS_SDIO_CLASS</span>
</span><span id="__span-8-96"><a id="__codelineno-8-96" name="__codelineno-8-96" href="#__codelineno-8-96"></a>
</span><span id="__span-8-97"><a id="__codelineno-8-97" name="__codelineno-8-97" href="#__codelineno-8-97"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-98"><a id="__codelineno-8-98" name="__codelineno-8-98" href="#__codelineno-8-98"></a><span class="n">SdFs</span><span class="w"> </span><span class="n">sd</span><span class="p">;</span>
</span><span id="__span-8-99"><a id="__codelineno-8-99" name="__codelineno-8-99" href="#__codelineno-8-99"></a><span class="n">cid_t</span><span class="w"> </span><span class="n">cid</span><span class="p">;</span>
</span><span id="__span-8-100"><a id="__codelineno-8-100" name="__codelineno-8-100" href="#__codelineno-8-100"></a><span class="n">csd_t</span><span class="w"> </span><span class="n">csd</span><span class="p">;</span>
</span><span id="__span-8-101"><a id="__codelineno-8-101" name="__codelineno-8-101" href="#__codelineno-8-101"></a><span class="n">scr_t</span><span class="w"> </span><span class="n">scr</span><span class="p">;</span>
</span><span id="__span-8-102"><a id="__codelineno-8-102" name="__codelineno-8-102" href="#__codelineno-8-102"></a><span class="kt">uint8_t</span><span class="w"> </span><span class="n">cmd6Data</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
</span><span id="__span-8-103"><a id="__codelineno-8-103" name="__codelineno-8-103" href="#__codelineno-8-103"></a><span class="kt">uint32_t</span><span class="w"> </span><span class="n">eraseSize</span><span class="p">;</span>
</span><span id="__span-8-104"><a id="__codelineno-8-104" name="__codelineno-8-104" href="#__codelineno-8-104"></a><span class="kt">uint32_t</span><span class="w"> </span><span class="n">ocr</span><span class="p">;</span>
</span><span id="__span-8-105"><a id="__codelineno-8-105" name="__codelineno-8-105" href="#__codelineno-8-105"></a><span class="k">static</span><span class="w"> </span><span class="n">ArduinoOutStream</span><span class="w"> </span><span class="nf">cout</span><span class="p">(</span><span class="n">Serial</span><span class="p">);</span>
</span><span id="__span-8-106"><a id="__codelineno-8-106" name="__codelineno-8-106" href="#__codelineno-8-106"></a>
</span><span id="__span-8-107"><a id="__codelineno-8-107" name="__codelineno-8-107" href="#__codelineno-8-107"></a>
</span><span id="__span-8-108"><a id="__codelineno-8-108" name="__codelineno-8-108" href="#__codelineno-8-108"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span>
</span><span id="__span-8-109"><a id="__codelineno-8-109" name="__codelineno-8-109" href="#__codelineno-8-109"></a>
</span><span id="__span-8-110"><a id="__codelineno-8-110" name="__codelineno-8-110" href="#__codelineno-8-110"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;SparkFunBME280.h&quot;</span>
</span><span id="__span-8-111"><a id="__codelineno-8-111" name="__codelineno-8-111" href="#__codelineno-8-111"></a><span class="n">BME280</span><span class="w"> </span><span class="n">mySensor</span><span class="p">;</span>
</span><span id="__span-8-112"><a id="__codelineno-8-112" name="__codelineno-8-112" href="#__codelineno-8-112"></a>
</span><span id="__span-8-113"><a id="__codelineno-8-113" name="__codelineno-8-113" href="#__codelineno-8-113"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;PowerSave.h&gt;</span>
</span><span id="__span-8-114"><a id="__codelineno-8-114" name="__codelineno-8-114" href="#__codelineno-8-114"></a>
</span><span id="__span-8-115"><a id="__codelineno-8-115" name="__codelineno-8-115" href="#__codelineno-8-115"></a><span class="c1">//SET_DS_AON_TIMER_WAKEUP</span>
</span><span id="__span-8-116"><a id="__codelineno-8-116" name="__codelineno-8-116" href="#__codelineno-8-116"></a><span class="c1">//SET_DS_RTC_WAKEUP</span>
</span><span id="__span-8-117"><a id="__codelineno-8-117" name="__codelineno-8-117" href="#__codelineno-8-117"></a><span class="c1">//For AMB21/22 only the AON GPIO pins listed below should be selected</span>
</span><span id="__span-8-118"><a id="__codelineno-8-118" name="__codelineno-8-118" href="#__codelineno-8-118"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 16</span>
</span><span id="__span-8-119"><a id="__codelineno-8-119" name="__codelineno-8-119" href="#__codelineno-8-119"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 17</span>
</span><span id="__span-8-120"><a id="__codelineno-8-120" name="__codelineno-8-120" href="#__codelineno-8-120"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA21          // pin 26</span>
</span><span id="__span-8-121"><a id="__codelineno-8-121" name="__codelineno-8-121" href="#__codelineno-8-121"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA20          // pin 27</span>
</span><span id="__span-8-122"><a id="__codelineno-8-122" name="__codelineno-8-122" href="#__codelineno-8-122"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA19          // pin 28</span>
</span><span id="__span-8-123"><a id="__codelineno-8-123" name="__codelineno-8-123" href="#__codelineno-8-123"></a><span class="c1">//For AMB23 only the AON GPIO pins listed below should be selected</span>
</span><span id="__span-8-124"><a id="__codelineno-8-124" name="__codelineno-8-124" href="#__codelineno-8-124"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 9</span>
</span><span id="__span-8-125"><a id="__codelineno-8-125" name="__codelineno-8-125" href="#__codelineno-8-125"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 10</span>
</span><span id="__span-8-126"><a id="__codelineno-8-126" name="__codelineno-8-126" href="#__codelineno-8-126"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 11</span>
</span><span id="__span-8-127"><a id="__codelineno-8-127" name="__codelineno-8-127" href="#__codelineno-8-127"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 12</span>
</span><span id="__span-8-128"><a id="__codelineno-8-128" name="__codelineno-8-128" href="#__codelineno-8-128"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA16          // pin 13</span>
</span><span id="__span-8-129"><a id="__codelineno-8-129" name="__codelineno-8-129" href="#__codelineno-8-129"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA18          // pin 15</span>
</span><span id="__span-8-130"><a id="__codelineno-8-130" name="__codelineno-8-130" href="#__codelineno-8-130"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA19          // pin 16</span>
</span><span id="__span-8-131"><a id="__codelineno-8-131" name="__codelineno-8-131" href="#__codelineno-8-131"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA21          // pin 18</span>
</span><span id="__span-8-132"><a id="__codelineno-8-132" name="__codelineno-8-132" href="#__codelineno-8-132"></a><span class="c1">//For BW16/BW16-TypeC only the AON GPIO pins listed below should be selected</span>
</span><span id="__span-8-133"><a id="__codelineno-8-133" name="__codelineno-8-133" href="#__codelineno-8-133"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 7</span>
</span><span id="__span-8-134"><a id="__codelineno-8-134" name="__codelineno-8-134" href="#__codelineno-8-134"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 8</span>
</span><span id="__span-8-135"><a id="__codelineno-8-135" name="__codelineno-8-135" href="#__codelineno-8-135"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 9</span>
</span><span id="__span-8-136"><a id="__codelineno-8-136" name="__codelineno-8-136" href="#__codelineno-8-136"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 10</span>
</span><span id="__span-8-137"><a id="__codelineno-8-137" name="__codelineno-8-137" href="#__codelineno-8-137"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 11</span>
</span><span id="__span-8-138"><a id="__codelineno-8-138" name="__codelineno-8-138" href="#__codelineno-8-138"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 12</span>
</span><span id="__span-8-139"><a id="__codelineno-8-139" name="__codelineno-8-139" href="#__codelineno-8-139"></a><span class="c1">//For board AW-CU488_ThingPlus</span>
</span><span id="__span-8-140"><a id="__codelineno-8-140" name="__codelineno-8-140" href="#__codelineno-8-140"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA18          // pin 0</span>
</span><span id="__span-8-141"><a id="__codelineno-8-141" name="__codelineno-8-141" href="#__codelineno-8-141"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA16          // pin 1</span>
</span><span id="__span-8-142"><a id="__codelineno-8-142" name="__codelineno-8-142" href="#__codelineno-8-142"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA17          // pin 2</span>
</span><span id="__span-8-143"><a id="__codelineno-8-143" name="__codelineno-8-143" href="#__codelineno-8-143"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 3</span>
</span><span id="__span-8-144"><a id="__codelineno-8-144" name="__codelineno-8-144" href="#__codelineno-8-144"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 4</span>
</span><span id="__span-8-145"><a id="__codelineno-8-145" name="__codelineno-8-145" href="#__codelineno-8-145"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 5</span>
</span><span id="__span-8-146"><a id="__codelineno-8-146" name="__codelineno-8-146" href="#__codelineno-8-146"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 6</span>
</span><span id="__span-8-147"><a id="__codelineno-8-147" name="__codelineno-8-147" href="#__codelineno-8-147"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA19          // pin 8</span>
</span><span id="__span-8-148"><a id="__codelineno-8-148" name="__codelineno-8-148" href="#__codelineno-8-148"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 28</span>
</span><span id="__span-8-149"><a id="__codelineno-8-149" name="__codelineno-8-149" href="#__codelineno-8-149"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 29</span>
</span><span id="__span-8-150"><a id="__codelineno-8-150" name="__codelineno-8-150" href="#__codelineno-8-150"></a><span class="c1">//For board AMB25/AMB26</span>
</span><span id="__span-8-151"><a id="__codelineno-8-151" name="__codelineno-8-151" href="#__codelineno-8-151"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 3</span>
</span><span id="__span-8-152"><a id="__codelineno-8-152" name="__codelineno-8-152" href="#__codelineno-8-152"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 2</span>
</span><span id="__span-8-153"><a id="__codelineno-8-153" name="__codelineno-8-153" href="#__codelineno-8-153"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 1</span>
</span><span id="__span-8-154"><a id="__codelineno-8-154" name="__codelineno-8-154" href="#__codelineno-8-154"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 0</span>
</span><span id="__span-8-155"><a id="__codelineno-8-155" name="__codelineno-8-155" href="#__codelineno-8-155"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 7</span>
</span><span id="__span-8-156"><a id="__codelineno-8-156" name="__codelineno-8-156" href="#__codelineno-8-156"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 6</span>
</span><span id="__span-8-157"><a id="__codelineno-8-157" name="__codelineno-8-157" href="#__codelineno-8-157"></a><span class="c1">//For board SparkFun Thing Plus NORA-W306</span>
</span><span id="__span-8-158"><a id="__codelineno-8-158" name="__codelineno-8-158" href="#__codelineno-8-158"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA18          // pin 6</span>
</span><span id="__span-8-159"><a id="__codelineno-8-159" name="__codelineno-8-159" href="#__codelineno-8-159"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA13          // pin 13</span>
</span><span id="__span-8-160"><a id="__codelineno-8-160" name="__codelineno-8-160" href="#__codelineno-8-160"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA12          // pin 14</span>
</span><span id="__span-8-161"><a id="__codelineno-8-161" name="__codelineno-8-161" href="#__codelineno-8-161"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA26          // pin 11</span>
</span><span id="__span-8-162"><a id="__codelineno-8-162" name="__codelineno-8-162" href="#__codelineno-8-162"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA25          // pin 12</span>
</span><span id="__span-8-163"><a id="__codelineno-8-163" name="__codelineno-8-163" href="#__codelineno-8-163"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA15          // pin 15</span>
</span><span id="__span-8-164"><a id="__codelineno-8-164" name="__codelineno-8-164" href="#__codelineno-8-164"></a><span class="w">    </span><span class="c1">//SET_AON_GPIO_WAKEUP_PA14          // pin 16</span>
</span><span id="__span-8-165"><a id="__codelineno-8-165" name="__codelineno-8-165" href="#__codelineno-8-165"></a>
</span><span id="__span-8-166"><a id="__codelineno-8-166" name="__codelineno-8-166" href="#__codelineno-8-166"></a><span class="cp">#define DS_WAKEUP_SOURCE                SET_DS_AON_TIMER_WAKEUP</span>
</span><span id="__span-8-167"><a id="__codelineno-8-167" name="__codelineno-8-167" href="#__codelineno-8-167"></a>
</span><span id="__span-8-168"><a id="__codelineno-8-168" name="__codelineno-8-168" href="#__codelineno-8-168"></a><span class="cp">#define AON_TIMER_SLEEP_DURATION        5000</span>
</span><span id="__span-8-169"><a id="__codelineno-8-169" name="__codelineno-8-169" href="#__codelineno-8-169"></a><span class="cp">#define DS_RTC_ALARM_DAY                0</span>
</span><span id="__span-8-170"><a id="__codelineno-8-170" name="__codelineno-8-170" href="#__codelineno-8-170"></a><span class="cp">#define DS_RTC_ALARM_HOUR               0</span>
</span><span id="__span-8-171"><a id="__codelineno-8-171" name="__codelineno-8-171" href="#__codelineno-8-171"></a><span class="cp">#define DS_RTC_ALARM_MIN                0</span>
</span><span id="__span-8-172"><a id="__codelineno-8-172" name="__codelineno-8-172" href="#__codelineno-8-172"></a><span class="cp">#define DS_RTC_ALARM_SEC                10</span>
</span><span id="__span-8-173"><a id="__codelineno-8-173" name="__codelineno-8-173" href="#__codelineno-8-173"></a>
</span><span id="__span-8-174"><a id="__codelineno-8-174" name="__codelineno-8-174" href="#__codelineno-8-174"></a><span class="kt">void</span><span class="w"> </span><span class="nf">DeepSleep_wakeup</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-175"><a id="__codelineno-8-175" name="__codelineno-8-175" href="#__codelineno-8-175"></a><span class="w">    </span><span class="c1">//printf(&quot;\r\nDeep sleep wakeuped! \r\n&quot;);</span>
</span><span id="__span-8-176"><a id="__codelineno-8-176" name="__codelineno-8-176" href="#__codelineno-8-176"></a><span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONWakeReason</span><span class="p">();</span>
</span><span id="__span-8-177"><a id="__codelineno-8-177" name="__codelineno-8-177" href="#__codelineno-8-177"></a>
</span><span id="__span-8-178"><a id="__codelineno-8-178" name="__codelineno-8-178" href="#__codelineno-8-178"></a><span class="w">    </span><span class="n">readSensor</span><span class="p">();</span>
</span><span id="__span-8-179"><a id="__codelineno-8-179" name="__codelineno-8-179" href="#__codelineno-8-179"></a>
</span><span id="__span-8-180"><a id="__codelineno-8-180" name="__codelineno-8-180" href="#__codelineno-8-180"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AONWakeReason_AON_GPIO</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-181"><a id="__codelineno-8-181" name="__codelineno-8-181" href="#__codelineno-8-181"></a><span class="w">        </span><span class="c1">//printf(&quot;AonWakepin wakeup. Wait 5s sleep again.    \r\n&quot;);</span>
</span><span id="__span-8-182"><a id="__codelineno-8-182" name="__codelineno-8-182" href="#__codelineno-8-182"></a><span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</span><span id="__span-8-183"><a id="__codelineno-8-183" name="__codelineno-8-183" href="#__codelineno-8-183"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AONWakeReason_AON_TIMER</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-184"><a id="__codelineno-8-184" name="__codelineno-8-184" href="#__codelineno-8-184"></a><span class="w">        </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONTimerCmd</span><span class="p">();</span>
</span><span id="__span-8-185"><a id="__codelineno-8-185" name="__codelineno-8-185" href="#__codelineno-8-185"></a><span class="w">        </span><span class="c1">//printf(&quot;AonTimer wakeup. Wait 5s sleep again.    \r\n&quot;);</span>
</span><span id="__span-8-186"><a id="__codelineno-8-186" name="__codelineno-8-186" href="#__codelineno-8-186"></a>
</span><span id="__span-8-187"><a id="__codelineno-8-187" name="__codelineno-8-187" href="#__codelineno-8-187"></a><span class="w">        </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>
</span><span id="__span-8-188"><a id="__codelineno-8-188" name="__codelineno-8-188" href="#__codelineno-8-188"></a><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span>
</span><span id="__span-8-189"><a id="__codelineno-8-189" name="__codelineno-8-189" href="#__codelineno-8-189"></a><span class="w">        </span><span class="p">{</span>
</span><span id="__span-8-190"><a id="__codelineno-8-190" name="__codelineno-8-190" href="#__codelineno-8-190"></a><span class="w">          </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span>
</span><span id="__span-8-191"><a id="__codelineno-8-191" name="__codelineno-8-191" href="#__codelineno-8-191"></a><span class="w">          </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-8-192"><a id="__codelineno-8-192" name="__codelineno-8-192" href="#__codelineno-8-192"></a><span class="w">          </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span>
</span><span id="__span-8-193"><a id="__codelineno-8-193" name="__codelineno-8-193" href="#__codelineno-8-193"></a><span class="w">          </span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-8-194"><a id="__codelineno-8-194" name="__codelineno-8-194" href="#__codelineno-8-194"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-8-195"><a id="__codelineno-8-195" name="__codelineno-8-195" href="#__codelineno-8-195"></a><span class="w">        </span><span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT</span><span class="p">);</span>
</span><span id="__span-8-196"><a id="__codelineno-8-196" name="__codelineno-8-196" href="#__codelineno-8-196"></a><span class="w">        </span><span class="c1">//delay(5000);</span>
</span><span id="__span-8-197"><a id="__codelineno-8-197" name="__codelineno-8-197" href="#__codelineno-8-197"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wakereason_number</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">AONWakeReason_RTC</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-198"><a id="__codelineno-8-198" name="__codelineno-8-198" href="#__codelineno-8-198"></a>
</span><span id="__span-8-199"><a id="__codelineno-8-199" name="__codelineno-8-199" href="#__codelineno-8-199"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;RTC wakeup. Wait 5s sleep again.    </span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-200"><a id="__codelineno-8-200" name="__codelineno-8-200" href="#__codelineno-8-200"></a>
</span><span id="__span-8-201"><a id="__codelineno-8-201" name="__codelineno-8-201" href="#__codelineno-8-201"></a><span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
</span><span id="__span-8-202"><a id="__codelineno-8-202" name="__codelineno-8-202" href="#__codelineno-8-202"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-203"><a id="__codelineno-8-203" name="__codelineno-8-203" href="#__codelineno-8-203"></a>
</span><span id="__span-8-204"><a id="__codelineno-8-204" name="__codelineno-8-204" href="#__codelineno-8-204"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// LOG RX, can backpower the CP2102</span>
</span><span id="__span-8-205"><a id="__codelineno-8-205" name="__codelineno-8-205" href="#__codelineno-8-205"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// LOG TX, can backpower the CP2102</span>
</span><span id="__span-8-206"><a id="__codelineno-8-206" name="__codelineno-8-206" href="#__codelineno-8-206"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_CS, can sink current from 3V3 via R16 (100K), note, this is only possible if you leave uSD power on</span>
</span><span id="__span-8-207"><a id="__codelineno-8-207" name="__codelineno-8-207" href="#__codelineno-8-207"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_CLK</span>
</span><span id="__span-8-208"><a id="__codelineno-8-208" name="__codelineno-8-208" href="#__codelineno-8-208"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_PICO</span>
</span><span id="__span-8-209"><a id="__codelineno-8-209" name="__codelineno-8-209" href="#__codelineno-8-209"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLDOWN</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI0_POCI</span>
</span><span id="__span-8-210"><a id="__codelineno-8-210" name="__codelineno-8-210" href="#__codelineno-8-210"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// SDA</span>
</span><span id="__span-8-211"><a id="__codelineno-8-211" name="__codelineno-8-211" href="#__codelineno-8-211"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// SCL</span>
</span><span id="__span-8-212"><a id="__codelineno-8-212" name="__codelineno-8-212" href="#__codelineno-8-212"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLUP</span><span class="p">);</span><span class="w"> </span><span class="c1">// 17 SDPC uSD power control</span>
</span><span id="__span-8-213"><a id="__codelineno-8-213" name="__codelineno-8-213" href="#__codelineno-8-213"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT_PULLNONE</span><span class="p">);</span><span class="w"> </span><span class="c1">// aka PB_24, this is tied internally to PB_23 (aka Arduino pin &quot;17&quot;) and also defaults to internal pulldown.</span>
</span><span id="__span-8-214"><a id="__codelineno-8-214" name="__codelineno-8-214" href="#__codelineno-8-214"></a>
</span><span id="__span-8-215"><a id="__codelineno-8-215" name="__codelineno-8-215" href="#__codelineno-8-215"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONWakeClear</span><span class="p">();</span>
</span><span id="__span-8-216"><a id="__codelineno-8-216" name="__codelineno-8-216" href="#__codelineno-8-216"></a><span class="p">}</span>
</span><span id="__span-8-217"><a id="__codelineno-8-217" name="__codelineno-8-217" href="#__codelineno-8-217"></a>
</span><span id="__span-8-218"><a id="__codelineno-8-218" name="__codelineno-8-218" href="#__codelineno-8-218"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-219"><a id="__codelineno-8-219" name="__codelineno-8-219" href="#__codelineno-8-219"></a><span class="w">    </span><span class="c1">// If you want serial debug messages, uncomment the following lines and others</span>
</span><span id="__span-8-220"><a id="__codelineno-8-220" name="__codelineno-8-220" href="#__codelineno-8-220"></a><span class="w">    </span><span class="c1">// below, as desired.</span>
</span><span id="__span-8-221"><a id="__codelineno-8-221" name="__codelineno-8-221" href="#__codelineno-8-221"></a><span class="w">    </span><span class="c1">// Open serial communications and wait for port to open:</span>
</span><span id="__span-8-222"><a id="__codelineno-8-222" name="__codelineno-8-222" href="#__codelineno-8-222"></a><span class="w">    </span><span class="c1">// Serial.begin(115200);</span>
</span><span id="__span-8-223"><a id="__codelineno-8-223" name="__codelineno-8-223" href="#__codelineno-8-223"></a><span class="w">    </span><span class="c1">// while (!Serial) {</span>
</span><span id="__span-8-224"><a id="__codelineno-8-224" name="__codelineno-8-224" href="#__codelineno-8-224"></a><span class="w">    </span><span class="c1">//     ; // wait for serial port to connect. Needed for native USB port only</span>
</span><span id="__span-8-225"><a id="__codelineno-8-225" name="__codelineno-8-225" href="#__codelineno-8-225"></a><span class="w">    </span><span class="c1">// }</span>
</span><span id="__span-8-226"><a id="__codelineno-8-226" name="__codelineno-8-226" href="#__codelineno-8-226"></a>
</span><span id="__span-8-227"><a id="__codelineno-8-227" name="__codelineno-8-227" href="#__codelineno-8-227"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="n">DEEPSLEEP_MODE</span><span class="p">);</span>
</span><span id="__span-8-228"><a id="__codelineno-8-228" name="__codelineno-8-228" href="#__codelineno-8-228"></a>
</span><span id="__span-8-229"><a id="__codelineno-8-229" name="__codelineno-8-229" href="#__codelineno-8-229"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">TRUE</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="n">PowerSave</span><span class="p">.</span><span class="n">DsleepWakeStatusGet</span><span class="p">()))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-230"><a id="__codelineno-8-230" name="__codelineno-8-230" href="#__codelineno-8-230"></a><span class="w">        </span><span class="n">DeepSleep_wakeup</span><span class="p">();</span>
</span><span id="__span-8-231"><a id="__codelineno-8-231" name="__codelineno-8-231" href="#__codelineno-8-231"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-232"><a id="__codelineno-8-232" name="__codelineno-8-232" href="#__codelineno-8-232"></a>
</span><span id="__span-8-233"><a id="__codelineno-8-233" name="__codelineno-8-233" href="#__codelineno-8-233"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONTimerDuration</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-8-234"><a id="__codelineno-8-234" name="__codelineno-8-234" href="#__codelineno-8-234"></a>
</span><span id="__span-8-235"><a id="__codelineno-8-235" name="__codelineno-8-235" href="#__codelineno-8-235"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">DS_WAKEUP_SOURCE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-236"><a id="__codelineno-8-236" name="__codelineno-8-236" href="#__codelineno-8-236"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_DS_AON_TIMER_WAKEUP</span><span class="p">:</span>
</span><span id="__span-8-237"><a id="__codelineno-8-237" name="__codelineno-8-237" href="#__codelineno-8-237"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">DS_AON_TIMER_WAKEUP</span><span class="p">();</span>
</span><span id="__span-8-238"><a id="__codelineno-8-238" name="__codelineno-8-238" href="#__codelineno-8-238"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AONTimerDuration</span><span class="p">(</span><span class="n">AON_TIMER_SLEEP_DURATION</span><span class="p">);</span>
</span><span id="__span-8-239"><a id="__codelineno-8-239" name="__codelineno-8-239" href="#__codelineno-8-239"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-240"><a id="__codelineno-8-240" name="__codelineno-8-240" href="#__codelineno-8-240"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_DS_RTC_WAKEUP</span><span class="p">:</span>
</span><span id="__span-8-241"><a id="__codelineno-8-241" name="__codelineno-8-241" href="#__codelineno-8-241"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">DS_RTC_WAKEUP</span><span class="p">();</span>
</span><span id="__span-8-242"><a id="__codelineno-8-242" name="__codelineno-8-242" href="#__codelineno-8-242"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">RTCWakeSetup</span><span class="p">(</span><span class="n">DS_RTC_ALARM_DAY</span><span class="p">,</span><span class="w"> </span><span class="n">DS_RTC_ALARM_HOUR</span><span class="p">,</span><span class="w"> </span><span class="n">DS_RTC_ALARM_MIN</span><span class="p">,</span><span class="w"> </span><span class="n">DS_RTC_ALARM_SEC</span><span class="p">);</span>
</span><span id="__span-8-243"><a id="__codelineno-8-243" name="__codelineno-8-243" href="#__codelineno-8-243"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-244"><a id="__codelineno-8-244" name="__codelineno-8-244" href="#__codelineno-8-244"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA12</span><span class="p">:</span>
</span><span id="__span-8-245"><a id="__codelineno-8-245" name="__codelineno-8-245" href="#__codelineno-8-245"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA12</span><span class="p">();</span>
</span><span id="__span-8-246"><a id="__codelineno-8-246" name="__codelineno-8-246" href="#__codelineno-8-246"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-247"><a id="__codelineno-8-247" name="__codelineno-8-247" href="#__codelineno-8-247"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA13</span><span class="p">:</span>
</span><span id="__span-8-248"><a id="__codelineno-8-248" name="__codelineno-8-248" href="#__codelineno-8-248"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA13</span><span class="p">();</span>
</span><span id="__span-8-249"><a id="__codelineno-8-249" name="__codelineno-8-249" href="#__codelineno-8-249"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-250"><a id="__codelineno-8-250" name="__codelineno-8-250" href="#__codelineno-8-250"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA14</span><span class="p">:</span>
</span><span id="__span-8-251"><a id="__codelineno-8-251" name="__codelineno-8-251" href="#__codelineno-8-251"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA14</span><span class="p">();</span>
</span><span id="__span-8-252"><a id="__codelineno-8-252" name="__codelineno-8-252" href="#__codelineno-8-252"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-253"><a id="__codelineno-8-253" name="__codelineno-8-253" href="#__codelineno-8-253"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA15</span><span class="p">:</span>
</span><span id="__span-8-254"><a id="__codelineno-8-254" name="__codelineno-8-254" href="#__codelineno-8-254"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA15</span><span class="p">();</span>
</span><span id="__span-8-255"><a id="__codelineno-8-255" name="__codelineno-8-255" href="#__codelineno-8-255"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-256"><a id="__codelineno-8-256" name="__codelineno-8-256" href="#__codelineno-8-256"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA16</span><span class="p">:</span>
</span><span id="__span-8-257"><a id="__codelineno-8-257" name="__codelineno-8-257" href="#__codelineno-8-257"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA16</span><span class="p">();</span>
</span><span id="__span-8-258"><a id="__codelineno-8-258" name="__codelineno-8-258" href="#__codelineno-8-258"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-259"><a id="__codelineno-8-259" name="__codelineno-8-259" href="#__codelineno-8-259"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA17</span><span class="p">:</span>
</span><span id="__span-8-260"><a id="__codelineno-8-260" name="__codelineno-8-260" href="#__codelineno-8-260"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA17</span><span class="p">();</span>
</span><span id="__span-8-261"><a id="__codelineno-8-261" name="__codelineno-8-261" href="#__codelineno-8-261"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-262"><a id="__codelineno-8-262" name="__codelineno-8-262" href="#__codelineno-8-262"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA18</span><span class="p">:</span>
</span><span id="__span-8-263"><a id="__codelineno-8-263" name="__codelineno-8-263" href="#__codelineno-8-263"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA18</span><span class="p">();</span>
</span><span id="__span-8-264"><a id="__codelineno-8-264" name="__codelineno-8-264" href="#__codelineno-8-264"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-265"><a id="__codelineno-8-265" name="__codelineno-8-265" href="#__codelineno-8-265"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA19</span><span class="p">:</span>
</span><span id="__span-8-266"><a id="__codelineno-8-266" name="__codelineno-8-266" href="#__codelineno-8-266"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA19</span><span class="p">();</span>
</span><span id="__span-8-267"><a id="__codelineno-8-267" name="__codelineno-8-267" href="#__codelineno-8-267"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-268"><a id="__codelineno-8-268" name="__codelineno-8-268" href="#__codelineno-8-268"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA20</span><span class="p">:</span>
</span><span id="__span-8-269"><a id="__codelineno-8-269" name="__codelineno-8-269" href="#__codelineno-8-269"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA20</span><span class="p">();</span>
</span><span id="__span-8-270"><a id="__codelineno-8-270" name="__codelineno-8-270" href="#__codelineno-8-270"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-271"><a id="__codelineno-8-271" name="__codelineno-8-271" href="#__codelineno-8-271"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA21</span><span class="p">:</span>
</span><span id="__span-8-272"><a id="__codelineno-8-272" name="__codelineno-8-272" href="#__codelineno-8-272"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA21</span><span class="p">();</span>
</span><span id="__span-8-273"><a id="__codelineno-8-273" name="__codelineno-8-273" href="#__codelineno-8-273"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-274"><a id="__codelineno-8-274" name="__codelineno-8-274" href="#__codelineno-8-274"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA25</span><span class="p">:</span>
</span><span id="__span-8-275"><a id="__codelineno-8-275" name="__codelineno-8-275" href="#__codelineno-8-275"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA25</span><span class="p">();</span>
</span><span id="__span-8-276"><a id="__codelineno-8-276" name="__codelineno-8-276" href="#__codelineno-8-276"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-277"><a id="__codelineno-8-277" name="__codelineno-8-277" href="#__codelineno-8-277"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="no">SET_AON_GPIO_WAKEUP_PA26</span><span class="p">:</span>
</span><span id="__span-8-278"><a id="__codelineno-8-278" name="__codelineno-8-278" href="#__codelineno-8-278"></a><span class="w">            </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">AON_WAKEPIN_WAKEUP_PA26</span><span class="p">();</span>
</span><span id="__span-8-279"><a id="__codelineno-8-279" name="__codelineno-8-279" href="#__codelineno-8-279"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-280"><a id="__codelineno-8-280" name="__codelineno-8-280" href="#__codelineno-8-280"></a><span class="w">        </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-8-281"><a id="__codelineno-8-281" name="__codelineno-8-281" href="#__codelineno-8-281"></a><span class="w">            </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Unknown wakeup source.    </span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-282"><a id="__codelineno-8-282" name="__codelineno-8-282" href="#__codelineno-8-282"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-283"><a id="__codelineno-8-283" name="__codelineno-8-283" href="#__codelineno-8-283"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-284"><a id="__codelineno-8-284" name="__codelineno-8-284" href="#__codelineno-8-284"></a>
</span><span id="__span-8-285"><a id="__codelineno-8-285" name="__codelineno-8-285" href="#__codelineno-8-285"></a><span class="w">    </span><span class="n">PowerSave</span><span class="p">.</span><span class="n">enable</span><span class="p">();</span>
</span><span id="__span-8-286"><a id="__codelineno-8-286" name="__codelineno-8-286" href="#__codelineno-8-286"></a><span class="p">}</span>
</span><span id="__span-8-287"><a id="__codelineno-8-287" name="__codelineno-8-287" href="#__codelineno-8-287"></a>
</span><span id="__span-8-288"><a id="__codelineno-8-288" name="__codelineno-8-288" href="#__codelineno-8-288"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-289"><a id="__codelineno-8-289" name="__codelineno-8-289" href="#__codelineno-8-289"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-8-290"><a id="__codelineno-8-290" name="__codelineno-8-290" href="#__codelineno-8-290"></a><span class="p">}</span>
</span><span id="__span-8-291"><a id="__codelineno-8-291" name="__codelineno-8-291" href="#__codelineno-8-291"></a>
</span><span id="__span-8-292"><a id="__codelineno-8-292" name="__codelineno-8-292" href="#__codelineno-8-292"></a><span class="kt">void</span><span class="w"> </span><span class="nf">readSensor</span><span class="p">()</span>
</span><span id="__span-8-293"><a id="__codelineno-8-293" name="__codelineno-8-293" href="#__codelineno-8-293"></a><span class="p">{</span>
</span><span id="__span-8-294"><a id="__codelineno-8-294" name="__codelineno-8-294" href="#__codelineno-8-294"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">INPUT</span><span class="p">);</span><span class="w"> </span><span class="c1">// LOG RX, can backpower the CP2102</span>
</span><span id="__span-8-295"><a id="__codelineno-8-295" name="__codelineno-8-295" href="#__codelineno-8-295"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"> </span><span class="c1">// LOG TX, can backpower the CP2102</span>
</span><span id="__span-8-296"><a id="__codelineno-8-296" name="__codelineno-8-296" href="#__codelineno-8-296"></a>
</span><span id="__span-8-297"><a id="__codelineno-8-297" name="__codelineno-8-297" href="#__codelineno-8-297"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"> </span><span class="c1">// SDA</span>
</span><span id="__span-8-298"><a id="__codelineno-8-298" name="__codelineno-8-298" href="#__codelineno-8-298"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"> </span><span class="c1">// SCL</span>
</span><span id="__span-8-299"><a id="__codelineno-8-299" name="__codelineno-8-299" href="#__codelineno-8-299"></a>
</span><span id="__span-8-300"><a id="__codelineno-8-300" name="__codelineno-8-300" href="#__codelineno-8-300"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span><span class="w"> </span><span class="c1">// 17 SDPC uSD power control</span>
</span><span id="__span-8-301"><a id="__codelineno-8-301" name="__codelineno-8-301" href="#__codelineno-8-301"></a><span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="n">LOW</span><span class="p">);</span><span class="w"> </span><span class="c1">// uSD power GND = ON</span>
</span><span id="__span-8-302"><a id="__codelineno-8-302" name="__codelineno-8-302" href="#__codelineno-8-302"></a>
</span><span id="__span-8-303"><a id="__codelineno-8-303" name="__codelineno-8-303" href="#__codelineno-8-303"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-8-304"><a id="__codelineno-8-304" name="__codelineno-8-304" href="#__codelineno-8-304"></a>
</span><span id="__span-8-305"><a id="__codelineno-8-305" name="__codelineno-8-305" href="#__codelineno-8-305"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SdFat version: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">SD_FAT_VERSION_STR</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-306"><a id="__codelineno-8-306" name="__codelineno-8-306" href="#__codelineno-8-306"></a><span class="w">    </span><span class="n">printConfig</span><span class="p">(</span><span class="n">SD_CONFIG</span><span class="p">);</span>
</span><span id="__span-8-307"><a id="__codelineno-8-307" name="__codelineno-8-307" href="#__codelineno-8-307"></a><span class="kt">uint32_t</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">millis</span><span class="p">();</span>
</span><span id="__span-8-308"><a id="__codelineno-8-308" name="__codelineno-8-308" href="#__codelineno-8-308"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">cardBegin</span><span class="p">(</span><span class="n">SD_CONFIG</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-309"><a id="__codelineno-8-309" name="__codelineno-8-309" href="#__codelineno-8-309"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span>
</span><span id="__span-8-310"><a id="__codelineno-8-310" name="__codelineno-8-310" href="#__codelineno-8-310"></a><span class="w">           </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">SD initialization failed.</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-8-311"><a id="__codelineno-8-311" name="__codelineno-8-311" href="#__codelineno-8-311"></a><span class="w">           </span><span class="s">&quot;Do not reformat the card!</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-8-312"><a id="__codelineno-8-312" name="__codelineno-8-312" href="#__codelineno-8-312"></a><span class="w">           </span><span class="s">&quot;Is the card correctly inserted?</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-8-313"><a id="__codelineno-8-313" name="__codelineno-8-313" href="#__codelineno-8-313"></a><span class="w">           </span><span class="s">&quot;Is there a wiring/soldering problem?</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-314"><a id="__codelineno-8-314" name="__codelineno-8-314" href="#__codelineno-8-314"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isSpi</span><span class="p">(</span><span class="n">SD_CONFIG</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-315"><a id="__codelineno-8-315" name="__codelineno-8-315" href="#__codelineno-8-315"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span>
</span><span id="__span-8-316"><a id="__codelineno-8-316" name="__codelineno-8-316" href="#__codelineno-8-316"></a><span class="w">           </span><span class="s">&quot;Is SD_CS_PIN set to the correct value?</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-8-317"><a id="__codelineno-8-317" name="__codelineno-8-317" href="#__codelineno-8-317"></a><span class="w">           </span><span class="s">&quot;Does another SPI device need to be disabled?</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-8-318"><a id="__codelineno-8-318" name="__codelineno-8-318" href="#__codelineno-8-318"></a><span class="w">           </span><span class="p">);</span>
</span><span id="__span-8-319"><a id="__codelineno-8-319" name="__codelineno-8-319" href="#__codelineno-8-319"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-320"><a id="__codelineno-8-320" name="__codelineno-8-320" href="#__codelineno-8-320"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-8-321"><a id="__codelineno-8-321" name="__codelineno-8-321" href="#__codelineno-8-321"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-8-322"><a id="__codelineno-8-322" name="__codelineno-8-322" href="#__codelineno-8-322"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-323"><a id="__codelineno-8-323" name="__codelineno-8-323" href="#__codelineno-8-323"></a>
</span><span id="__span-8-324"><a id="__codelineno-8-324" name="__codelineno-8-324" href="#__codelineno-8-324"></a><span class="w">    </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">millis</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
</span><span id="__span-8-325"><a id="__codelineno-8-325" name="__codelineno-8-325" href="#__codelineno-8-325"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;init time: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; ms&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-326"><a id="__codelineno-8-326" name="__codelineno-8-326" href="#__codelineno-8-326"></a>
</span><span id="__span-8-327"><a id="__codelineno-8-327" name="__codelineno-8-327" href="#__codelineno-8-327"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readCID</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cid</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
</span><span id="__span-8-328"><a id="__codelineno-8-328" name="__codelineno-8-328" href="#__codelineno-8-328"></a><span class="w">      </span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readCSD</span><span class="p">(</span><span class="o">&amp;</span><span class="n">csd</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
</span><span id="__span-8-329"><a id="__codelineno-8-329" name="__codelineno-8-329" href="#__codelineno-8-329"></a><span class="w">      </span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readOCR</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ocr</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
</span><span id="__span-8-330"><a id="__codelineno-8-330" name="__codelineno-8-330" href="#__codelineno-8-330"></a><span class="w">      </span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readSCR</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scr</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-331"><a id="__codelineno-8-331" name="__codelineno-8-331" href="#__codelineno-8-331"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;readInfo failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-332"><a id="__codelineno-8-332" name="__codelineno-8-332" href="#__codelineno-8-332"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-8-333"><a id="__codelineno-8-333" name="__codelineno-8-333" href="#__codelineno-8-333"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-8-334"><a id="__codelineno-8-334" name="__codelineno-8-334" href="#__codelineno-8-334"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-335"><a id="__codelineno-8-335" name="__codelineno-8-335" href="#__codelineno-8-335"></a><span class="w">  </span><span class="n">printCardType</span><span class="p">();</span>
</span><span id="__span-8-336"><a id="__codelineno-8-336" name="__codelineno-8-336" href="#__codelineno-8-336"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;sdSpecVer: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mf">0.01</span><span class="o">*</span><span class="n">scr</span><span class="p">.</span><span class="n">sdSpecVer</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-337"><a id="__codelineno-8-337" name="__codelineno-8-337" href="#__codelineno-8-337"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;HighSpeedMode: &quot;</span><span class="p">);</span>
</span><span id="__span-8-338"><a id="__codelineno-8-338" name="__codelineno-8-338" href="#__codelineno-8-338"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">scr</span><span class="p">.</span><span class="n">sdSpecVer</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span>
</span><span id="__span-8-339"><a id="__codelineno-8-339" name="__codelineno-8-339" href="#__codelineno-8-339"></a><span class="w">    </span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">cardCMD6</span><span class="p">(</span><span class="mh">0X00FFFFFF</span><span class="p">,</span><span class="w"> </span><span class="n">cmd6Data</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">cmd6Data</span><span class="p">[</span><span class="mi">13</span><span class="p">]))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-340"><a id="__codelineno-8-340" name="__codelineno-8-340" href="#__codelineno-8-340"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;true</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-341"><a id="__codelineno-8-341" name="__codelineno-8-341" href="#__codelineno-8-341"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-342"><a id="__codelineno-8-342" name="__codelineno-8-342" href="#__codelineno-8-342"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;false</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-343"><a id="__codelineno-8-343" name="__codelineno-8-343" href="#__codelineno-8-343"></a><span class="w">  </span><span class="p">}</span><span class="w">      </span>
</span><span id="__span-8-344"><a id="__codelineno-8-344" name="__codelineno-8-344" href="#__codelineno-8-344"></a><span class="w">  </span><span class="n">cidDmp</span><span class="p">();</span>
</span><span id="__span-8-345"><a id="__codelineno-8-345" name="__codelineno-8-345" href="#__codelineno-8-345"></a><span class="w">  </span><span class="n">csdDmp</span><span class="p">();</span>
</span><span id="__span-8-346"><a id="__codelineno-8-346" name="__codelineno-8-346" href="#__codelineno-8-346"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">OCR: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="p">;</span>
</span><span id="__span-8-347"><a id="__codelineno-8-347" name="__codelineno-8-347" href="#__codelineno-8-347"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">ocr</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-348"><a id="__codelineno-8-348" name="__codelineno-8-348" href="#__codelineno-8-348"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">mbrDmp</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-349"><a id="__codelineno-8-349" name="__codelineno-8-349" href="#__codelineno-8-349"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-8-350"><a id="__codelineno-8-350" name="__codelineno-8-350" href="#__codelineno-8-350"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-351"><a id="__codelineno-8-351" name="__codelineno-8-351" href="#__codelineno-8-351"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">volumeBegin</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-352"><a id="__codelineno-8-352" name="__codelineno-8-352" href="#__codelineno-8-352"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">volumeBegin failed. Is the card formatted?</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-353"><a id="__codelineno-8-353" name="__codelineno-8-353" href="#__codelineno-8-353"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-8-354"><a id="__codelineno-8-354" name="__codelineno-8-354" href="#__codelineno-8-354"></a><span class="w">    </span><span class="k">return</span><span class="p">;</span>
</span><span id="__span-8-355"><a id="__codelineno-8-355" name="__codelineno-8-355" href="#__codelineno-8-355"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-356"><a id="__codelineno-8-356" name="__codelineno-8-356" href="#__codelineno-8-356"></a><span class="w">  </span><span class="n">dmpVol</span><span class="p">();</span>
</span><span id="__span-8-357"><a id="__codelineno-8-357" name="__codelineno-8-357" href="#__codelineno-8-357"></a>
</span><span id="__span-8-358"><a id="__codelineno-8-358" name="__codelineno-8-358" href="#__codelineno-8-358"></a>
</span><span id="__span-8-359"><a id="__codelineno-8-359" name="__codelineno-8-359" href="#__codelineno-8-359"></a>
</span><span id="__span-8-360"><a id="__codelineno-8-360" name="__codelineno-8-360" href="#__codelineno-8-360"></a>
</span><span id="__span-8-361"><a id="__codelineno-8-361" name="__codelineno-8-361" href="#__codelineno-8-361"></a><span class="w">    </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span id="__span-8-362"><a id="__codelineno-8-362" name="__codelineno-8-362" href="#__codelineno-8-362"></a><span class="w">    </span><span class="n">Wire</span><span class="p">.</span><span class="n">setClock</span><span class="p">(</span><span class="mi">400000</span><span class="p">);</span><span class="w"> </span><span class="c1">//Increase to fast I2C speed!</span>
</span><span id="__span-8-363"><a id="__codelineno-8-363" name="__codelineno-8-363" href="#__codelineno-8-363"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mySensor</span><span class="p">.</span><span class="n">beginI2C</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="c1">//Begin communication over I2C</span>
</span><span id="__span-8-364"><a id="__codelineno-8-364" name="__codelineno-8-364" href="#__codelineno-8-364"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-8-365"><a id="__codelineno-8-365" name="__codelineno-8-365" href="#__codelineno-8-365"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;The sensor did not respond. Please check wiring.&quot;</span><span class="p">);</span>
</span><span id="__span-8-366"><a id="__codelineno-8-366" name="__codelineno-8-366" href="#__codelineno-8-366"></a><span class="w">        </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">//Freeze</span>
</span><span id="__span-8-367"><a id="__codelineno-8-367" name="__codelineno-8-367" href="#__codelineno-8-367"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-368"><a id="__codelineno-8-368" name="__codelineno-8-368" href="#__codelineno-8-368"></a>
</span><span id="__span-8-369"><a id="__codelineno-8-369" name="__codelineno-8-369" href="#__codelineno-8-369"></a><span class="w">    </span><span class="n">mySensor</span><span class="p">.</span><span class="n">setMode</span><span class="p">(</span><span class="n">MODE_FORCED</span><span class="p">);</span><span class="w"> </span><span class="c1">//Wake up sensor and take reading</span>
</span><span id="__span-8-370"><a id="__codelineno-8-370" name="__codelineno-8-370" href="#__codelineno-8-370"></a>
</span><span id="__span-8-371"><a id="__codelineno-8-371" name="__codelineno-8-371" href="#__codelineno-8-371"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">mySensor</span><span class="p">.</span><span class="n">isMeasuring</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="c1">//Wait for sensor to start measurment</span>
</span><span id="__span-8-372"><a id="__codelineno-8-372" name="__codelineno-8-372" href="#__codelineno-8-372"></a><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">mySensor</span><span class="p">.</span><span class="n">isMeasuring</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="c1">//Hang out while sensor completes the reading    </span>
</span><span id="__span-8-373"><a id="__codelineno-8-373" name="__codelineno-8-373" href="#__codelineno-8-373"></a>
</span><span id="__span-8-374"><a id="__codelineno-8-374" name="__codelineno-8-374" href="#__codelineno-8-374"></a><span class="w">    </span><span class="n">humidity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mySensor</span><span class="p">.</span><span class="n">readFloatHumidity</span><span class="p">();</span>
</span><span id="__span-8-375"><a id="__codelineno-8-375" name="__codelineno-8-375" href="#__codelineno-8-375"></a><span class="w">    </span><span class="n">pressure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mySensor</span><span class="p">.</span><span class="n">readFloatPressure</span><span class="p">();</span>
</span><span id="__span-8-376"><a id="__codelineno-8-376" name="__codelineno-8-376" href="#__codelineno-8-376"></a><span class="w">    </span><span class="n">altitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mySensor</span><span class="p">.</span><span class="n">readFloatAltitudeFeet</span><span class="p">();</span>
</span><span id="__span-8-377"><a id="__codelineno-8-377" name="__codelineno-8-377" href="#__codelineno-8-377"></a><span class="w">    </span><span class="n">temperature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mySensor</span><span class="p">.</span><span class="n">readTempF</span><span class="p">();</span>
</span><span id="__span-8-378"><a id="__codelineno-8-378" name="__codelineno-8-378" href="#__codelineno-8-378"></a>
</span><span id="__span-8-379"><a id="__codelineno-8-379" name="__codelineno-8-379" href="#__codelineno-8-379"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Humidity: &quot;</span><span class="p">);</span>
</span><span id="__span-8-380"><a id="__codelineno-8-380" name="__codelineno-8-380" href="#__codelineno-8-380"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">humidity</span><span class="p">));</span>
</span><span id="__span-8-381"><a id="__codelineno-8-381" name="__codelineno-8-381" href="#__codelineno-8-381"></a>
</span><span id="__span-8-382"><a id="__codelineno-8-382" name="__codelineno-8-382" href="#__codelineno-8-382"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Pressure: &quot;</span><span class="p">);</span>
</span><span id="__span-8-383"><a id="__codelineno-8-383" name="__codelineno-8-383" href="#__codelineno-8-383"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pressure</span><span class="p">));</span>
</span><span id="__span-8-384"><a id="__codelineno-8-384" name="__codelineno-8-384" href="#__codelineno-8-384"></a>
</span><span id="__span-8-385"><a id="__codelineno-8-385" name="__codelineno-8-385" href="#__codelineno-8-385"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Altitude: &quot;</span><span class="p">);</span>
</span><span id="__span-8-386"><a id="__codelineno-8-386" name="__codelineno-8-386" href="#__codelineno-8-386"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">altitude</span><span class="p">));</span>
</span><span id="__span-8-387"><a id="__codelineno-8-387" name="__codelineno-8-387" href="#__codelineno-8-387"></a>
</span><span id="__span-8-388"><a id="__codelineno-8-388" name="__codelineno-8-388" href="#__codelineno-8-388"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot; Temperature: &quot;</span><span class="p">);</span>
</span><span id="__span-8-389"><a id="__codelineno-8-389" name="__codelineno-8-389" href="#__codelineno-8-389"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">temperature</span><span class="p">));</span>
</span><span id="__span-8-390"><a id="__codelineno-8-390" name="__codelineno-8-390" href="#__codelineno-8-390"></a>
</span><span id="__span-8-391"><a id="__codelineno-8-391" name="__codelineno-8-391" href="#__codelineno-8-391"></a><span class="w">    </span><span class="n">mySensor</span><span class="p">.</span><span class="n">setMode</span><span class="p">(</span><span class="n">MODE_SLEEP</span><span class="p">);</span><span class="w"> </span><span class="c1">//Sleep for now</span>
</span><span id="__span-8-392"><a id="__codelineno-8-392" name="__codelineno-8-392" href="#__codelineno-8-392"></a>
</span><span id="__span-8-393"><a id="__codelineno-8-393" name="__codelineno-8-393" href="#__codelineno-8-393"></a><span class="w">    </span><span class="n">Wire</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
</span><span id="__span-8-394"><a id="__codelineno-8-394" name="__codelineno-8-394" href="#__codelineno-8-394"></a>
</span><span id="__span-8-395"><a id="__codelineno-8-395" name="__codelineno-8-395" href="#__codelineno-8-395"></a><span class="w">    </span><span class="n">logDataToSd</span><span class="p">();</span>
</span><span id="__span-8-396"><a id="__codelineno-8-396" name="__codelineno-8-396" href="#__codelineno-8-396"></a><span class="p">}</span>
</span><span id="__span-8-397"><a id="__codelineno-8-397" name="__codelineno-8-397" href="#__codelineno-8-397"></a>
</span><span id="__span-8-398"><a id="__codelineno-8-398" name="__codelineno-8-398" href="#__codelineno-8-398"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-399"><a id="__codelineno-8-399" name="__codelineno-8-399" href="#__codelineno-8-399"></a><span class="kt">void</span><span class="w"> </span><span class="nf">cidDmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-400"><a id="__codelineno-8-400" name="__codelineno-8-400" href="#__codelineno-8-400"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Manufacturer ID: &quot;</span><span class="p">);</span>
</span><span id="__span-8-401"><a id="__codelineno-8-401" name="__codelineno-8-401" href="#__codelineno-8-401"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">cid</span><span class="p">.</span><span class="n">mid</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-402"><a id="__codelineno-8-402" name="__codelineno-8-402" href="#__codelineno-8-402"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;OEM ID: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">oid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">oid</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-403"><a id="__codelineno-8-403" name="__codelineno-8-403" href="#__codelineno-8-403"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Product: &quot;</span><span class="p">);</span>
</span><span id="__span-8-404"><a id="__codelineno-8-404" name="__codelineno-8-404" href="#__codelineno-8-404"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-405"><a id="__codelineno-8-405" name="__codelineno-8-405" href="#__codelineno-8-405"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">pnm</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span id="__span-8-406"><a id="__codelineno-8-406" name="__codelineno-8-406" href="#__codelineno-8-406"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-407"><a id="__codelineno-8-407" name="__codelineno-8-407" href="#__codelineno-8-407"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Revision: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">prvN</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;.&#39;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">prvM</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-408"><a id="__codelineno-8-408" name="__codelineno-8-408" href="#__codelineno-8-408"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Serial number: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">psn</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-409"><a id="__codelineno-8-409" name="__codelineno-8-409" href="#__codelineno-8-409"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Manufacturing date: &quot;</span><span class="p">);</span>
</span><span id="__span-8-410"><a id="__codelineno-8-410" name="__codelineno-8-410" href="#__codelineno-8-410"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">mdtMonth</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">cid</span><span class="p">.</span><span class="n">mdtYear</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-411"><a id="__codelineno-8-411" name="__codelineno-8-411" href="#__codelineno-8-411"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-412"><a id="__codelineno-8-412" name="__codelineno-8-412" href="#__codelineno-8-412"></a><span class="p">}</span>
</span><span id="__span-8-413"><a id="__codelineno-8-413" name="__codelineno-8-413" href="#__codelineno-8-413"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-414"><a id="__codelineno-8-414" name="__codelineno-8-414" href="#__codelineno-8-414"></a><span class="kt">void</span><span class="w"> </span><span class="nf">clearSerialInput</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-415"><a id="__codelineno-8-415" name="__codelineno-8-415" href="#__codelineno-8-415"></a><span class="w">  </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">micros</span><span class="p">();</span>
</span><span id="__span-8-416"><a id="__codelineno-8-416" name="__codelineno-8-416" href="#__codelineno-8-416"></a><span class="w">  </span><span class="k">do</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-417"><a id="__codelineno-8-417" name="__codelineno-8-417" href="#__codelineno-8-417"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-418"><a id="__codelineno-8-418" name="__codelineno-8-418" href="#__codelineno-8-418"></a><span class="w">      </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">micros</span><span class="p">();</span>
</span><span id="__span-8-419"><a id="__codelineno-8-419" name="__codelineno-8-419" href="#__codelineno-8-419"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-420"><a id="__codelineno-8-420" name="__codelineno-8-420" href="#__codelineno-8-420"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">micros</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10000</span><span class="p">);</span>
</span><span id="__span-8-421"><a id="__codelineno-8-421" name="__codelineno-8-421" href="#__codelineno-8-421"></a><span class="p">}</span>
</span><span id="__span-8-422"><a id="__codelineno-8-422" name="__codelineno-8-422" href="#__codelineno-8-422"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-423"><a id="__codelineno-8-423" name="__codelineno-8-423" href="#__codelineno-8-423"></a><span class="kt">void</span><span class="w"> </span><span class="nf">csdDmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-424"><a id="__codelineno-8-424" name="__codelineno-8-424" href="#__codelineno-8-424"></a><span class="w">  </span><span class="n">eraseSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">csd</span><span class="p">.</span><span class="n">eraseSize</span><span class="p">();</span>
</span><span id="__span-8-425"><a id="__codelineno-8-425" name="__codelineno-8-425" href="#__codelineno-8-425"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;cardSize: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mf">0.000512</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">csd</span><span class="p">.</span><span class="n">capacity</span><span class="p">();</span>
</span><span id="__span-8-426"><a id="__codelineno-8-426" name="__codelineno-8-426" href="#__codelineno-8-426"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot; MB (MB = 1,000,000 bytes)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-427"><a id="__codelineno-8-427" name="__codelineno-8-427" href="#__codelineno-8-427"></a>
</span><span id="__span-8-428"><a id="__codelineno-8-428" name="__codelineno-8-428" href="#__codelineno-8-428"></a>
</span><span id="__span-8-429"><a id="__codelineno-8-429" name="__codelineno-8-429" href="#__codelineno-8-429"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;flashEraseSize: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">eraseSize</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot; blocks</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-430"><a id="__codelineno-8-430" name="__codelineno-8-430" href="#__codelineno-8-430"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;eraseSingleBlock: &quot;</span><span class="p">);</span>
</span><span id="__span-8-431"><a id="__codelineno-8-431" name="__codelineno-8-431" href="#__codelineno-8-431"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">csd</span><span class="p">.</span><span class="n">eraseSingleBlock</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-432"><a id="__codelineno-8-432" name="__codelineno-8-432" href="#__codelineno-8-432"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;true</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-433"><a id="__codelineno-8-433" name="__codelineno-8-433" href="#__codelineno-8-433"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-434"><a id="__codelineno-8-434" name="__codelineno-8-434" href="#__codelineno-8-434"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;false</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-435"><a id="__codelineno-8-435" name="__codelineno-8-435" href="#__codelineno-8-435"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-436"><a id="__codelineno-8-436" name="__codelineno-8-436" href="#__codelineno-8-436"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;dataAfterErase: &quot;</span><span class="p">);</span>
</span><span id="__span-8-437"><a id="__codelineno-8-437" name="__codelineno-8-437" href="#__codelineno-8-437"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">scr</span><span class="p">.</span><span class="n">dataAfterErase</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-438"><a id="__codelineno-8-438" name="__codelineno-8-438" href="#__codelineno-8-438"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;ones</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-439"><a id="__codelineno-8-439" name="__codelineno-8-439" href="#__codelineno-8-439"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-440"><a id="__codelineno-8-440" name="__codelineno-8-440" href="#__codelineno-8-440"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;zeros</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-441"><a id="__codelineno-8-441" name="__codelineno-8-441" href="#__codelineno-8-441"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-442"><a id="__codelineno-8-442" name="__codelineno-8-442" href="#__codelineno-8-442"></a><span class="p">}</span>
</span><span id="__span-8-443"><a id="__codelineno-8-443" name="__codelineno-8-443" href="#__codelineno-8-443"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-444"><a id="__codelineno-8-444" name="__codelineno-8-444" href="#__codelineno-8-444"></a><span class="kt">void</span><span class="w"> </span><span class="nf">errorPrint</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-445"><a id="__codelineno-8-445" name="__codelineno-8-445" href="#__codelineno-8-445"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorCode</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-446"><a id="__codelineno-8-446" name="__codelineno-8-446" href="#__codelineno-8-446"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD errorCode: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="p">;</span>
</span><span id="__span-8-447"><a id="__codelineno-8-447" name="__codelineno-8-447" href="#__codelineno-8-447"></a><span class="w">    </span><span class="n">printSdErrorSymbol</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Serial</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorCode</span><span class="p">());</span>
</span><span id="__span-8-448"><a id="__codelineno-8-448" name="__codelineno-8-448" href="#__codelineno-8-448"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot; = &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorCode</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-449"><a id="__codelineno-8-449" name="__codelineno-8-449" href="#__codelineno-8-449"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD errorData = &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">sdErrorData</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-450"><a id="__codelineno-8-450" name="__codelineno-8-450" href="#__codelineno-8-450"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-451"><a id="__codelineno-8-451" name="__codelineno-8-451" href="#__codelineno-8-451"></a><span class="p">}</span>
</span><span id="__span-8-452"><a id="__codelineno-8-452" name="__codelineno-8-452" href="#__codelineno-8-452"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-453"><a id="__codelineno-8-453" name="__codelineno-8-453" href="#__codelineno-8-453"></a><span class="kt">bool</span><span class="w"> </span><span class="nf">mbrDmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-454"><a id="__codelineno-8-454" name="__codelineno-8-454" href="#__codelineno-8-454"></a><span class="w">  </span><span class="n">MbrSector_t</span><span class="w"> </span><span class="n">mbr</span><span class="p">;</span>
</span><span id="__span-8-455"><a id="__codelineno-8-455" name="__codelineno-8-455" href="#__codelineno-8-455"></a><span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><span id="__span-8-456"><a id="__codelineno-8-456" name="__codelineno-8-456" href="#__codelineno-8-456"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">readSector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">mbr</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-457"><a id="__codelineno-8-457" name="__codelineno-8-457" href="#__codelineno-8-457"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">read MBR failed.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-458"><a id="__codelineno-8-458" name="__codelineno-8-458" href="#__codelineno-8-458"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span>
</span><span id="__span-8-459"><a id="__codelineno-8-459" name="__codelineno-8-459" href="#__codelineno-8-459"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-8-460"><a id="__codelineno-8-460" name="__codelineno-8-460" href="#__codelineno-8-460"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-461"><a id="__codelineno-8-461" name="__codelineno-8-461" href="#__codelineno-8-461"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">SD Partition Table</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-462"><a id="__codelineno-8-462" name="__codelineno-8-462" href="#__codelineno-8-462"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;part,boot,bgnCHS[3],type,endCHS[3],start,length</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-463"><a id="__codelineno-8-463" name="__codelineno-8-463" href="#__codelineno-8-463"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">ip</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-464"><a id="__codelineno-8-464" name="__codelineno-8-464" href="#__codelineno-8-464"></a><span class="w">    </span><span class="n">MbrPart_t</span><span class="w"> </span><span class="o">*</span><span class="n">pt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mbr</span><span class="p">.</span><span class="n">part</span><span class="p">[</span><span class="n">ip</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
</span><span id="__span-8-465"><a id="__codelineno-8-465" name="__codelineno-8-465" href="#__codelineno-8-465"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">boot</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">boot</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mh">0X80</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
</span><span id="__span-8-466"><a id="__codelineno-8-466" name="__codelineno-8-466" href="#__codelineno-8-466"></a><span class="w">        </span><span class="n">getLe32</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">relativeSectors</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">csd</span><span class="p">.</span><span class="n">capacity</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-467"><a id="__codelineno-8-467" name="__codelineno-8-467" href="#__codelineno-8-467"></a><span class="w">      </span><span class="n">valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</span><span id="__span-8-468"><a id="__codelineno-8-468" name="__codelineno-8-468" href="#__codelineno-8-468"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-469"><a id="__codelineno-8-469" name="__codelineno-8-469" href="#__codelineno-8-469"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">uppercase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">showbase</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">hex</span><span class="p">;</span>
</span><span id="__span-8-470"><a id="__codelineno-8-470" name="__codelineno-8-470" href="#__codelineno-8-470"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">boot</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-8-471"><a id="__codelineno-8-471" name="__codelineno-8-471" href="#__codelineno-8-471"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-472"><a id="__codelineno-8-472" name="__codelineno-8-472" href="#__codelineno-8-472"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">beginCHS</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-8-473"><a id="__codelineno-8-473" name="__codelineno-8-473" href="#__codelineno-8-473"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-474"><a id="__codelineno-8-474" name="__codelineno-8-474" href="#__codelineno-8-474"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-8-475"><a id="__codelineno-8-475" name="__codelineno-8-475" href="#__codelineno-8-475"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-476"><a id="__codelineno-8-476" name="__codelineno-8-476" href="#__codelineno-8-476"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">endCHS</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-8-477"><a id="__codelineno-8-477" name="__codelineno-8-477" href="#__codelineno-8-477"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-478"><a id="__codelineno-8-478" name="__codelineno-8-478" href="#__codelineno-8-478"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dec</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">getLe32</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">relativeSectors</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;,&#39;</span><span class="p">;</span>
</span><span id="__span-8-479"><a id="__codelineno-8-479" name="__codelineno-8-479" href="#__codelineno-8-479"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">getLe32</span><span class="p">(</span><span class="n">pt</span><span class="o">-&gt;</span><span class="n">totalSectors</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-480"><a id="__codelineno-8-480" name="__codelineno-8-480" href="#__codelineno-8-480"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-481"><a id="__codelineno-8-481" name="__codelineno-8-481" href="#__codelineno-8-481"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">valid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-482"><a id="__codelineno-8-482" name="__codelineno-8-482" href="#__codelineno-8-482"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">MBR not valid, assuming Super Floppy format.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-483"><a id="__codelineno-8-483" name="__codelineno-8-483" href="#__codelineno-8-483"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-484"><a id="__codelineno-8-484" name="__codelineno-8-484" href="#__codelineno-8-484"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</span><span id="__span-8-485"><a id="__codelineno-8-485" name="__codelineno-8-485" href="#__codelineno-8-485"></a><span class="p">}</span>
</span><span id="__span-8-486"><a id="__codelineno-8-486" name="__codelineno-8-486" href="#__codelineno-8-486"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-487"><a id="__codelineno-8-487" name="__codelineno-8-487" href="#__codelineno-8-487"></a><span class="kt">void</span><span class="w"> </span><span class="nf">dmpVol</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-488"><a id="__codelineno-8-488" name="__codelineno-8-488" href="#__codelineno-8-488"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Scanning FAT, please wait.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-489"><a id="__codelineno-8-489" name="__codelineno-8-489" href="#__codelineno-8-489"></a><span class="w">  </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">freeClusterCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">freeClusterCount</span><span class="p">();</span>
</span><span id="__span-8-490"><a id="__codelineno-8-490" name="__codelineno-8-490" href="#__codelineno-8-490"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">fatType</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-491"><a id="__codelineno-8-491" name="__codelineno-8-491" href="#__codelineno-8-491"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Volume is FAT&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">fatType</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-492"><a id="__codelineno-8-492" name="__codelineno-8-492" href="#__codelineno-8-492"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-493"><a id="__codelineno-8-493" name="__codelineno-8-493" href="#__codelineno-8-493"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Volume is exFAT</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-494"><a id="__codelineno-8-494" name="__codelineno-8-494" href="#__codelineno-8-494"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-495"><a id="__codelineno-8-495" name="__codelineno-8-495" href="#__codelineno-8-495"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;sectorsPerCluster: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">sectorsPerCluster</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-496"><a id="__codelineno-8-496" name="__codelineno-8-496" href="#__codelineno-8-496"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;fatStartSector:    &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">fatStartSector</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-497"><a id="__codelineno-8-497" name="__codelineno-8-497" href="#__codelineno-8-497"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;dataStartSector:   &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">dataStartSector</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-498"><a id="__codelineno-8-498" name="__codelineno-8-498" href="#__codelineno-8-498"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;clusterCount:      &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">clusterCount</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w">  </span>
</span><span id="__span-8-499"><a id="__codelineno-8-499" name="__codelineno-8-499" href="#__codelineno-8-499"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;freeClusterCount:  &quot;</span><span class="p">);</span>
</span><span id="__span-8-500"><a id="__codelineno-8-500" name="__codelineno-8-500" href="#__codelineno-8-500"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">freeClusterCount</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-501"><a id="__codelineno-8-501" name="__codelineno-8-501" href="#__codelineno-8-501"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">freeClusterCount</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-502"><a id="__codelineno-8-502" name="__codelineno-8-502" href="#__codelineno-8-502"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-503"><a id="__codelineno-8-503" name="__codelineno-8-503" href="#__codelineno-8-503"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-504"><a id="__codelineno-8-504" name="__codelineno-8-504" href="#__codelineno-8-504"></a><span class="w">    </span><span class="n">errorPrint</span><span class="p">();</span><span class="w">    </span>
</span><span id="__span-8-505"><a id="__codelineno-8-505" name="__codelineno-8-505" href="#__codelineno-8-505"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-506"><a id="__codelineno-8-506" name="__codelineno-8-506" href="#__codelineno-8-506"></a><span class="p">}</span>
</span><span id="__span-8-507"><a id="__codelineno-8-507" name="__codelineno-8-507" href="#__codelineno-8-507"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-508"><a id="__codelineno-8-508" name="__codelineno-8-508" href="#__codelineno-8-508"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printCardType</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-509"><a id="__codelineno-8-509" name="__codelineno-8-509" href="#__codelineno-8-509"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Card type: &quot;</span><span class="p">);</span>
</span><span id="__span-8-510"><a id="__codelineno-8-510" name="__codelineno-8-510" href="#__codelineno-8-510"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">sd</span><span class="p">.</span><span class="n">card</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">type</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-511"><a id="__codelineno-8-511" name="__codelineno-8-511" href="#__codelineno-8-511"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">SD_CARD_TYPE_SD1</span><span class="p">:</span>
</span><span id="__span-8-512"><a id="__codelineno-8-512" name="__codelineno-8-512" href="#__codelineno-8-512"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-513"><a id="__codelineno-8-513" name="__codelineno-8-513" href="#__codelineno-8-513"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-514"><a id="__codelineno-8-514" name="__codelineno-8-514" href="#__codelineno-8-514"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">SD_CARD_TYPE_SD2</span><span class="p">:</span>
</span><span id="__span-8-515"><a id="__codelineno-8-515" name="__codelineno-8-515" href="#__codelineno-8-515"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SD2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-516"><a id="__codelineno-8-516" name="__codelineno-8-516" href="#__codelineno-8-516"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-517"><a id="__codelineno-8-517" name="__codelineno-8-517" href="#__codelineno-8-517"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">SD_CARD_TYPE_SDHC</span><span class="p">:</span>
</span><span id="__span-8-518"><a id="__codelineno-8-518" name="__codelineno-8-518" href="#__codelineno-8-518"></a><span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">csd</span><span class="p">.</span><span class="n">capacity</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">70000000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-519"><a id="__codelineno-8-519" name="__codelineno-8-519" href="#__codelineno-8-519"></a><span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SDHC</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-520"><a id="__codelineno-8-520" name="__codelineno-8-520" href="#__codelineno-8-520"></a><span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-521"><a id="__codelineno-8-521" name="__codelineno-8-521" href="#__codelineno-8-521"></a><span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;SDXC</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-522"><a id="__codelineno-8-522" name="__codelineno-8-522" href="#__codelineno-8-522"></a><span class="w">      </span><span class="p">}</span>
</span><span id="__span-8-523"><a id="__codelineno-8-523" name="__codelineno-8-523" href="#__codelineno-8-523"></a><span class="w">      </span><span class="k">break</span><span class="p">;</span>
</span><span id="__span-8-524"><a id="__codelineno-8-524" name="__codelineno-8-524" href="#__codelineno-8-524"></a><span class="w">    </span><span class="k">default</span><span class="o">:</span>
</span><span id="__span-8-525"><a id="__codelineno-8-525" name="__codelineno-8-525" href="#__codelineno-8-525"></a><span class="w">      </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Unknown</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-526"><a id="__codelineno-8-526" name="__codelineno-8-526" href="#__codelineno-8-526"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-527"><a id="__codelineno-8-527" name="__codelineno-8-527" href="#__codelineno-8-527"></a><span class="p">}</span>
</span><span id="__span-8-528"><a id="__codelineno-8-528" name="__codelineno-8-528" href="#__codelineno-8-528"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-529"><a id="__codelineno-8-529" name="__codelineno-8-529" href="#__codelineno-8-529"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printConfig</span><span class="p">(</span><span class="n">SdSpiConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-530"><a id="__codelineno-8-530" name="__codelineno-8-530" href="#__codelineno-8-530"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-531"><a id="__codelineno-8-531" name="__codelineno-8-531" href="#__codelineno-8-531"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span>
</span><span id="__span-8-532"><a id="__codelineno-8-532" name="__codelineno-8-532" href="#__codelineno-8-532"></a><span class="w">           </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Assuming the SD is the only SPI device.</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span id="__span-8-533"><a id="__codelineno-8-533" name="__codelineno-8-533" href="#__codelineno-8-533"></a><span class="w">           </span><span class="s">&quot;Edit DISABLE_CS_PIN to disable an SPI device.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-534"><a id="__codelineno-8-534" name="__codelineno-8-534" href="#__codelineno-8-534"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-535"><a id="__codelineno-8-535" name="__codelineno-8-535" href="#__codelineno-8-535"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Disabling SPI device on pin &quot;</span><span class="p">);</span>
</span><span id="__span-8-536"><a id="__codelineno-8-536" name="__codelineno-8-536" href="#__codelineno-8-536"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</span><span id="__span-8-537"><a id="__codelineno-8-537" name="__codelineno-8-537" href="#__codelineno-8-537"></a><span class="w">    </span><span class="n">pinMode</span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">OUTPUT</span><span class="p">);</span>
</span><span id="__span-8-538"><a id="__codelineno-8-538" name="__codelineno-8-538" href="#__codelineno-8-538"></a><span class="w">    </span><span class="n">digitalWrite</span><span class="p">(</span><span class="n">DISABLE_CS_PIN</span><span class="p">,</span><span class="w"> </span><span class="n">HIGH</span><span class="p">);</span>
</span><span id="__span-8-539"><a id="__codelineno-8-539" name="__codelineno-8-539" href="#__codelineno-8-539"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-540"><a id="__codelineno-8-540" name="__codelineno-8-540" href="#__codelineno-8-540"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Assuming the SD chip select pin is: &quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="kt">int</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">csPin</span><span class="p">);</span>
</span><span id="__span-8-541"><a id="__codelineno-8-541" name="__codelineno-8-541" href="#__codelineno-8-541"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Edit SD_CS_PIN to change the SD chip select pin.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-542"><a id="__codelineno-8-542" name="__codelineno-8-542" href="#__codelineno-8-542"></a><span class="p">}</span>
</span><span id="__span-8-543"><a id="__codelineno-8-543" name="__codelineno-8-543" href="#__codelineno-8-543"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-544"><a id="__codelineno-8-544" name="__codelineno-8-544" href="#__codelineno-8-544"></a><span class="kt">void</span><span class="w"> </span><span class="nf">printConfig</span><span class="p">(</span><span class="n">SdioConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-545"><a id="__codelineno-8-545" name="__codelineno-8-545" href="#__codelineno-8-545"></a><span class="w">  </span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">config</span><span class="p">;</span>
</span><span id="__span-8-546"><a id="__codelineno-8-546" name="__codelineno-8-546" href="#__codelineno-8-546"></a><span class="w">  </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Assuming an SDIO interface.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-8-547"><a id="__codelineno-8-547" name="__codelineno-8-547" href="#__codelineno-8-547"></a><span class="p">}</span>
</span><span id="__span-8-548"><a id="__codelineno-8-548" name="__codelineno-8-548" href="#__codelineno-8-548"></a>
</span><span id="__span-8-549"><a id="__codelineno-8-549" name="__codelineno-8-549" href="#__codelineno-8-549"></a><span class="c1">//------------------------------------------------------------------------------</span>
</span><span id="__span-8-550"><a id="__codelineno-8-550" name="__codelineno-8-550" href="#__codelineno-8-550"></a><span class="kt">void</span><span class="w"> </span><span class="nf">logDataToSd</span><span class="p">()</span>
</span><span id="__span-8-551"><a id="__codelineno-8-551" name="__codelineno-8-551" href="#__codelineno-8-551"></a><span class="p">{</span>
</span><span id="__span-8-552"><a id="__codelineno-8-552" name="__codelineno-8-552" href="#__codelineno-8-552"></a><span class="w">  </span><span class="c1">// open the file. note that only one file can be open at a time,</span>
</span><span id="__span-8-553"><a id="__codelineno-8-553" name="__codelineno-8-553" href="#__codelineno-8-553"></a><span class="w">  </span><span class="c1">// so you have to close this one before opening another.</span>
</span><span id="__span-8-554"><a id="__codelineno-8-554" name="__codelineno-8-554" href="#__codelineno-8-554"></a><span class="w">  </span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;log.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">FILE_WRITE</span><span class="p">);</span>
</span><span id="__span-8-555"><a id="__codelineno-8-555" name="__codelineno-8-555" href="#__codelineno-8-555"></a>
</span><span id="__span-8-556"><a id="__codelineno-8-556" name="__codelineno-8-556" href="#__codelineno-8-556"></a><span class="w">  </span><span class="c1">// if the file opened okay, write to it:</span>
</span><span id="__span-8-557"><a id="__codelineno-8-557" name="__codelineno-8-557" href="#__codelineno-8-557"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-558"><a id="__codelineno-8-558" name="__codelineno-8-558" href="#__codelineno-8-558"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Writing to log.txt...&quot;</span><span class="p">);</span>
</span><span id="__span-8-559"><a id="__codelineno-8-559" name="__codelineno-8-559" href="#__codelineno-8-559"></a>
</span><span id="__span-8-560"><a id="__codelineno-8-560" name="__codelineno-8-560" href="#__codelineno-8-560"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Humidity:&quot;</span><span class="p">);</span>
</span><span id="__span-8-561"><a id="__codelineno-8-561" name="__codelineno-8-561" href="#__codelineno-8-561"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">humidity</span><span class="p">);</span>
</span><span id="__span-8-562"><a id="__codelineno-8-562" name="__codelineno-8-562" href="#__codelineno-8-562"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;,Pressure:&quot;</span><span class="p">);</span>
</span><span id="__span-8-563"><a id="__codelineno-8-563" name="__codelineno-8-563" href="#__codelineno-8-563"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">pressure</span><span class="p">);</span>
</span><span id="__span-8-564"><a id="__codelineno-8-564" name="__codelineno-8-564" href="#__codelineno-8-564"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;,Altitude:&quot;</span><span class="p">);</span>
</span><span id="__span-8-565"><a id="__codelineno-8-565" name="__codelineno-8-565" href="#__codelineno-8-565"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">altitude</span><span class="p">);</span>
</span><span id="__span-8-566"><a id="__codelineno-8-566" name="__codelineno-8-566" href="#__codelineno-8-566"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;,Temperature:&quot;</span><span class="p">);</span>
</span><span id="__span-8-567"><a id="__codelineno-8-567" name="__codelineno-8-567" href="#__codelineno-8-567"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">temperature</span><span class="p">);</span>
</span><span id="__span-8-568"><a id="__codelineno-8-568" name="__codelineno-8-568" href="#__codelineno-8-568"></a>
</span><span id="__span-8-569"><a id="__codelineno-8-569" name="__codelineno-8-569" href="#__codelineno-8-569"></a><span class="w">    </span><span class="c1">// close the file:</span>
</span><span id="__span-8-570"><a id="__codelineno-8-570" name="__codelineno-8-570" href="#__codelineno-8-570"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span><span id="__span-8-571"><a id="__codelineno-8-571" name="__codelineno-8-571" href="#__codelineno-8-571"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;done.&quot;</span><span class="p">);</span>
</span><span id="__span-8-572"><a id="__codelineno-8-572" name="__codelineno-8-572" href="#__codelineno-8-572"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-573"><a id="__codelineno-8-573" name="__codelineno-8-573" href="#__codelineno-8-573"></a><span class="w">    </span><span class="c1">// if the file didn&#39;t open, print an error:</span>
</span><span id="__span-8-574"><a id="__codelineno-8-574" name="__codelineno-8-574" href="#__codelineno-8-574"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;error opening log.txt&quot;</span><span class="p">);</span>
</span><span id="__span-8-575"><a id="__codelineno-8-575" name="__codelineno-8-575" href="#__codelineno-8-575"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-576"><a id="__codelineno-8-576" name="__codelineno-8-576" href="#__codelineno-8-576"></a>
</span><span id="__span-8-577"><a id="__codelineno-8-577" name="__codelineno-8-577" href="#__codelineno-8-577"></a><span class="w">  </span><span class="c1">// re-open the file for reading:</span>
</span><span id="__span-8-578"><a id="__codelineno-8-578" name="__codelineno-8-578" href="#__codelineno-8-578"></a><span class="w">  </span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">&quot;log.txt&quot;</span><span class="p">);</span>
</span><span id="__span-8-579"><a id="__codelineno-8-579" name="__codelineno-8-579" href="#__codelineno-8-579"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myFile</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-580"><a id="__codelineno-8-580" name="__codelineno-8-580" href="#__codelineno-8-580"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;log.txt:&quot;</span><span class="p">);</span>
</span><span id="__span-8-581"><a id="__codelineno-8-581" name="__codelineno-8-581" href="#__codelineno-8-581"></a>
</span><span id="__span-8-582"><a id="__codelineno-8-582" name="__codelineno-8-582" href="#__codelineno-8-582"></a>
</span><span id="__span-8-583"><a id="__codelineno-8-583" name="__codelineno-8-583" href="#__codelineno-8-583"></a><span class="w">    </span><span class="c1">// read from the file until there&#39;s nothing else in it:</span>
</span><span id="__span-8-584"><a id="__codelineno-8-584" name="__codelineno-8-584" href="#__codelineno-8-584"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">myFile</span><span class="p">.</span><span class="n">available</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-585"><a id="__codelineno-8-585" name="__codelineno-8-585" href="#__codelineno-8-585"></a><span class="w">      </span><span class="n">Serial</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">myFile</span><span class="p">.</span><span class="n">read</span><span class="p">());</span>
</span><span id="__span-8-586"><a id="__codelineno-8-586" name="__codelineno-8-586" href="#__codelineno-8-586"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-8-587"><a id="__codelineno-8-587" name="__codelineno-8-587" href="#__codelineno-8-587"></a><span class="w">    </span><span class="c1">// close the file:</span>
</span><span id="__span-8-588"><a id="__codelineno-8-588" name="__codelineno-8-588" href="#__codelineno-8-588"></a><span class="w">    </span><span class="n">myFile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
</span><span id="__span-8-589"><a id="__codelineno-8-589" name="__codelineno-8-589" href="#__codelineno-8-589"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-590"><a id="__codelineno-8-590" name="__codelineno-8-590" href="#__codelineno-8-590"></a><span class="w">    </span><span class="c1">// if the file didn&#39;t open, print an error:</span>
</span><span id="__span-8-591"><a id="__codelineno-8-591" name="__codelineno-8-591" href="#__codelineno-8-591"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;error opening log.txt&quot;</span><span class="p">);</span>
</span><span id="__span-8-592"><a id="__codelineno-8-592" name="__codelineno-8-592" href="#__codelineno-8-592"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-593"><a id="__codelineno-8-593" name="__codelineno-8-593" href="#__codelineno-8-593"></a><span class="p">}</span>
</span></code></pre></div>
<p>Open the Arduino Serial Monitor at <strong>115200</strong> to view the output. You should see the NORA-W306 wake up, read the sensor data, user LED blink, print the data as an integer through the serial terminal, write to a file, and then close the file. For verification, the code will also re-open the file, print the contents of the file, and then close the file again. This is a good time to verify if the sensor readings are being written at the end of the file.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Deep_Sleep_DataLogging_BME280_Arduino.JPG"><img src="../assets/img/NORA-W306_Deep_Sleep_DataLogging_BME280_Arduino.JPG" width="600px" height="600px" alt="Arduino Output from the NORA-W306's Deep Sleep and Datalogging Example"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Arduino Output from the NORA-W306's Deep Sleep and Datalogging Example</i></td>
    </tr>
  </table>
</div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For users that need to comment out the lines of code to re-open the file and read the sensor data, you will just need to add a multiline comment (i.e. /* and <code>*/</code>) around the following lines of code as shown below.</p>
<div class="highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="w">  </span><span class="c1">// re-open the file for reading:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="cm">/*myFile = sd.open(&quot;log.txt&quot;);</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="cm">  if (myFile) {</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="cm">    Serial.println(&quot;log.txt:&quot;);</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="cm">    // read from the file until there&#39;s nothing else in it:</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="cm">    while (myFile.available()) {</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="cm">      Serial.write(myFile.read());</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="cm">    }</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="cm">    // close the file:</span>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="cm">    myFile.close();</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="cm">  } else {</span>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="cm">    // if the file didn&#39;t open, print an error:</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="cm">    Serial.println(&quot;error opening log.txt&quot;);</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="cm">  }*/</span>
</span></code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The sensor output in the Arduino Serial Monitor displayed the sensor reading as integers. When writing to the file, the sensor readings were floats.</p>
</div>
<p>For those that want to verify through a text editor, remove the USB cable from the NORA-W306. Then remove the microSD card from the board. Connect the microSD card to your computer. Using a text editor, open the file labeled as <strong>log.txt</strong>. You should see the sensor readings that were logged earlier. You may have an additional line of comma separated values written to the file before removing power from the board.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_datalogging_log_file_BME280_sensor_reading.JPG"><img src="../assets/img/NORA-W306_datalogging_log_file_BME280_sensor_reading.JPG" width="600px" height="600px" alt="Log File Opened Through Text Editor Displaying Sensor Readings"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Log File Opened Through Text Editor Displaying Sensor Readings</i></td>
    </tr>
  </table>
</div>

<p>For those interested in viewing the current consumption, cut the MEAS jumper on the back of the NORA-W306. Solder a 1x2 breakaway male header to the board. Then connect it to a multimeter to measure the current consumption. Using a LiPo battery will bring down the current consumption since the LiPo battery charger, CHG LED, and CP2102 USB-to-serial converter are not being powered. Try disabling the power LED jumpers on the NORA-W306 and BME280. You can take it a step further by also disabling power to the WS2812 by cutting the JP3 jumper.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Low_Power_Deep_Sleep_microSD_BME280_Multimeter_PTH_no_battery_bb.jpg"><img src="../assets/img/NORA-W306_Low_Power_Deep_Sleep_microSD_BME280_Multimeter_PTH_no_battery_bb.jpg" width="600px" height="600px" alt="Fritzing Diagram Multimeter Connected to NORA-W306's MESA Jumper, no battery"></a></td>
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Low_Power_Deep_Sleep_microSD_BME280_Multimeter_PTH_bb.jpg"><img src="../assets/img/NORA-W306_Low_Power_Deep_Sleep_microSD_BME280_Multimeter_PTH_bb.jpg" width="600px" height="600px" alt="Fritzing Diagram Multimeter Connected to NORA-W306's MESA Jumper"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;" colspan="2"><i>Fritzing Diagrams with Multimeter Connected to NORA-W306's MEAS Jumper</i></td>
    </tr>
  </table>
</div>

<h1 id="example-9-max17048-lipo-fuel-gauge">Example 9 - MAX17048 LiPo Fuel Gauge<a class="headerlink" href="#example-9-max17048-lipo-fuel-gauge" title="Permanent link"></a></h1>
<p>In this example, we will measure the LiPo battery's capacity using the built-in MAX17048 LiPo Fuel Gauge.</p>
<h3 id="hardware-hookup_9">Hardware Hookup<a class="headerlink" href="#hardware-hookup_9" title="Permanent link"></a></h3>
<p>We recommend connecting a single cell LiPo battery to the 2-pin JST style connector. If you have not already, connect a compatible single cell, LiPo battery to the board.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Battery.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Battery.jpg" width="600px" height="600px" alt="Battery Connected"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Battery Connected</i></td>
    </tr>
  </table>
</div>

<p>When ready, connect the board to your computer with the USB C cable.</p>
<h3 id="installing-the-arduino-library_1">Installing the Arduino Library<a class="headerlink" href="#installing-the-arduino-library_1" title="Permanent link"></a></h3>
<p>First, you&apos;ll need to download and install the <strong>SparkFun MAX1704x Fuel Gauge Arduino Library</strong>. You can install this library automatically in the Arduino IDE&apos;s Library Manager by searching for "<strong>SparkFun MAX1704x Fuel Gauge</strong>". Or you can manually download it from the <a href="https://github.com/sparkfun/SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library">GitHub repository</a>.</p>
<div style="text-align: center"><a href="https://github.com/sparkfun/SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library/archive/refs/heads/main.zip" class="md-button">Download the SparkFun MAX1704x Fuel Gauge Arduino Library (ZIP)</a></div>

<h3 id="arduino-code_8">Arduino Code<a class="headerlink" href="#arduino-code_8" title="Permanent link"></a></h3>
<p>In this example, we will be checking a single cell LiPo battery&apos;s voltage and the state of charge using the MAX17048. The output will be sent to the Serial Monitor.</p>
<p>From the menu, select the following: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <strong>SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library</strong> &gt; <strong>Example1_Simple</strong>. Comment out the default instance for the MAX17043 and uncomment the line for the MAX17048.</p>
<div class="highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">//SFE_MAX1704X lipo; // Defaults to the MAX17043</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17043); // Create a MAX17043</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17044); // Create a MAX17044</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="n">SFE_MAX1704X</span><span class="w"> </span><span class="nf">lipo</span><span class="p">(</span><span class="n">MAX1704X_MAX17048</span><span class="p">);</span><span class="w"> </span><span class="c1">// Create a MAX17048</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17049); // Create a MAX17049</span>
</span></code></pre></div>
<p>Or you can copy and paste the following code in the Arduino IDE. Select your Board (in this case the <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>), and associated COM port (in this case <strong>COM13</strong>). Then hit the upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="cm">/******************************************************************************</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="cm">Example1_Simple</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="cm">By: Paul Clark</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="cm">Date: October 23rd 2020</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="cm">Based extensively on:</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="cm">MAX17043_Simple_Serial.cpp</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="cm">SparkFun MAX17043 Example Code</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="cm">Jim Lindblom @ SparkFun Electronics</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="cm">Original Creation Date: June 22, 2015</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="cm">This file demonstrates the simple API of the SparkFun MAX17043 Arduino library.</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="cm">This example will print the gauge&#39;s voltage and state-of-charge (SOC) readings</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="cm">to Serial (115200 baud)</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="cm">This code is released under the MIT license.</span>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="cm">Distributed as-is; no warranty is given.</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="cm">******************************************************************************/</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span><span class="c1"> // Needed for I2C</span>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library.h&gt;</span><span class="c1"> // Click here to get the library: http://librarymanager/All#SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library</span>
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a>
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="c1">//SFE_MAX1704X lipo; // Defaults to the MAX17043</span>
</span><span id="__span-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a>
</span><span id="__span-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17043); // Create a MAX17043</span>
</span><span id="__span-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17044); // Create a MAX17044</span>
</span><span id="__span-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="n">SFE_MAX1704X</span><span class="w"> </span><span class="nf">lipo</span><span class="p">(</span><span class="n">MAX1704X_MAX17048</span><span class="p">);</span><span class="w"> </span><span class="c1">// Create a MAX17048</span>
</span><span id="__span-11-31"><a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17049); // Create a MAX17049</span>
</span><span id="__span-11-32"><a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>
</span><span id="__span-11-33"><a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a><span class="kt">double</span><span class="w"> </span><span class="n">voltage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Variable to keep track of LiPo voltage</span>
</span><span id="__span-11-34"><a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a><span class="kt">double</span><span class="w"> </span><span class="n">soc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Variable to keep track of LiPo state-of-charge (SOC)</span>
</span><span id="__span-11-35"><a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a><span class="kt">bool</span><span class="w"> </span><span class="n">alert</span><span class="p">;</span><span class="w"> </span><span class="c1">// Variable to keep track of whether alert has been triggered</span>
</span><span id="__span-11-36"><a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a>
</span><span id="__span-11-37"><a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span>
</span><span id="__span-11-38"><a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a><span class="p">{</span>
</span><span id="__span-11-39"><a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span><span class="w"> </span><span class="c1">// Start serial, to output debug data</span>
</span><span id="__span-11-40"><a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a><span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">)</span>
</span><span id="__span-11-41"><a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="c1">//Wait for user to open terminal</span>
</span><span id="__span-11-42"><a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;MAX17043 Example&quot;</span><span class="p">));</span>
</span><span id="__span-11-43"><a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a>
</span><span id="__span-11-44"><a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a><span class="w">  </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span id="__span-11-45"><a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a>
</span><span id="__span-11-46"><a id="__codelineno-11-46" name="__codelineno-11-46" href="#__codelineno-11-46"></a><span class="w">  </span><span class="n">lipo</span><span class="p">.</span><span class="n">enableDebugging</span><span class="p">();</span><span class="w"> </span><span class="c1">// Uncomment this line to enable helpful debug messages on Serial</span>
</span><span id="__span-11-47"><a id="__codelineno-11-47" name="__codelineno-11-47" href="#__codelineno-11-47"></a>
</span><span id="__span-11-48"><a id="__codelineno-11-48" name="__codelineno-11-48" href="#__codelineno-11-48"></a><span class="w">  </span><span class="c1">// Set up the MAX17043 LiPo fuel gauge:</span>
</span><span id="__span-11-49"><a id="__codelineno-11-49" name="__codelineno-11-49" href="#__codelineno-11-49"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lipo</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// Connect to the MAX17043 using the default wire port</span>
</span><span id="__span-11-50"><a id="__codelineno-11-50" name="__codelineno-11-50" href="#__codelineno-11-50"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-11-51"><a id="__codelineno-11-51" name="__codelineno-11-51" href="#__codelineno-11-51"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;MAX17043 not detected. Please check wiring. Freezing.&quot;</span><span class="p">));</span>
</span><span id="__span-11-52"><a id="__codelineno-11-52" name="__codelineno-11-52" href="#__codelineno-11-52"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-11-53"><a id="__codelineno-11-53" name="__codelineno-11-53" href="#__codelineno-11-53"></a><span class="w">      </span><span class="p">;</span>
</span><span id="__span-11-54"><a id="__codelineno-11-54" name="__codelineno-11-54" href="#__codelineno-11-54"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-11-55"><a id="__codelineno-11-55" name="__codelineno-11-55" href="#__codelineno-11-55"></a>
</span><span id="__span-11-56"><a id="__codelineno-11-56" name="__codelineno-11-56" href="#__codelineno-11-56"></a><span class="w">    </span><span class="c1">// Quick start restarts the MAX17043 in hopes of getting a more accurate</span>
</span><span id="__span-11-57"><a id="__codelineno-11-57" name="__codelineno-11-57" href="#__codelineno-11-57"></a><span class="w">    </span><span class="c1">// guess for the SOC.</span>
</span><span id="__span-11-58"><a id="__codelineno-11-58" name="__codelineno-11-58" href="#__codelineno-11-58"></a><span class="w">    </span><span class="n">lipo</span><span class="p">.</span><span class="n">quickStart</span><span class="p">();</span>
</span><span id="__span-11-59"><a id="__codelineno-11-59" name="__codelineno-11-59" href="#__codelineno-11-59"></a>
</span><span id="__span-11-60"><a id="__codelineno-11-60" name="__codelineno-11-60" href="#__codelineno-11-60"></a><span class="w">    </span><span class="c1">// We can set an interrupt to alert when the battery SoC gets too low.</span>
</span><span id="__span-11-61"><a id="__codelineno-11-61" name="__codelineno-11-61" href="#__codelineno-11-61"></a><span class="w">    </span><span class="c1">// We can alert at anywhere between 1% - 32%:</span>
</span><span id="__span-11-62"><a id="__codelineno-11-62" name="__codelineno-11-62" href="#__codelineno-11-62"></a><span class="w">    </span><span class="n">lipo</span><span class="p">.</span><span class="n">setThreshold</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set alert threshold to 20%.</span>
</span><span id="__span-11-63"><a id="__codelineno-11-63" name="__codelineno-11-63" href="#__codelineno-11-63"></a><span class="p">}</span>
</span><span id="__span-11-64"><a id="__codelineno-11-64" name="__codelineno-11-64" href="#__codelineno-11-64"></a>
</span><span id="__span-11-65"><a id="__codelineno-11-65" name="__codelineno-11-65" href="#__codelineno-11-65"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span>
</span><span id="__span-11-66"><a id="__codelineno-11-66" name="__codelineno-11-66" href="#__codelineno-11-66"></a><span class="p">{</span>
</span><span id="__span-11-67"><a id="__codelineno-11-67" name="__codelineno-11-67" href="#__codelineno-11-67"></a><span class="w">  </span><span class="c1">// lipo.getVoltage() returns a voltage value (e.g. 3.93)</span>
</span><span id="__span-11-68"><a id="__codelineno-11-68" name="__codelineno-11-68" href="#__codelineno-11-68"></a><span class="w">  </span><span class="n">voltage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lipo</span><span class="p">.</span><span class="n">getVoltage</span><span class="p">();</span>
</span><span id="__span-11-69"><a id="__codelineno-11-69" name="__codelineno-11-69" href="#__codelineno-11-69"></a><span class="w">  </span><span class="c1">// lipo.getSOC() returns the estimated state of charge (e.g. 79%)</span>
</span><span id="__span-11-70"><a id="__codelineno-11-70" name="__codelineno-11-70" href="#__codelineno-11-70"></a><span class="w">  </span><span class="n">soc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lipo</span><span class="p">.</span><span class="n">getSOC</span><span class="p">();</span>
</span><span id="__span-11-71"><a id="__codelineno-11-71" name="__codelineno-11-71" href="#__codelineno-11-71"></a><span class="w">  </span><span class="c1">// lipo.getAlert() returns a 0 or 1 (0=alert not triggered)</span>
</span><span id="__span-11-72"><a id="__codelineno-11-72" name="__codelineno-11-72" href="#__codelineno-11-72"></a><span class="w">  </span><span class="n">alert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lipo</span><span class="p">.</span><span class="n">getAlert</span><span class="p">();</span>
</span><span id="__span-11-73"><a id="__codelineno-11-73" name="__codelineno-11-73" href="#__codelineno-11-73"></a>
</span><span id="__span-11-74"><a id="__codelineno-11-74" name="__codelineno-11-74" href="#__codelineno-11-74"></a><span class="w">  </span><span class="c1">// Print the variables:</span>
</span><span id="__span-11-75"><a id="__codelineno-11-75" name="__codelineno-11-75" href="#__codelineno-11-75"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Voltage: &quot;</span><span class="p">);</span>
</span><span id="__span-11-76"><a id="__codelineno-11-76" name="__codelineno-11-76" href="#__codelineno-11-76"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">voltage</span><span class="p">);</span><span class="w">  </span><span class="c1">// Print the battery voltage</span>
</span><span id="__span-11-77"><a id="__codelineno-11-77" name="__codelineno-11-77" href="#__codelineno-11-77"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; V&quot;</span><span class="p">);</span>
</span><span id="__span-11-78"><a id="__codelineno-11-78" name="__codelineno-11-78" href="#__codelineno-11-78"></a>
</span><span id="__span-11-79"><a id="__codelineno-11-79" name="__codelineno-11-79" href="#__codelineno-11-79"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Percentage: &quot;</span><span class="p">);</span>
</span><span id="__span-11-80"><a id="__codelineno-11-80" name="__codelineno-11-80" href="#__codelineno-11-80"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">soc</span><span class="p">);</span><span class="w"> </span><span class="c1">// Print the battery state of charge</span>
</span><span id="__span-11-81"><a id="__codelineno-11-81" name="__codelineno-11-81" href="#__codelineno-11-81"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; %&quot;</span><span class="p">);</span>
</span><span id="__span-11-82"><a id="__codelineno-11-82" name="__codelineno-11-82" href="#__codelineno-11-82"></a>
</span><span id="__span-11-83"><a id="__codelineno-11-83" name="__codelineno-11-83" href="#__codelineno-11-83"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Alert: &quot;</span><span class="p">);</span>
</span><span id="__span-11-84"><a id="__codelineno-11-84" name="__codelineno-11-84" href="#__codelineno-11-84"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">alert</span><span class="p">);</span>
</span><span id="__span-11-85"><a id="__codelineno-11-85" name="__codelineno-11-85" href="#__codelineno-11-85"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
</span><span id="__span-11-86"><a id="__codelineno-11-86" name="__codelineno-11-86" href="#__codelineno-11-86"></a>
</span><span id="__span-11-87"><a id="__codelineno-11-87" name="__codelineno-11-87" href="#__codelineno-11-87"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
</span><span id="__span-11-88"><a id="__codelineno-11-88" name="__codelineno-11-88" href="#__codelineno-11-88"></a><span class="p">}</span>
</span></code></pre></div>
<p>Open the <a href="https://learn.sparkfun.com/tutorials/terminal-basics/arduino-serial-monitor-windows-mac-linux">Arduino Serial Monitor</a> and set it to <strong>115200</strong> baud to view the serial output. You should see the voltage, battery percent, alert flag, and several more readings. In this case, the single cell LiPo battery that was connected to the IC was fully charged and at about 4.10V.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/Arduino_Output_MAX17048_LiPo_Fuel_Gauge_NORA-W306.JPG"><img src="../assets/img/Arduino_Output_MAX17048_LiPo_Fuel_Gauge_NORA-W306.JPG" width="600px" height="600px" alt="Arduino Output Showing the LiPo Battery's Capacity"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Arduino Output Showing the LiPo Battery's Capacity</i></td>
    </tr>
  </table>
</div>

<p>But wait! If you looked closely at the circuit of the SparkFun Thing Plus NORA-W306, there is also a charge circuit built in. Try closing out the Arduino Serial Monitor, disconnecting the USB, and disconnecting the LiPo battery. Then reinsert the LiPo battery, connect the USB cable, and reopen the Arduino Serial Monitor. The IC will recalculate everything. In the image below, the voltage is a bit misleading since the charge IC is charging the LiPo battery and may not be the true representation of the LiPo battery's voltage. The remaining charge was closer to what was expected.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
      <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/Arduino_Output_MAX17048_LiPo_Fuel_Gauge_NORA-W306-2.JPG"><img src="../assets/img/Arduino_Output_MAX17048_LiPo_Fuel_Gauge_NORA-W306-2.JPG" width="600px" height="600px" alt="Arduino Output Showing the LiPo Battery's Capacity"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
      <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Arduino Output Showing the LiPo Battery's Capacity</i></td>
    </tr>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For development boards that have a built in charge circuit and fuel gauge, you may want to consider using a display to view the LiPo battery's true voltage and remaining charge. Otherwise, you could use a multimeter to measure the LiPo battery's voltage when a USB cable is not plugged in. Below is an example that uses the Qwiic Micro OLED to display the LiPo battery's voltage and remaining charge since the SparkFun Thing Plus NORA-W306 includes a built in charge circuit and fuel gauge (MAX17048). Just make sure to adjust the code for your fuel gauge and display.</p>
<p><div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Fuel_Gauge_OLED.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Fuel_Gauge_OLED.jpg" width="600px" height="600px" alt="LiPo Fuel Gauge Monitoring LiPo Battery and Displaying Battery Capacity on Qwiic Micro OLED"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>LiPo Fuel Gauge Monitoring LiPo Battery and Displaying Battery Capacity on Qwiic Micro OLED</i></td>
   </tr>
  </table>
</div></p>
</div>
<h1 id="example-10-ws2812-addressable-rgb-led">Example 10 - WS2812 Addressable RGB LED<a class="headerlink" href="#example-10-ws2812-addressable-rgb-led" title="Permanent link"></a></h1>
<p>In this example, we will blink the WS2812.</p>
<h3 id="hardware-hookup_10">Hardware Hookup<a class="headerlink" href="#hardware-hookup_10" title="Permanent link"></a></h3>
<p>The connection is the same as explained earlier in the tutorial. Connect the USB cable to the SparkFun Thing Plus NORA-W306 and the other end to your computer. For the scope of this tutorial, we will be using the built-in WS2812B on the development board.</p>
<p>For those that are interested in connecting additional WS2812, you can follow the table below to daisy chain additional LEDs. This configuration is when users are using USB for power and daisy chaining a small number of WS2812's.</p>
<div style="text-align: center;">
    <table>
        <tr>
            <th style="text-align: center; border: solid 1px #cccccc;">NORA-W306<br />Pinout
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">WS2812 LED<br />Pinout
            </th>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#f2dede"><font color="#000000">VUSB (if powering off USB<br />and low number of WS2812 LEDs)</font>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#f2dede"><font color="#000000">VIN</font>
            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#d4edda"><font color="#000000">LD/LED_D0</font>
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#d4edda"><font color="#000000">DI</font>
            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#fff3cd"><font color="#000000">GND</font>
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#fff3cd"><font color="#000000">GND</font>
            </td>
        </tr>
    </table>
</div>

<p>For large number of LEDs, you may want to considering using an <a href="https://learn.sparkfun.com/tutorials/mean-well-led-switching-power-supply-hookup-guide#daisychain">external power supply to power the strip of addressable LEDs</a>.</p>
<div style="text-align: center;">
    <table>
        <tr>
            <th style="text-align: center; border: solid 1px #cccccc;">NORA-W306<br />Pinout
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">External 5V Power Supply
            </th>
            <th style="text-align: center; border: solid 1px #cccccc;">WS2812 LED<br />Pinout
            </th>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#f2dede"><font color="#000000"></font>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#f2dede"><font color="#000000">5V</font>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#f2dede"><font color="#000000">VIN</font>
            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#d4edda"><font color="#000000">LD/LED_D0</font>
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#d4edda"><font color="#000000"></font>
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#d4edda"><font color="#000000">DI</font>
            </td>
        </tr>
        <tr>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#fff3cd"><font color="#000000">GND</font>
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#fff3cd"><font color="#000000">GND</font>
            </td>
            <td style="text-align: center; border: solid 1px #cccccc;" bgcolor="#fff3cd"><font color="#000000">GND</font>
            </td>
        </tr>
    </table>
</div>

<h3 id="arduino-code_9">Arduino Code<a class="headerlink" href="#arduino-code_9" title="Permanent link"></a></h3>
<p>Let&apos;s upload the sketch control the WS2812. We recommend using the WS2812B Arduino Library that came installed with the board add-on. Below is a modified example of the <strong>WS2812B_Basics.ino</strong> sketch since we the LED is on the secondary SPI port and we are using new terminology for the macro. Of course, since we are using only one WS2812, we also adjusted the code to acknowledge that we have only controlling one LED. Copy and paste the following code in the Arduino IDE.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This code is modified and not the same as the one in the board-add on!!! A few lines were commented out, a macro was used when making an instance of the WS2812B, one LED is used, and the red and green colors are blinking in the loop. For a comparison, you could view the original code provided in the board support package by heading to: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray"><b>Examples for SparkFun Thing Plus NORA-W306 (RTL8720DF)</b></font> | <strong>AmebaWS2812B</strong> &gt; <strong>WS2812B_Basics</strong>.</p>
</div>
<p>Copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Board</strong> &gt; <strong>Realtek Ameba Boards (32-bits ARM Cortex-M33 @200MHz)</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was <strong>COM13</strong>). Hit upload button.  </p>
<div class="highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="cm">/*</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="cm"> Example guide:</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="cm"> https://www.amebaiot.com/en/amebad-arduino-ws2812b-basics/</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="cm"> */</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;WS2812B.h&quot;</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="cp">#define TOTAL_NUM_OF_LED 1</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="cp">#define NUM_OF_LEDS 1</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="c1">// There are multiple choice of SPI_MOSI pins depends on different boards. The default is SPI_MOSI/SPI1_MOSI</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="c1">// AMB21/AMB22              pin 11 /  pin21</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="c1">// AMB23                    pin 9  /  pin 4</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="c1">// BW16/BW16 Type C         pin 12</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="c1">// AW-CU488 ThingPlus       pin 1  /  pin 14</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="c1">// AMB25/AMB26              pin 17 /  pin 3</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="c1">// NORA-W306 Thing Plus     pin 6  /  pin 14</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="c1">//WS2812B led(SPI_MOSI, TOTAL_NUM_OF_LED);  //default SPI macro</span>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="n">WS2812B</span><span class="w"> </span><span class="nf">led</span><span class="p">(</span><span class="n">SPI1_PICO</span><span class="p">,</span><span class="w"> </span><span class="n">TOTAL_NUM_OF_LED</span><span class="p">);</span><span class="w"> </span><span class="c1">// SPI1 macro for NORA-W306 since built-in WS2812 is attached to secondary SPI pin</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;WS2812B test&quot;</span><span class="p">);</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="w">    </span><span class="c1">//Set a specific LED with a certain color</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a><span class="w">    </span><span class="c1">//led.setPixelColor(1, 0, 50, 0);</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a><span class="w">    </span><span class="c1">//led.setPixelColor(2, 0, 0, 50);</span>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="w">    </span><span class="c1">//Fill the entire LED strip with the same color</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="w">    </span><span class="c1">//led.fill(60, 0, 25, 0, NUM_OF_LEDS);</span>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a><span class="w">    </span><span class="c1">//led.show();</span>
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="p">}</span>
</span><span id="__span-12-38"><a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>
</span><span id="__span-12-39"><a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-12-40"><a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-12-41"><a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-12-42"><a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-12-43"><a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a>
</span><span id="__span-12-44"><a id="__codelineno-12-44" name="__codelineno-12-44" href="#__codelineno-12-44"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-12-45"><a id="__codelineno-12-45" name="__codelineno-12-45" href="#__codelineno-12-45"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-12-46"><a id="__codelineno-12-46" name="__codelineno-12-46" href="#__codelineno-12-46"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-12-47"><a id="__codelineno-12-47" name="__codelineno-12-47" href="#__codelineno-12-47"></a><span class="p">}</span>
</span></code></pre></div>
<p>After uploading code, the built-in WS2812B LED will light up red momentarily. Once in the loop, the red and green LED will blink back and forth every second. Try adjusting the code to control the LED to make primary, secondary, or tertiary colors with the press of a button! Or changing the color of the LED based on how much power your LiPo battery has available. Or even modify the <strong>WS2812B_Patterns.ino</strong> included with the board add-on to add effects and patterns to your LED. You can even go as far as soldering additional WS2812Bs by daisy chaining them to the DO / LED_DO pin. Just make sure that you have a <a href="https://learn.sparkfun.com/tutorials/how-to-power-a-project/all#voltagecurrent-considerations">sufficient power supply to power your all of your LEDs</a>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_WS2812_RGB_Addressable_LED.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_WS2812_RGB_Addressable_LED.jpg" width="600px" height="600px" alt="More Arduino Examples!"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>WS2812 Addressable LED Green LED Turned On</i></td>
   </tr>
  </table>
</div>

<h1 id="example-11-qwiic-micro-oled">Example 11 - Qwiic Micro OLED<a class="headerlink" href="#example-11-qwiic-micro-oled" title="Permanent link"></a></h1>
<p>In this example, we will connect a Qwiic-enabled Micro OLED display.</p>
<h3 id="hardware-hookup_11">Hardware Hookup<a class="headerlink" href="#hardware-hookup_11" title="Permanent link"></a></h3>
<p>To connect the Qwiic Micro OLED, simply insert a Qwiic cable between the display and the SparkFun Thing Plus NORA-W306.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Qwiic_Enabled_Device_OLED.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Qwiic_Enabled_Device_OLED.jpg" width="600px" height="600px" alt="Qwiic Micro OLED Connected to SparkFun Thing Plus NORA-W306"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Qwiic Micro OLED Connected to SparkFun Thing Plus NORA-W306</i></td>
    </tr>
  </table>
</div>

<p>When ready, connect the board to your computer with the USB C cable.</p>
<h3 id="installing-the-arduino-library_2">Installing the Arduino Library<a class="headerlink" href="#installing-the-arduino-library_2" title="Permanent link"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are two SparkFun Arduino Libraries for the Qwiic micro OLED. We recommend using the SparkFun Qwiic OLED Arduino Library.</p>
</div>
<p>If you have not already, make sure to install the following libraries as explained earlier.</p>
<ul>
<li><a href="https://github.com/sparkfun/SparkFun_Qwiic_OLED_Arduino_Library">Qwiic OLED</a></li>
</ul>
<h3 id="arduino-code_10">Arduino Code<a class="headerlink" href="#arduino-code_10" title="Permanent link"></a></h3>
<p>Let&apos;s upload the sketch to display graphics and characters on the Qwiic Micro OLED. From the menu, select the following: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray">Examples from Custom Libraries</font> | <strong>SparkFun OLED Graphics Library</strong> &gt; <strong>Example-01_Hello</strong>.</p>
<p>Or you can copy and paste the following code in the Arduino IDE. Select the correct board definition from the menu (in this case, <strong>Tools</strong> &gt; <strong>Boards</strong> &gt; <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>). Then select the correct COM port that the board enumerated to (in this case, it was <strong>COM13</strong>). Hit upload button.</p>
<div class="highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="cm">/*</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="cm">  Example-01_Hello.ino</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="cm">  This demo shows the basic setup of the OLED library, generating simple graphics and displaying</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="cm">  the results on the target device.</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="cm">   Micro OLED             https://www.sparkfun.com/products/14532</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="cm">   Transparent OLED       https://www.sparkfun.com/products/15173</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="cm">   &quot;Narrow&quot; OLED          https://www.sparkfun.com/products/24606</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="cm">   Qwiic OLED 1.3in       https://www.sparkfun.com/products/23453</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="cm">  Written by Kirk Benell @ SparkFun Electronics, March 2022</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="cm">  Repository:</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="cm">     https://github.com/sparkfun/SparkFun_Qwiic_OLED_Arduino_Library</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="cm">  Documentation:</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="cm">     https://sparkfun.github.io/SparkFun_Qwiic_OLED_Arduino_Library/</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="cm">  SparkFun code, firmware, and software is released under the MIT License(http://opensource.org/licenses/MIT).</span>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="cm">*/</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SparkFun_Qwiic_OLED.h&gt;</span><span class="c1"> //http://librarymanager/All#SparkFun_Qwiic_OLED</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="c1">// The Library supports four different types of SparkFun boards. The demo uses the following</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a><span class="c1">// defines to determine which device is being used. Uncomment the device being used for this demo.</span>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="n">QwiicMicroOLED</span><span class="w"> </span><span class="n">myOLED</span><span class="p">;</span>
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="c1">//QwiicTransparentOLED myOLED;</span>
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="c1">//QwiicNarrowOLED myOLED;</span>
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="c1">//Qwiic1in3OLED myOLED;</span>
</span><span id="__span-13-33"><a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>
</span><span id="__span-13-34"><a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a>
</span><span id="__span-13-35"><a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span>
</span><span id="__span-13-36"><a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a><span class="p">{</span>
</span><span id="__span-13-37"><a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
</span><span id="__span-13-38"><a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Running OLED example&quot;</span><span class="p">);</span>
</span><span id="__span-13-39"><a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a>
</span><span id="__span-13-40"><a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a><span class="w">    </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span id="__span-13-41"><a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a>
</span><span id="__span-13-42"><a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a><span class="w">    </span><span class="c1">// Initalize the OLED device and related graphics system</span>
</span><span id="__span-13-43"><a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myOLED</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</span><span id="__span-13-44"><a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a><span class="w">    </span><span class="p">{</span>
</span><span id="__span-13-45"><a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a><span class="w">        </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Device begin failed. Freezing...&quot;</span><span class="p">);</span>
</span><span id="__span-13-46"><a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
</span><span id="__span-13-47"><a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a><span class="w">            </span><span class="p">;</span>
</span><span id="__span-13-48"><a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-13-49"><a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Begin success&quot;</span><span class="p">);</span>
</span><span id="__span-13-50"><a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a>
</span><span id="__span-13-51"><a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a><span class="w">    </span><span class="c1">// Do a simple test - fill a rectangle on the screen and then print hello!</span>
</span><span id="__span-13-52"><a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a>
</span><span id="__span-13-53"><a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a><span class="w">    </span><span class="c1">// Fill a rectangle on the screen that has a 4 pixel board</span>
</span><span id="__span-13-54"><a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a><span class="w">    </span><span class="n">myOLED</span><span class="p">.</span><span class="n">rectangleFill</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">myOLED</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">myOLED</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
</span><span id="__span-13-55"><a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a>
</span><span id="__span-13-56"><a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// our message</span>
</span><span id="__span-13-57"><a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a>
</span><span id="__span-13-58"><a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a><span class="w">    </span><span class="c1">// Center our message on the screen. Get the screen size of the &quot;hello&quot; string,</span>
</span><span id="__span-13-59"><a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a><span class="w">    </span><span class="c1">// calling the getStringWidth() and getStringHeight() methods on the oled</span>
</span><span id="__span-13-60"><a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a>
</span><span id="__span-13-61"><a id="__codelineno-13-61" name="__codelineno-13-61" href="#__codelineno-13-61"></a><span class="w">    </span><span class="c1">// starting x position - screen width minus string width  / 2</span>
</span><span id="__span-13-62"><a id="__codelineno-13-62" name="__codelineno-13-62" href="#__codelineno-13-62"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">myOLED</span><span class="p">.</span><span class="n">getWidth</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">myOLED</span><span class="p">.</span><span class="n">getStringWidth</span><span class="p">(</span><span class="n">hello</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-13-63"><a id="__codelineno-13-63" name="__codelineno-13-63" href="#__codelineno-13-63"></a>
</span><span id="__span-13-64"><a id="__codelineno-13-64" name="__codelineno-13-64" href="#__codelineno-13-64"></a><span class="w">    </span><span class="c1">// starting y position - screen height minus string height / 2</span>
</span><span id="__span-13-65"><a id="__codelineno-13-65" name="__codelineno-13-65" href="#__codelineno-13-65"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">myOLED</span><span class="p">.</span><span class="n">getHeight</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">myOLED</span><span class="p">.</span><span class="n">getStringHeight</span><span class="p">(</span><span class="n">hello</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
</span><span id="__span-13-66"><a id="__codelineno-13-66" name="__codelineno-13-66" href="#__codelineno-13-66"></a>
</span><span id="__span-13-67"><a id="__codelineno-13-67" name="__codelineno-13-67" href="#__codelineno-13-67"></a><span class="w">    </span><span class="c1">// Draw the text - color of black (0)</span>
</span><span id="__span-13-68"><a id="__codelineno-13-68" name="__codelineno-13-68" href="#__codelineno-13-68"></a><span class="w">    </span><span class="n">myOLED</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span><span class="w"> </span><span class="n">y0</span><span class="p">,</span><span class="w"> </span><span class="n">hello</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-13-69"><a id="__codelineno-13-69" name="__codelineno-13-69" href="#__codelineno-13-69"></a>
</span><span id="__span-13-70"><a id="__codelineno-13-70" name="__codelineno-13-70" href="#__codelineno-13-70"></a><span class="w">    </span><span class="c1">// There&#39;s nothing on the screen yet - Now send the graphics to the device</span>
</span><span id="__span-13-71"><a id="__codelineno-13-71" name="__codelineno-13-71" href="#__codelineno-13-71"></a><span class="w">    </span><span class="n">myOLED</span><span class="p">.</span><span class="n">display</span><span class="p">();</span>
</span><span id="__span-13-72"><a id="__codelineno-13-72" name="__codelineno-13-72" href="#__codelineno-13-72"></a>
</span><span id="__span-13-73"><a id="__codelineno-13-73" name="__codelineno-13-73" href="#__codelineno-13-73"></a><span class="w">    </span><span class="c1">// That&#39;s it - HELLO!</span>
</span><span id="__span-13-74"><a id="__codelineno-13-74" name="__codelineno-13-74" href="#__codelineno-13-74"></a><span class="p">}</span>
</span><span id="__span-13-75"><a id="__codelineno-13-75" name="__codelineno-13-75" href="#__codelineno-13-75"></a>
</span><span id="__span-13-76"><a id="__codelineno-13-76" name="__codelineno-13-76" href="#__codelineno-13-76"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span>
</span><span id="__span-13-77"><a id="__codelineno-13-77" name="__codelineno-13-77" href="#__codelineno-13-77"></a><span class="p">{</span>
</span><span id="__span-13-78"><a id="__codelineno-13-78" name="__codelineno-13-78" href="#__codelineno-13-78"></a><span class="w">    </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span><span class="w"> </span><span class="c1">// Do nothing</span>
</span><span id="__span-13-79"><a id="__codelineno-13-79" name="__codelineno-13-79" href="#__codelineno-13-79"></a><span class="p">}</span>
</span></code></pre></div>
<p>Once the code has been uploaded, check the Qwiic Micro OLED screen. You should see the entire screen filled with a rectangle with the "hello" in the middle. Try exploring the other examples in the folder and writing your own code to output on the screen.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Qwiic_OLED_Hello_World.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Qwiic_OLED_Hello_World.jpg" width="600px" height="600px" alt="Qwiic Micro OLED Connected to SparkFun Thing Plus NORA-W306 and with the Word &quot;hello&quot; Displayed"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Qwiic Micro OLED Connected to SparkFun Thing Plus NORA-W306 and with the Word &quot;hello&quot; Displayed</i></td>
    </tr>
  </table>
</div>

<h1 id="example-12-lipo-fuel-gauge-max17048-with-micro-oled-display-demo">Example 12 - LiPo Fuel Gauge (MAX17048) with Micro OLED Display Demo<a class="headerlink" href="#example-12-lipo-fuel-gauge-max17048-with-micro-oled-display-demo" title="Permanent link"></a></h1>
<p>Based on the examples from the LiPo Fuel Gauge and Micro OLED, we will measure a battery's capacity and display the readings on a micro OLED.</p>
<h3 id="hardware-hookup_12">Hardware Hookup<a class="headerlink" href="#hardware-hookup_12" title="Permanent link"></a></h3>
<p>Connect the Qwiic micro OLED and LiPo battery to the board.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_MAX17048_Fuel_Gauge_WS2812_LiPo_Battery_Demo_bb.jpg"><img src="../assets/img/NORA-W306_MAX17048_Fuel_Gauge_WS2812_LiPo_Battery_Demo_bb.jpg" width="400px" height="400px" alt="Fritzing Diagram Qwiic micro OLED and LiPo Battery"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Fritzing Diagram Qwiic micro OLED and LiPo Battery</i></td>
   </tr>
  </table>
</div>

<p>When ready, connect the board to your computer with the USB C cable.</p>
<h3 id="installing-the-arduino-libraries">Installing the Arduino Libraries<a class="headerlink" href="#installing-the-arduino-libraries" title="Permanent link"></a></h3>
<p>If you have not already, make sure to install the following libraries as explained in the previous sections. As for the WS2812, we will be using the built-in Realtek Arduino library for the WS2812.</p>
<ul>
<li><a href="https://github.com/sparkfun/SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library">MAX17048</a></li>
<li><a href="https://github.com/sparkfun/SparkFun_Qwiic_OLED_Arduino_Library">Qwiic OLED</a></li>
</ul>
<h3 id="arduino-code_11">Arduino Code<a class="headerlink" href="#arduino-code_11" title="Permanent link"></a></h3>
<p>Copy and paste the following code in the Arduino IDE.</p>
<div class="highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="cm">/******************************************************************************</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="cm">  Combined Simple Serial, Qwiic Micro OLED, WS2812 Example</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="cm">  Modified By: Ho Yun &quot;Bobby&quot; Chan</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="cm">  SparkFun Electronics</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="cm">  Date: July 10, 2024</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="cm">  License: MIT. See license file for more information but you can</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="cm">  basically do whatever you want with this code.</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="cm">  This is a combined example of Paul Clark&#39;s MAX17043 Fuel Guage</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="cm">  simple serial example, Kirk Benell&#39;s Qwiic OLED Hello example,</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="cm">  and Nathan Seidle&#39;s RTK Display Test Sketch. The example reads a</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="cm">  single cell LiPo battery&#39;s voltage and state-of-charge (SOC)</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="cm">  using the MAX1704X. The voltage, percent remaining (i.e. the</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="cm">  SOC), and alert flag are displayed as an output on the Qwiic</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="cm">  Micro OLED. A graphic of a LiPo battery&#39;s remaining charge is</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="cm">  displayed on the Qwiic Micro OLED as well. This example also uses</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="cm">  the built-in WS2812-2020 addressable LED to indicate the status</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="cm">  of the battery.</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="cm">  By opening the Arduino Serial Monitor (115200 baud), the example</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="cm">  will also print the gauge&#39;s voltage, state-of-charge (SOC)</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a><span class="cm">  readings, alert status to Serial.</span>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="cm">  Feel like supporting open source hardware?</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="cm">  Buy a board from SparkFun!</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>
</span><span id="__span-14-27"><a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="cm">  LiPo Fuel Gauge - MAX17043 : https://www.sparkfun.com/products/20680</span>
</span><span id="__span-14-28"><a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="cm">  Qwiic Micro OLED: https://www.sparkfun.com/products/14532</span>
</span><span id="__span-14-29"><a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a>
</span><span id="__span-14-30"><a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a><span class="cm">  Distributed as-is; no warranty is given.</span>
</span><span id="__span-14-31"><a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="cm">******************************************************************************/</span>
</span><span id="__span-14-32"><a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a>
</span><span id="__span-14-33"><a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Wire.h&gt;</span><span class="c1"> // Needed for I2C</span>
</span><span id="__span-14-34"><a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a>
</span><span id="__span-14-35"><a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a>
</span><span id="__span-14-36"><a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="c1">//////////LIPO FUEL GAUGE//////////</span>
</span><span id="__span-14-37"><a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library.h&gt;</span><span class="c1"> // Click here to get the library: http://librarymanager/All#SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library</span>
</span><span id="__span-14-38"><a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>
</span><span id="__span-14-39"><a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="c1">//SFE_MAX1704X lipo; // Defaults to the MAX17043</span>
</span><span id="__span-14-40"><a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a>
</span><span id="__span-14-41"><a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17043); // Create a MAX17043</span>
</span><span id="__span-14-42"><a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17044); // Create a MAX17044</span>
</span><span id="__span-14-43"><a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a><span class="n">SFE_MAX1704X</span><span class="w"> </span><span class="nf">lipo</span><span class="p">(</span><span class="n">MAX1704X_MAX17048</span><span class="p">);</span><span class="w"> </span><span class="c1">// Create a MAX17048</span>
</span><span id="__span-14-44"><a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a><span class="c1">//SFE_MAX1704X lipo(MAX1704X_MAX17049); // Create a MAX17049</span>
</span><span id="__span-14-45"><a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>
</span><span id="__span-14-46"><a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a><span class="kt">double</span><span class="w"> </span><span class="n">voltage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Variable to keep track of LiPo voltage</span>
</span><span id="__span-14-47"><a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a><span class="kt">double</span><span class="w"> </span><span class="n">soc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Variable to keep track of LiPo state-of-charge (SOC)</span>
</span><span id="__span-14-48"><a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a><span class="kt">bool</span><span class="w"> </span><span class="n">alert</span><span class="p">;</span><span class="w"> </span><span class="c1">// Variable to keep track of whether alert has been triggered</span>
</span><span id="__span-14-49"><a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a>
</span><span id="__span-14-50"><a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a>
</span><span id="__span-14-51"><a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a>
</span><span id="__span-14-52"><a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="c1">//////////QWIIC MICRO OLED//////////</span>
</span><span id="__span-14-53"><a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;SparkFun_Qwiic_OLED.h&gt;</span><span class="c1"> //http://librarymanager/All#SparkFun_Qwiic_Graphic_OLED</span>
</span><span id="__span-14-54"><a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;icons.h&quot;</span>
</span><span id="__span-14-55"><a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a>
</span><span id="__span-14-56"><a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a><span class="c1">// The Qwiic OLED Library supports three different types of SparkFun boards. The demo uses the following</span>
</span><span id="__span-14-57"><a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a><span class="c1">// defines to determine which device is being used. Uncomment the device being used for this demo.</span>
</span><span id="__span-14-58"><a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a><span class="n">QwiicMicroOLED</span><span class="w"> </span><span class="n">myOLED</span><span class="p">;</span>
</span><span id="__span-14-59"><a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a><span class="c1">// QwiicTransparentOLED myOLED;</span>
</span><span id="__span-14-60"><a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a><span class="c1">// QwiicNarrowOLED myOLED;</span>
</span><span id="__span-14-61"><a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a>
</span><span id="__span-14-62"><a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a><span class="c1">// Fonts</span>
</span><span id="__span-14-63"><a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;res/qw_fnt_5x7.h&gt;</span>
</span><span id="__span-14-64"><a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a><span class="c1">//#include &lt;res/qw_fnt_8x16.h&gt;, not used</span>
</span><span id="__span-14-65"><a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a><span class="c1">//#include &lt;res/qw_fnt_31x48.h&gt;, not used</span>
</span><span id="__span-14-66"><a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a><span class="c1">//#include &lt;res/qw_fnt_7segment.h&gt;, not used</span>
</span><span id="__span-14-67"><a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a><span class="c1">//#include &lt;res/qw_fnt_largenum.h&gt;, not used</span>
</span><span id="__span-14-68"><a id="__codelineno-14-68" name="__codelineno-14-68" href="#__codelineno-14-68"></a>
</span><span id="__span-14-69"><a id="__codelineno-14-69" name="__codelineno-14-69" href="#__codelineno-14-69"></a>
</span><span id="__span-14-70"><a id="__codelineno-14-70" name="__codelineno-14-70" href="#__codelineno-14-70"></a><span class="c1">// NOTE: This example uses the Realtek Arduino Core&#39;s WS2812 Library</span>
</span><span id="__span-14-71"><a id="__codelineno-14-71" name="__codelineno-14-71" href="#__codelineno-14-71"></a><span class="c1">//////////WS2812 LED//////////</span>
</span><span id="__span-14-72"><a id="__codelineno-14-72" name="__codelineno-14-72" href="#__codelineno-14-72"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;WS2812B.h&quot;</span>
</span><span id="__span-14-73"><a id="__codelineno-14-73" name="__codelineno-14-73" href="#__codelineno-14-73"></a>
</span><span id="__span-14-74"><a id="__codelineno-14-74" name="__codelineno-14-74" href="#__codelineno-14-74"></a><span class="cp">#define TOTAL_NUM_OF_LED 1</span>
</span><span id="__span-14-75"><a id="__codelineno-14-75" name="__codelineno-14-75" href="#__codelineno-14-75"></a><span class="cp">#define NUM_OF_LEDS 1</span>
</span><span id="__span-14-76"><a id="__codelineno-14-76" name="__codelineno-14-76" href="#__codelineno-14-76"></a>
</span><span id="__span-14-77"><a id="__codelineno-14-77" name="__codelineno-14-77" href="#__codelineno-14-77"></a><span class="c1">// There are multiple choice of SPI_MOSI pins depends on different boards. The default is SPI_MOSI/SPI1_MOSI</span>
</span><span id="__span-14-78"><a id="__codelineno-14-78" name="__codelineno-14-78" href="#__codelineno-14-78"></a><span class="c1">// AMB21/AMB22              pin 11 /  pin21</span>
</span><span id="__span-14-79"><a id="__codelineno-14-79" name="__codelineno-14-79" href="#__codelineno-14-79"></a><span class="c1">// AMB23                    pin 9  /  pin 4</span>
</span><span id="__span-14-80"><a id="__codelineno-14-80" name="__codelineno-14-80" href="#__codelineno-14-80"></a><span class="c1">// BW16/BW16 Type C         pin 12</span>
</span><span id="__span-14-81"><a id="__codelineno-14-81" name="__codelineno-14-81" href="#__codelineno-14-81"></a><span class="c1">// AW-CU488 ThingPlus       pin 1  /  pin 14</span>
</span><span id="__span-14-82"><a id="__codelineno-14-82" name="__codelineno-14-82" href="#__codelineno-14-82"></a><span class="c1">// AMB25/AMB26              pin 17 /  pin 3</span>
</span><span id="__span-14-83"><a id="__codelineno-14-83" name="__codelineno-14-83" href="#__codelineno-14-83"></a>
</span><span id="__span-14-84"><a id="__codelineno-14-84" name="__codelineno-14-84" href="#__codelineno-14-84"></a><span class="n">WS2812B</span><span class="w"> </span><span class="nf">led</span><span class="p">(</span><span class="n">SPI1_PICO</span><span class="p">,</span><span class="w"> </span><span class="n">NUM_OF_LEDS</span><span class="p">);</span>
</span><span id="__span-14-85"><a id="__codelineno-14-85" name="__codelineno-14-85" href="#__codelineno-14-85"></a>
</span><span id="__span-14-86"><a id="__codelineno-14-86" name="__codelineno-14-86" href="#__codelineno-14-86"></a><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-87"><a id="__codelineno-14-87" name="__codelineno-14-87" href="#__codelineno-14-87"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span><span class="w"> </span><span class="c1">// Start serial, to output debug data</span>
</span><span id="__span-14-88"><a id="__codelineno-14-88" name="__codelineno-14-88" href="#__codelineno-14-88"></a><span class="w">  </span><span class="c1">//while (!Serial)</span>
</span><span id="__span-14-89"><a id="__codelineno-14-89" name="__codelineno-14-89" href="#__codelineno-14-89"></a><span class="w">  </span><span class="c1">//  ; //Wait for user to open terminal</span>
</span><span id="__span-14-90"><a id="__codelineno-14-90" name="__codelineno-14-90" href="#__codelineno-14-90"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Combined MAX17048, Qwiic OLED, and Realtek WS2812 Example&quot;</span><span class="p">));</span>
</span><span id="__span-14-91"><a id="__codelineno-14-91" name="__codelineno-14-91" href="#__codelineno-14-91"></a>
</span><span id="__span-14-92"><a id="__codelineno-14-92" name="__codelineno-14-92" href="#__codelineno-14-92"></a><span class="w">  </span><span class="n">Wire</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span id="__span-14-93"><a id="__codelineno-14-93" name="__codelineno-14-93" href="#__codelineno-14-93"></a>
</span><span id="__span-14-94"><a id="__codelineno-14-94" name="__codelineno-14-94" href="#__codelineno-14-94"></a><span class="w">  </span><span class="n">lipo</span><span class="p">.</span><span class="n">enableDebugging</span><span class="p">();</span><span class="w"> </span><span class="c1">// Uncomment this line to enable helpful debug messages on Serial</span>
</span><span id="__span-14-95"><a id="__codelineno-14-95" name="__codelineno-14-95" href="#__codelineno-14-95"></a>
</span><span id="__span-14-96"><a id="__codelineno-14-96" name="__codelineno-14-96" href="#__codelineno-14-96"></a><span class="w">  </span><span class="c1">// Set up the MAX17043 LiPo fuel gauge:</span>
</span><span id="__span-14-97"><a id="__codelineno-14-97" name="__codelineno-14-97" href="#__codelineno-14-97"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lipo</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// Connect to the MAX17043 using the default wire port</span>
</span><span id="__span-14-98"><a id="__codelineno-14-98" name="__codelineno-14-98" href="#__codelineno-14-98"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-14-99"><a id="__codelineno-14-99" name="__codelineno-14-99" href="#__codelineno-14-99"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;MAX17043 not detected. Please check wiring. Freezing.&quot;</span><span class="p">));</span>
</span><span id="__span-14-100"><a id="__codelineno-14-100" name="__codelineno-14-100" href="#__codelineno-14-100"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-14-101"><a id="__codelineno-14-101" name="__codelineno-14-101" href="#__codelineno-14-101"></a><span class="w">      </span><span class="p">;</span>
</span><span id="__span-14-102"><a id="__codelineno-14-102" name="__codelineno-14-102" href="#__codelineno-14-102"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-103"><a id="__codelineno-14-103" name="__codelineno-14-103" href="#__codelineno-14-103"></a>
</span><span id="__span-14-104"><a id="__codelineno-14-104" name="__codelineno-14-104" href="#__codelineno-14-104"></a><span class="w">  </span><span class="c1">// Initalize the OLED device and related graphics system</span>
</span><span id="__span-14-105"><a id="__codelineno-14-105" name="__codelineno-14-105" href="#__codelineno-14-105"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">myOLED</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
</span><span id="__span-14-106"><a id="__codelineno-14-106" name="__codelineno-14-106" href="#__codelineno-14-106"></a><span class="w">  </span><span class="p">{</span>
</span><span id="__span-14-107"><a id="__codelineno-14-107" name="__codelineno-14-107" href="#__codelineno-14-107"></a><span class="w">    </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Device begin failed. Freezing...&quot;</span><span class="p">));</span>
</span><span id="__span-14-108"><a id="__codelineno-14-108" name="__codelineno-14-108" href="#__codelineno-14-108"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span>
</span><span id="__span-14-109"><a id="__codelineno-14-109" name="__codelineno-14-109" href="#__codelineno-14-109"></a><span class="w">      </span><span class="p">;</span>
</span><span id="__span-14-110"><a id="__codelineno-14-110" name="__codelineno-14-110" href="#__codelineno-14-110"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-111"><a id="__codelineno-14-111" name="__codelineno-14-111" href="#__codelineno-14-111"></a>
</span><span id="__span-14-112"><a id="__codelineno-14-112" name="__codelineno-14-112" href="#__codelineno-14-112"></a><span class="w">  </span><span class="c1">// Quick start restarts the MAX17043 in hopes of getting a more accurate</span>
</span><span id="__span-14-113"><a id="__codelineno-14-113" name="__codelineno-14-113" href="#__codelineno-14-113"></a><span class="w">  </span><span class="c1">// guess for the SOC.</span>
</span><span id="__span-14-114"><a id="__codelineno-14-114" name="__codelineno-14-114" href="#__codelineno-14-114"></a><span class="w">  </span><span class="n">lipo</span><span class="p">.</span><span class="n">quickStart</span><span class="p">();</span>
</span><span id="__span-14-115"><a id="__codelineno-14-115" name="__codelineno-14-115" href="#__codelineno-14-115"></a>
</span><span id="__span-14-116"><a id="__codelineno-14-116" name="__codelineno-14-116" href="#__codelineno-14-116"></a><span class="w">  </span><span class="c1">// We can set an interrupt to alert when the battery SoC gets too low.</span>
</span><span id="__span-14-117"><a id="__codelineno-14-117" name="__codelineno-14-117" href="#__codelineno-14-117"></a><span class="w">  </span><span class="c1">// We can alert at anywhere between 1% - 32%:</span>
</span><span id="__span-14-118"><a id="__codelineno-14-118" name="__codelineno-14-118" href="#__codelineno-14-118"></a><span class="w">  </span><span class="n">lipo</span><span class="p">.</span><span class="n">setThreshold</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span><span class="w"> </span><span class="c1">// Set alert threshold to 20%.</span>
</span><span id="__span-14-119"><a id="__codelineno-14-119" name="__codelineno-14-119" href="#__codelineno-14-119"></a>
</span><span id="__span-14-120"><a id="__codelineno-14-120" name="__codelineno-14-120" href="#__codelineno-14-120"></a><span class="w">  </span><span class="c1">//Set up WS2812B</span>
</span><span id="__span-14-121"><a id="__codelineno-14-121" name="__codelineno-14-121" href="#__codelineno-14-121"></a><span class="w">  </span><span class="n">led</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
</span><span id="__span-14-122"><a id="__codelineno-14-122" name="__codelineno-14-122" href="#__codelineno-14-122"></a><span class="w">  </span><span class="c1">//led.setPixelColor(led_position, red, green, blue);...</span>
</span><span id="__span-14-123"><a id="__codelineno-14-123" name="__codelineno-14-123" href="#__codelineno-14-123"></a><span class="w">  </span><span class="c1">//led.setPixelColor(0, 0, 0, 0);</span>
</span><span id="__span-14-124"><a id="__codelineno-14-124" name="__codelineno-14-124" href="#__codelineno-14-124"></a><span class="w">  </span><span class="c1">//led.show();</span>
</span><span id="__span-14-125"><a id="__codelineno-14-125" name="__codelineno-14-125" href="#__codelineno-14-125"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span><span id="__span-14-126"><a id="__codelineno-14-126" name="__codelineno-14-126" href="#__codelineno-14-126"></a>
</span><span id="__span-14-127"><a id="__codelineno-14-127" name="__codelineno-14-127" href="#__codelineno-14-127"></a><span class="p">}</span>
</span><span id="__span-14-128"><a id="__codelineno-14-128" name="__codelineno-14-128" href="#__codelineno-14-128"></a>
</span><span id="__span-14-129"><a id="__codelineno-14-129" name="__codelineno-14-129" href="#__codelineno-14-129"></a><span class="kt">void</span><span class="w"> </span><span class="nf">loop</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-130"><a id="__codelineno-14-130" name="__codelineno-14-130" href="#__codelineno-14-130"></a>
</span><span id="__span-14-131"><a id="__codelineno-14-131" name="__codelineno-14-131" href="#__codelineno-14-131"></a><span class="w">  </span><span class="c1">// lipo.getVoltage() returns a voltage value (e.g. 3.93)</span>
</span><span id="__span-14-132"><a id="__codelineno-14-132" name="__codelineno-14-132" href="#__codelineno-14-132"></a><span class="w">  </span><span class="n">voltage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lipo</span><span class="p">.</span><span class="n">getVoltage</span><span class="p">();</span>
</span><span id="__span-14-133"><a id="__codelineno-14-133" name="__codelineno-14-133" href="#__codelineno-14-133"></a>
</span><span id="__span-14-134"><a id="__codelineno-14-134" name="__codelineno-14-134" href="#__codelineno-14-134"></a><span class="w">  </span><span class="c1">// lipo.getSOC() returns the estimated state of charge (e.g. 79%)</span>
</span><span id="__span-14-135"><a id="__codelineno-14-135" name="__codelineno-14-135" href="#__codelineno-14-135"></a><span class="w">  </span><span class="n">soc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lipo</span><span class="p">.</span><span class="n">getSOC</span><span class="p">();</span>
</span><span id="__span-14-136"><a id="__codelineno-14-136" name="__codelineno-14-136" href="#__codelineno-14-136"></a>
</span><span id="__span-14-137"><a id="__codelineno-14-137" name="__codelineno-14-137" href="#__codelineno-14-137"></a><span class="w">  </span><span class="c1">// lipo.getAlert() clears the alert flag</span>
</span><span id="__span-14-138"><a id="__codelineno-14-138" name="__codelineno-14-138" href="#__codelineno-14-138"></a><span class="w">  </span><span class="c1">// Output: 0 on success, positive integer on fail.</span>
</span><span id="__span-14-139"><a id="__codelineno-14-139" name="__codelineno-14-139" href="#__codelineno-14-139"></a><span class="w">  </span><span class="n">lipo</span><span class="p">.</span><span class="n">clearAlert</span><span class="p">();</span>
</span><span id="__span-14-140"><a id="__codelineno-14-140" name="__codelineno-14-140" href="#__codelineno-14-140"></a><span class="w">  </span><span class="c1">// lipo.getAlert() returns a 0 or 1 (0=alert not triggered)</span>
</span><span id="__span-14-141"><a id="__codelineno-14-141" name="__codelineno-14-141" href="#__codelineno-14-141"></a><span class="w">  </span><span class="n">alert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lipo</span><span class="p">.</span><span class="n">getAlert</span><span class="p">();</span>
</span><span id="__span-14-142"><a id="__codelineno-14-142" name="__codelineno-14-142" href="#__codelineno-14-142"></a>
</span><span id="__span-14-143"><a id="__codelineno-14-143" name="__codelineno-14-143" href="#__codelineno-14-143"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">erase</span><span class="p">();</span><span class="w"> </span><span class="c1">//clear display</span>
</span><span id="__span-14-144"><a id="__codelineno-14-144" name="__codelineno-14-144" href="#__codelineno-14-144"></a>
</span><span id="__span-14-145"><a id="__codelineno-14-145" name="__codelineno-14-145" href="#__codelineno-14-145"></a><span class="w">  </span><span class="c1">//set font type, we&#39;ll use a character size of 5x7</span>
</span><span id="__span-14-146"><a id="__codelineno-14-146" name="__codelineno-14-146" href="#__codelineno-14-146"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="o">&amp;</span><span class="n">QW_FONT_5X7</span><span class="p">);</span>
</span><span id="__span-14-147"><a id="__codelineno-14-147" name="__codelineno-14-147" href="#__codelineno-14-147"></a><span class="w">  </span><span class="c1">//myOLED.setFont(&amp;QW_FONT_8X16); //not used</span>
</span><span id="__span-14-148"><a id="__codelineno-14-148" name="__codelineno-14-148" href="#__codelineno-14-148"></a><span class="w">  </span><span class="c1">//myOLED.setFont(&amp;QW_FONT_31X48); //not used</span>
</span><span id="__span-14-149"><a id="__codelineno-14-149" name="__codelineno-14-149" href="#__codelineno-14-149"></a><span class="w">  </span><span class="c1">//myOLED.setFont(&amp;QW_FONT_LARGENUM); //not used</span>
</span><span id="__span-14-150"><a id="__codelineno-14-150" name="__codelineno-14-150" href="#__codelineno-14-150"></a><span class="w">  </span><span class="c1">//myOLED.setFont(&amp;QW_FONT_7SEGMENT); //not used</span>
</span><span id="__span-14-151"><a id="__codelineno-14-151" name="__codelineno-14-151" href="#__codelineno-14-151"></a>
</span><span id="__span-14-152"><a id="__codelineno-14-152" name="__codelineno-14-152" href="#__codelineno-14-152"></a><span class="w">  </span><span class="c1">// &quot;Print&quot; Voltage</span>
</span><span id="__span-14-153"><a id="__codelineno-14-153" name="__codelineno-14-153" href="#__codelineno-14-153"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-14-154"><a id="__codelineno-14-154" name="__codelineno-14-154" href="#__codelineno-14-154"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-14-155"><a id="__codelineno-14-155" name="__codelineno-14-155" href="#__codelineno-14-155"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;V&quot;</span><span class="p">));</span>
</span><span id="__span-14-156"><a id="__codelineno-14-156" name="__codelineno-14-156" href="#__codelineno-14-156"></a>
</span><span id="__span-14-157"><a id="__codelineno-14-157" name="__codelineno-14-157" href="#__codelineno-14-157"></a><span class="w">  </span><span class="c1">// &quot;Print&quot; Battery %</span>
</span><span id="__span-14-158"><a id="__codelineno-14-158" name="__codelineno-14-158" href="#__codelineno-14-158"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
</span><span id="__span-14-159"><a id="__codelineno-14-159" name="__codelineno-14-159" href="#__codelineno-14-159"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">soc</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-14-160"><a id="__codelineno-14-160" name="__codelineno-14-160" href="#__codelineno-14-160"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;%&quot;</span><span class="p">));</span>
</span><span id="__span-14-161"><a id="__codelineno-14-161" name="__codelineno-14-161" href="#__codelineno-14-161"></a>
</span><span id="__span-14-162"><a id="__codelineno-14-162" name="__codelineno-14-162" href="#__codelineno-14-162"></a><span class="w">  </span><span class="c1">// &quot;Print&quot; Alert Status</span>
</span><span id="__span-14-163"><a id="__codelineno-14-163" name="__codelineno-14-163" href="#__codelineno-14-163"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">);</span>
</span><span id="__span-14-164"><a id="__codelineno-14-164" name="__codelineno-14-164" href="#__codelineno-14-164"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;VBAT:&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">//alert pin</span>
</span><span id="__span-14-165"><a id="__codelineno-14-165" name="__codelineno-14-165" href="#__codelineno-14-165"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">alert</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">HIGH</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-166"><a id="__codelineno-14-166" name="__codelineno-14-166" href="#__codelineno-14-166"></a><span class="w">    </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;LOW&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">//Flag was raised, battery is low!!!</span>
</span><span id="__span-14-167"><a id="__codelineno-14-167" name="__codelineno-14-167" href="#__codelineno-14-167"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-168"><a id="__codelineno-14-168" name="__codelineno-14-168" href="#__codelineno-14-168"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-169"><a id="__codelineno-14-169" name="__codelineno-14-169" href="#__codelineno-14-169"></a>
</span><span id="__span-14-170"><a id="__codelineno-14-170" name="__codelineno-14-170" href="#__codelineno-14-170"></a><span class="w">    </span><span class="n">myOLED</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;OK&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">//Battery charge is good. 8)</span>
</span><span id="__span-14-171"><a id="__codelineno-14-171" name="__codelineno-14-171" href="#__codelineno-14-171"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-172"><a id="__codelineno-14-172" name="__codelineno-14-172" href="#__codelineno-14-172"></a>
</span><span id="__span-14-173"><a id="__codelineno-14-173" name="__codelineno-14-173" href="#__codelineno-14-173"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">soc</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mf">60.00</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-174"><a id="__codelineno-14-174" name="__codelineno-14-174" href="#__codelineno-14-174"></a><span class="w">    </span><span class="c1">//Battery Level 60-100%</span>
</span><span id="__span-14-175"><a id="__codelineno-14-175" name="__codelineno-14-175" href="#__codelineno-14-175"></a><span class="w">    </span><span class="n">displayBitmap</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Width</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Height</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_3</span><span class="p">);</span>
</span><span id="__span-14-176"><a id="__codelineno-14-176" name="__codelineno-14-176" href="#__codelineno-14-176"></a>
</span><span id="__span-14-177"><a id="__codelineno-14-177" name="__codelineno-14-177" href="#__codelineno-14-177"></a><span class="w">    </span><span class="c1">//GREEN</span>
</span><span id="__span-14-178"><a id="__codelineno-14-178" name="__codelineno-14-178" href="#__codelineno-14-178"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-14-179"><a id="__codelineno-14-179" name="__codelineno-14-179" href="#__codelineno-14-179"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-14-180"><a id="__codelineno-14-180" name="__codelineno-14-180" href="#__codelineno-14-180"></a>
</span><span id="__span-14-181"><a id="__codelineno-14-181" name="__codelineno-14-181" href="#__codelineno-14-181"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-182"><a id="__codelineno-14-182" name="__codelineno-14-182" href="#__codelineno-14-182"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="mf">30.00</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">soc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">60.00</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-183"><a id="__codelineno-14-183" name="__codelineno-14-183" href="#__codelineno-14-183"></a><span class="w">    </span><span class="c1">//Battery Level 30-60%</span>
</span><span id="__span-14-184"><a id="__codelineno-14-184" name="__codelineno-14-184" href="#__codelineno-14-184"></a><span class="w">    </span><span class="n">displayBitmap</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Width</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Height</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2</span><span class="p">);</span>
</span><span id="__span-14-185"><a id="__codelineno-14-185" name="__codelineno-14-185" href="#__codelineno-14-185"></a>
</span><span id="__span-14-186"><a id="__codelineno-14-186" name="__codelineno-14-186" href="#__codelineno-14-186"></a><span class="w">    </span><span class="c1">//YELLOW</span>
</span><span id="__span-14-187"><a id="__codelineno-14-187" name="__codelineno-14-187" href="#__codelineno-14-187"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-14-188"><a id="__codelineno-14-188" name="__codelineno-14-188" href="#__codelineno-14-188"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-14-189"><a id="__codelineno-14-189" name="__codelineno-14-189" href="#__codelineno-14-189"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-190"><a id="__codelineno-14-190" name="__codelineno-14-190" href="#__codelineno-14-190"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="mf">10.00</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">soc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">30.00</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-191"><a id="__codelineno-14-191" name="__codelineno-14-191" href="#__codelineno-14-191"></a><span class="w">    </span><span class="c1">//Battery Level 10%-30%</span>
</span><span id="__span-14-192"><a id="__codelineno-14-192" name="__codelineno-14-192" href="#__codelineno-14-192"></a><span class="w">    </span><span class="n">displayBitmap</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Width</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Height</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_1</span><span class="p">);</span>
</span><span id="__span-14-193"><a id="__codelineno-14-193" name="__codelineno-14-193" href="#__codelineno-14-193"></a>
</span><span id="__span-14-194"><a id="__codelineno-14-194" name="__codelineno-14-194" href="#__codelineno-14-194"></a><span class="w">    </span><span class="c1">//ORANGE</span>
</span><span id="__span-14-195"><a id="__codelineno-14-195" name="__codelineno-14-195" href="#__codelineno-14-195"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-14-196"><a id="__codelineno-14-196" name="__codelineno-14-196" href="#__codelineno-14-196"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-14-197"><a id="__codelineno-14-197" name="__codelineno-14-197" href="#__codelineno-14-197"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-198"><a id="__codelineno-14-198" name="__codelineno-14-198" href="#__codelineno-14-198"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-199"><a id="__codelineno-14-199" name="__codelineno-14-199" href="#__codelineno-14-199"></a><span class="w">    </span><span class="c1">//Battery Level &lt;10%</span>
</span><span id="__span-14-200"><a id="__codelineno-14-200" name="__codelineno-14-200" href="#__codelineno-14-200"></a><span class="w">    </span><span class="n">displayBitmap</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Width</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_2_Height</span><span class="p">,</span><span class="w"> </span><span class="n">Battery_0</span><span class="p">);</span>
</span><span id="__span-14-201"><a id="__codelineno-14-201" name="__codelineno-14-201" href="#__codelineno-14-201"></a>
</span><span id="__span-14-202"><a id="__codelineno-14-202" name="__codelineno-14-202" href="#__codelineno-14-202"></a><span class="w">    </span><span class="c1">//RED</span>
</span><span id="__span-14-203"><a id="__codelineno-14-203" name="__codelineno-14-203" href="#__codelineno-14-203"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">setPixelColor</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</span><span id="__span-14-204"><a id="__codelineno-14-204" name="__codelineno-14-204" href="#__codelineno-14-204"></a><span class="w">    </span><span class="n">led</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
</span><span id="__span-14-205"><a id="__codelineno-14-205" name="__codelineno-14-205" href="#__codelineno-14-205"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-14-206"><a id="__codelineno-14-206" name="__codelineno-14-206" href="#__codelineno-14-206"></a>
</span><span id="__span-14-207"><a id="__codelineno-14-207" name="__codelineno-14-207" href="#__codelineno-14-207"></a>
</span><span id="__span-14-208"><a id="__codelineno-14-208" name="__codelineno-14-208" href="#__codelineno-14-208"></a><span class="w">  </span><span class="c1">// There&#39;s nothing on the screen yet - Now send the graphics to the device</span>
</span><span id="__span-14-209"><a id="__codelineno-14-209" name="__codelineno-14-209" href="#__codelineno-14-209"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">display</span><span class="p">();</span>
</span><span id="__span-14-210"><a id="__codelineno-14-210" name="__codelineno-14-210" href="#__codelineno-14-210"></a>
</span><span id="__span-14-211"><a id="__codelineno-14-211" name="__codelineno-14-211" href="#__codelineno-14-211"></a>
</span><span id="__span-14-212"><a id="__codelineno-14-212" name="__codelineno-14-212" href="#__codelineno-14-212"></a><span class="w">  </span><span class="c1">// Print the variables to Serial Terminal:</span>
</span><span id="__span-14-213"><a id="__codelineno-14-213" name="__codelineno-14-213" href="#__codelineno-14-213"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Voltage: &quot;</span><span class="p">));</span>
</span><span id="__span-14-214"><a id="__codelineno-14-214" name="__codelineno-14-214" href="#__codelineno-14-214"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">voltage</span><span class="p">);</span><span class="w">  </span><span class="c1">// Print the battery voltage</span>
</span><span id="__span-14-215"><a id="__codelineno-14-215" name="__codelineno-14-215" href="#__codelineno-14-215"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; V&quot;</span><span class="p">);</span>
</span><span id="__span-14-216"><a id="__codelineno-14-216" name="__codelineno-14-216" href="#__codelineno-14-216"></a>
</span><span id="__span-14-217"><a id="__codelineno-14-217" name="__codelineno-14-217" href="#__codelineno-14-217"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Percentage: &quot;</span><span class="p">));</span>
</span><span id="__span-14-218"><a id="__codelineno-14-218" name="__codelineno-14-218" href="#__codelineno-14-218"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">soc</span><span class="p">);</span><span class="w"> </span><span class="c1">// Print the battery state of charge</span>
</span><span id="__span-14-219"><a id="__codelineno-14-219" name="__codelineno-14-219" href="#__codelineno-14-219"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; %&quot;</span><span class="p">);</span>
</span><span id="__span-14-220"><a id="__codelineno-14-220" name="__codelineno-14-220" href="#__codelineno-14-220"></a>
</span><span id="__span-14-221"><a id="__codelineno-14-221" name="__codelineno-14-221" href="#__codelineno-14-221"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">F</span><span class="p">(</span><span class="s">&quot;Alert: &quot;</span><span class="p">));</span>
</span><span id="__span-14-222"><a id="__codelineno-14-222" name="__codelineno-14-222" href="#__codelineno-14-222"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">alert</span><span class="p">);</span>
</span><span id="__span-14-223"><a id="__codelineno-14-223" name="__codelineno-14-223" href="#__codelineno-14-223"></a><span class="w">  </span><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
</span><span id="__span-14-224"><a id="__codelineno-14-224" name="__codelineno-14-224" href="#__codelineno-14-224"></a>
</span><span id="__span-14-225"><a id="__codelineno-14-225" name="__codelineno-14-225" href="#__codelineno-14-225"></a><span class="w">  </span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
</span><span id="__span-14-226"><a id="__codelineno-14-226" name="__codelineno-14-226" href="#__codelineno-14-226"></a><span class="p">}</span>
</span><span id="__span-14-227"><a id="__codelineno-14-227" name="__codelineno-14-227" href="#__codelineno-14-227"></a>
</span><span id="__span-14-228"><a id="__codelineno-14-228" name="__codelineno-14-228" href="#__codelineno-14-228"></a>
</span><span id="__span-14-229"><a id="__codelineno-14-229" name="__codelineno-14-229" href="#__codelineno-14-229"></a>
</span><span id="__span-14-230"><a id="__codelineno-14-230" name="__codelineno-14-230" href="#__codelineno-14-230"></a><span class="c1">//Wrapper to avoid needing to pass width/height data twice</span>
</span><span id="__span-14-231"><a id="__codelineno-14-231" name="__codelineno-14-231" href="#__codelineno-14-231"></a><span class="kt">void</span><span class="w"> </span><span class="nf">displayBitmap</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">imageWidth</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">imageHeight</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="o">*</span><span class="n">imageData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-232"><a id="__codelineno-14-232" name="__codelineno-14-232" href="#__codelineno-14-232"></a><span class="w">  </span><span class="n">myOLED</span><span class="p">.</span><span class="n">bitmap</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">imageWidth</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">imageHeight</span><span class="p">,</span><span class="w"> </span><span class="n">imageData</span><span class="p">,</span><span class="w"> </span><span class="n">imageWidth</span><span class="p">,</span><span class="w"> </span><span class="n">imageHeight</span><span class="p">);</span>
</span><span id="__span-14-233"><a id="__codelineno-14-233" name="__codelineno-14-233" href="#__codelineno-14-233"></a><span class="p">}</span>
</span></code></pre></div>
<p>To keep track of the icons that we create, we are going to create a header file with the <strong>&ast;.ino</strong>. This is useful when writing code for big projects that involve a lot of components. Click on the icon to create a new tab. We will name this <strong>icons.h</strong>.</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/Creating_New_Tab_Arduino.JPG"><img src="../assets/img/Creating_New_Tab_Arduino.JPG" width="600px" height="600px" alt="New Tab"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i> New Tab</i></td>
   </tr>
  </table>
</div>

<p>Copy and paste the following code into tab.</p>
<div class="highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kt">uint8_t</span><span class="w"> </span><span class="n">Battery_3</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0xF8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="p">};</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_3_Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_3_Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="p">;</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="kt">uint8_t</span><span class="w"> </span><span class="n">Battery_2</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0xF8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="p">};</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_2_Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_2_Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="p">;</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="kt">uint8_t</span><span class="w"> </span><span class="n">Battery_1</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0xFD</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0xF8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0B</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span>
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a><span class="p">};</span>
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_1_Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_1_Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="p">;</span>
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a><span class="kt">uint8_t</span><span class="w"> </span><span class="n">Battery_0</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0xF8</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span>
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0F</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span>
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="p">};</span>
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_0_Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="kt">int</span><span class="w"> </span><span class="n">Battery_0_Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">19</span><span class="p">;</span>
</span></code></pre></div>
<p>If you have not already, select your Board (in this case the <strong>SparkFun Thing Plus NORA-W306 (RTL8720DF)</strong>), and associated COM port (in this case <strong>COM13</strong>). Then hit the upload button. Disconnect the USB cable from the SparkFun Thing Plus NORA-W306 and hit the reset button on the board.</p>
<p>Looking close at the display, you should see the voltage, remaining charge, the alert flag indicating if the battery is low, and a battery meter icon. These values may be different depending on how much charge the LiPo battery has available! The RGB LED color will also change to the following colors based as well: green (battery level &gt; 60%), yellow (battery level 30%-60%), orange (battery level 10%-30%), and red (battery level &lt;10%).</p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Fuel_Gauge_OLED.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_LiPo_Fuel_Gauge_OLED.jpg" width="600px" height="600px" alt="LiPo Fuel Gauge Monitoring LiPo Battery and Displaying Battery Capacity on Qwiic Micro OLED"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>LiPo Fuel Gauge Monitoring LiPo Battery and Displaying Battery Capacity on Qwiic Micro OLED</i></td>
   </tr>
  </table>
</div>

<h1 id="more-examples">More Examples!!!<a class="headerlink" href="#more-examples" title="Permanent link"></a></h1>
<p>Of course, this only skims the surface of what the SparkFun Thing Plus - NORA-W306 can do. There are a handful of examples from the board support package that were not highlighted in this tutorial and are being ported by our friends at Realtek with the NORA-W306 module. From the menu, try opening the other examples listed for hte board: <strong>File</strong> &gt; <strong>Examples</strong> &gt; <font style="color:gray">Examples for AW_CU488 Thing Plus (RTL8721DM)</font></p>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/AmebaD_RealTek_Additional_Arduino_Examples.JPG"><img src="../assets/img/AmebaD_RealTek_Additional_Arduino_Examples.JPG" width="600px" height="600px" alt="More Arduino Examples!"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>More Arduino Examples!</i></td>
   </tr>
  </table>
</div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of the examples listed in the menu may still be under development. Make sure to be patient as they include more support for the NORA-W306 module.</p>
</div>
<p>Or try adding another <a href="https://www.sparkfun.com/qwiic">Qwiic-enabled device</a> or a breakout board to your next project!</p>
<div style="text-align: center"><a href="https://www.sparkfun.com/qwiic" class="md-button md-button--primary">Qwiic Connect System</a></div>

<h1 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link"></a></h1>
<h3 id="general-troubleshooting-help">General Troubleshooting Help<a class="headerlink" href="#general-troubleshooting-help" title="Permanent link"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>
    <strong> Not working as expected and need help? </strong> <br /><br /></p>
<p>If you need technical assistance and more information on a product that is not working as you expected, we recommend heading on over to the <a href="https://www.sparkfun.com/technical_assistance">SparkFun Technical Assistance</a> page for some initial troubleshooting. <br /><br /></p>
<p><div style="text-align: center"><a href="https://www.sparkfun.com/technical_assistance" target="sfe_technical_assistance" class="md-button">SparkFun Technical Assistance Page</a></div></p>
<p>If you don't find what you need there, the <a href="https://community.sparkfun.com/">SparkFun Forums</a> are a great place to find and ask for help. If this is your first visit, you'll need to create a forum account to search product forums and post questions.<br /><br /></p>
<p><div style="text-align: center"><a href="https://community.sparkfun.com/" class="md-button md-button--primary">Log Into SparkFun Forums</a></div></p>
</div>
<h3 id="manual-upload-mode">Manual Upload Mode<a class="headerlink" href="#manual-upload-mode" title="Permanent link"></a></h3>
<p>Having problems uploading code with the auto upload mode? You may see this in the output window indicating there was an error uploading.</p>
<div class="highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>Please<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>upload<span class="w"> </span>mode<span class="w"> </span>manually<span class="o">(</span><span class="nb">wait</span><span class="w"> </span>5s<span class="o">)</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="m">05</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="m">04</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="m">03</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="m">02</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">    </span><span class="m">01</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>Uploading.....error:<span class="w"> </span>Enter<span class="w"> </span>Uart<span class="w"> </span>Download<span class="w"> </span>Mode
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span>Upload<span class="w"> </span>Image<span class="w"> </span><span class="k">done</span>.
</span></code></pre></div>
<p>If you have problems uploading code when Auto Upload Mode is enabled, try uploading code manually. From the menu, select the following: <strong>Tools</strong> &gt; <strong>Auto Upload Mode:</strong> &gt; <strong>Enable</strong>. Hit the upload button in the Arduino IDE. In the debug window, you should see something similar. As the Arduino IDE starts outputting the numbers.</p>
<div class="highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>Please<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>upload<span class="w"> </span>mode<span class="w"> </span>manually<span class="o">(</span><span class="nb">wait</span><span class="w"> </span>5s<span class="o">)</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">    </span><span class="m">05</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="m">04</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="m">03</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="m">02</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="m">01</span>
</span></code></pre></div>
<p>Press down on the BOOT button. While holding down the BOOT button, press the RESET Button momentarily. Keep holding the BOOT button for a moment before lifting your finger off the button.</p>
<div style="text-align: center;">
<table>
  <tr align="center">
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Manual_Upload_1.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Manual_Upload_1.jpg" width="600px" height="600px" alt="Manual Upload Sequence (Boot)"></a></td>
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Manual_Upload_2.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Manual_Upload_2.jpg" width="600px" height="600px" alt="Manual Upload Sequence (Boot + Reset)"></a></td>
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Manual_Upload_3.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_Manual_Upload_3.jpg" width="600px" height="600px" alt="Manual Upload Sequence (Boot)"></a></td>
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg"><img src="../assets/img/WRL-21637_Thing_Plus_NORA-W306_USB_Cable.jpg" width="600px" height="600px" alt="Manual Upload Sequence Release"></a></td>
  </tr>
  <tr align="center">
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>BOOT Button</i></td>
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>BOOT and RESET</i></td>
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Keep Holding Down BOOT</i></td>
   <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>Release BOOT</i></td>
  </tr>
</table>
</div>

<p>If all goes well, you should have a successful upload with the following message.</p>
<div class="highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>Please<span class="w"> </span>enter<span class="w"> </span>the<span class="w"> </span>upload<span class="w"> </span>mode<span class="w"> </span>manually<span class="o">(</span><span class="nb">wait</span><span class="w"> </span>5s<span class="o">)</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="m">05</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="m">04</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">    </span><span class="m">03</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="m">02</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="m">01</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>Uploading..................
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">    </span>Upload<span class="w"> </span>Image<span class="w"> </span><span class="k">done</span>.
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>All<span class="w"> </span>images<span class="w"> </span>are<span class="w"> </span>sent<span class="w"> </span>successfully!
</span></code></pre></div>
<div style="text-align: center;">
  <table>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><a href="../assets/img/NORA-W306_Arduino_Manual_Upload_Success.JPG"><img src="../assets/img/NORA-W306_Arduino_Manual_Upload_Success.JPG" width="600px" height="600px" alt="NORA-W306 Arduino Manual Upload Success"></a></td>
    </tr>
    <tr style="vertical-align:middle;">
     <td style="text-align: center; vertical-align: middle; border: solid 1px #cccccc;"><i>NORA-W306 Arduino Manual Upload Success</i></td>
   </tr>
  </table>
</div>

<p>To execute the code, hit the reset button or power cycle the board!</p>
<h1 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link"></a></h1>
<p>Now that you've successfully got your SparkFun Thing Plus - NORA-W306 up and running, it's time to incorporate it into your own project! For more information, check out the resources below:</p>
<ul>
<li><a href="../assets/board_files/SparkFun_Thing_Plus_NORA_W306_Schematic_v10.pdf">Schematic (PDF)</a></li>
<li><a href="../assets/board_files/SparkFun_Thing_Plus_NORA_W306_v1_0.zip">Eagle Files (ZIP)</a></li>
<li><a href="../assets/img/SparkFun_Thing_Plus_NORA-W306_Board_Dimensions.png">Board Dimensions (PNG)</a></li>
<li>Component Datasheets<ul>
<li>u-blox NORA-W306<ul>
<li><a href="../assets/component_documentation/NORA-W30_ProductSummary_UBX-22006516.pdf">Product Summary (PDF)</a></li>
<li><a href="../assets/component_documentation/NORA-W30_DataSheet_UBX-22021117.pdf">Datasheet (PDF)</a></li>
<li><a href="../assets/component_documentation/NORA-W30_SIM_UBX-22021119.pdf">Integration Manual (PDF)</a></li>
</ul>
</li>
<li><a href="../assets/component_documentation/xc6222.pdf">XC6222 3.3V/700mA Voltage Regulator (PDF)</a></li>
<li><a href="../assets/component_documentation/MCP73831.pdf">MCP73831 LiPo Charger (PDF)</a></li>
<li><a href="../assets/component_documentation/MAX17048.pdf">MAX17048 LiPo Fuel Gauge (PDF)</a></li>
<li><a href="../assets/component_documentation/WS2812C-2020.pdf">WS2812C-2020 RGB Addressable LED (PDF)</a></li>
</ul>
</li>
<li><a href="../assets/img/SparkFun_Thing_Plus_NORA-W306_u-blox.pdf">Graphical Datasheet</a></li>
<li><a href="https://github.com/sparkfun/Fritzing_Parts/blob/main/products/21637_sfe_thing_plus_u-blox_NORA-W306_development_board_lipo_charger_fuel_gauge_qwiic_WS2812.fzpz">Fritzing Part</a></li>
<li><a href="https://www.sparkfun.com/qwiic">Qwiic Info Page</a></li>
<li><a href="https://www.sparkfun.com/thing_plus">Compare Thing Plus Boards</a></li>
<li><a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers">CP210X Drivers</a></li>
<li><a href="https://github.com/ambiot/ambd_arduino">Realtek: Arduino Board Support Files</a></li>
<li>Arduino Libraries<ul>
<li><a href="https://github.com/sparkfun/SparkFun_MAX1704x_Fuel_Gauge_Arduino_Library">MAX17048</a></li>
<li><a href="https://github.com/greiman/SdFat">SdFat</a></li>
<li><a href="https://github.com/sparkfun/SparkFun_Qwiic_OLED_Arduino_Library">Qwiic OLED</a></li>
</ul>
</li>
<li><a href="https://github.com/sparkfun/SparkFun_Thing_Plus_NORA-W306">GitHub Hardware Repo</a></li>
<li><a href="https://youtu.be/sLkoSZ7Aepk?si=6z98aLXZULI_bts6">SFE Product Showcase</a></li>
</ul>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-10-29T04:56:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-10-29</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-10-29T04:56:56+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-10-29</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:ho.chan@colorado.edu">bboyho</a>
    </nav>
  </span>

    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Contributors">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/bboyho" class="md-author" title="@bboyho">
          
          <img src="https://avatars.githubusercontent.com/u/3209977?v=4&size=72" alt="bboyho">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>


  


  



                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2023 - <a href="https://www.sparkfun.com/" target="_blank" rel="noopener">SparkFun Electronics&#174;<br> <a href="https://goo.gl/maps/vkstCpQZW6jZMjzYA" target="_blank" rel="noopener">6333 Dry Creek Parkway, Niwot, Colorado 80503</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.sparkfun.com/" target="_blank" rel="noopener" title="www.sparkfun.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" width="15.955" height="24" viewbox="0 0 16 24"><path d="M13.03 3.838s.34 1.438-.745 1.638c-.756.134-1.976-.615-2.59-1.362-.756-.922-.66-1.647-.072-2.29.884-.978 2.397-.6 2.397-.6S9.248-1.209 6.362.783c-2.571 1.77-1.834 4.183.487 6.288 2.09 1.902.42 3.988-1.686 3.717-1.444-.184-2.035-1.343-1.688-2.054.299-.608 1.335-.982 1.335-.982s-1.19-.484-2.592.044C.96 8.27-.078 9.312.005 11.917V24s1.3-1.604 2.83-3.236c1.713-1.84 2.495-3.084 4.254-2.938 3.328.205 5.735-1.273 7.37-3.645 3.142-4.563.681-9.661-1.43-10.343" style="fill:#e0311d;fill-opacity:1;stroke-width:.66479"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/sparkfun" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.instagram.com/sparkfun" target="_blank" rel="noopener" title="www.instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141m0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7m146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8m76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.github.com/sparkfun" target="_blank" rel="noopener" title="www.github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/SparkFun" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/sparkfun" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="./#__consent" target="_blank" rel="noopener" title="Change cookie settings" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M257.5 27.6c-.8-5.4-4.9-9.8-10.3-10.6-22.1-3.1-44.6.9-64.4 11.4l-74 39.5c-19.7 10.5-35.6 27-45.4 47.1l-36.7 75.6c-9.8 20.1-13 42.9-9.1 64.9l14.5 82.8c3.9 22.1 14.6 42.3 30.7 57.9l60.3 58.4c16.1 15.6 36.6 25.6 58.7 28.7l83 11.7c22.1 3.1 44.6-.9 64.4-11.4l74-39.5c19.7-10.5 35.6-27 45.4-47.2l36.7-75.5c9.8-20.1 13-42.9 9.1-64.9-.9-5.3-5.3-9.3-10.6-10.1-51.5-8.2-92.8-47.1-104.5-97.4-1.8-7.6-8-13.4-15.7-14.6-54.6-8.7-97.7-52-106.2-106.8zM208 144a32 32 0 1 1 0 64 32 32 0 1 1 0-64m-64 192a32 32 0 1 1 64 0 32 32 0 1 1-64 0m224-64a32 32 0 1 1 0 64 32 32 0 1 1 0-64"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  


  




<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
          
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "content.action.edit", "navigation.footer", "navigation.tracking", "navigation.tabs.sticky", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.path"], "search": "../assets/javascripts/workers/search.c7c1ca2c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.203fd0bc.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
        <script src="../javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>